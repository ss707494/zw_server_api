(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{479:function(e,t,n){"use strict";n.r(t);var a=n(16),l=n.n(a),r=n(17),i=n(23),c=n(19),u=n(0),o=n.n(u),d=n(14),m=n(543),p={};p.Box=Object(d.b)("div").withConfig({displayName:"style__Box",componentId:"sc-1ay69up-0"})(["margin:20px;> header{display:grid;grid-column-gap:10px;grid-template-columns:minmax(200px,auto) repeat(2,1fr);> section{flex:1;}}"]),p.Table=Object(d.b)(m.a).withConfig({displayName:"style__Table",componentId:"sc-1ay69up-1"})(["&&&{margin-top:20px;border-radius:5px;border-collapse:initial;overflow:hidden;border:1px solid rgba(224,224,224,1);> thead{background:",";> tr > th{color:",";}}}"],function(e){return e.theme.palette.grey[800]},function(e){return e.theme.palette.common.white}),p.Loading=Object(d.b)("section").withConfig({displayName:"style__Loading",componentId:"sc-1ay69up-2"})(["text-align:center;"]),p.ActionTableCell=Object(d.b)("section").withConfig({displayName:"style__ActionTableCell",componentId:"sc-1ay69up-3"})(["&&&{display:flex;> button{margin-right:8px;&:last-of-type{margin-right:0;}}}"]),p.HeaderBox=Object(d.b)("section").withConfig({displayName:"style__HeaderBox",componentId:"sc-1ay69up-4"})(["&&&{display:flex;flex-direction:column;> header{font-size:20px;font-weight:bold;margin-bottom:15px;}> section{font-weight:bold;font-size:14px;margin-bottom:10px;}> main{display:flex;align-items:center;> div{margin-right:10px;}}}"]),p.ImgPreview=Object(d.b)("section").withConfig({displayName:"style__ImgPreview",componentId:"sc-1ay69up-5"})(["width:180px;display:inline-flex;> img{width:80px;height:60px;}> section{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-left:10px;}"]),p.SearchBox=Object(d.b)("div").withConfig({displayName:"style__SearchBox",componentId:"sc-1ay69up-6"})(["display:grid;grid-template-columns:4fr 3fr 2fr;grid-gap:12px;> span{grid-area:2 / 1 / 2 / 3;justify-self:end;align-self:center;}"]);var s=n(511),b=n(534),v=n(159),f=n(32),g=n(471),_=n(547),E=n(544),h=n(466),y=n(546),j=n(531),O=n(548),x=n(62),w=n(117),k=n(85);function C(){var e=Object(w.a)(["\n    query ($data: ProductSupplementListInput) {\n        product_supplement_list_total(productSupplementListInput: $data)\n        product_supplement_list(productSupplementListInput: $data) {\n            id\n            name\n            amount\n            number\n            user_id\n            state\n            create_time\n            addItemList {\n                id\n                name\n                count\n                amount\n                supplier\n                product {\n                    id\n                    number\n                    is_group\n                    name\n                    stock\n                    price_in\n                    price_out\n                    price_market\n                    weight\n                }\n            }\n        }\n    }\n"]);return C=function(){return e},e}function L(){var e=Object(w.a)(["\n    mutation ($data: ProductInput) {\n        save_product(ProductInput: $data) {\n            msg\n            flag\n            product {\n                id\n            }\n        }\n    }\n"]);return L=function(){return e},e}function I(){var e=Object(w.a)(["\n    query ($id: String) {\n        category_origin(id: $id) {\n            id number c2_id c2_name c3_id c3_name\n            c2_number c3_number\n        }\n    }\n"]);return I=function(){return e},e}function T(){var e=Object(w.a)(["\n      mutation($data: ProductSupplementInput) {\n          save_product_supplement (productSupplementInput: $data) {\n              msg\n              flag\n          }\n      }\n  "]);return T=function(){return e},e}var $={save_product_supplement:Object(k.b)(T())},B=(Object(k.b)(I()),Object(k.b)(L()),Object(k.b)(C())),S=n(64),P=function(e){var t,n=e.theme,a=e.open,u=e.editData,d=e.setEditData,m=e.handleClose,p=e.refreshData,s=void 0===p?function(){}:p,w=Object(v.c)($.save_product_supplement),k=Object(c.a)(w,2)[0],C=function(){var e=Object(i.a)(l.a.mark(function e(){var t,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({data:{addList:u.waitList.map(function(e){return Object(r.a)({},Object(S.pick)(e,["addNumber","addPrice"]),{product_id:e.id})})}});case 2:t=e.sent,(n=t.save_product_supplement).flag&&(Object(f.b)({message:(null===n||void 0===n?void 0:n.msg)||"\u64cd\u4f5c\u6210\u529f"}),m(),s());case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return o.a.createElement(g.a,{fullWidth:!0,maxWidth:"lg",open:a,onClose:m},o.a.createElement(h.a,null,"\u8865\u8d27\u5217\u8868"),o.a.createElement(E.a.Content,null,o.a.createElement(b.a.Table,{theme:n},o.a.createElement(y.a,null,o.a.createElement(_.a,null,["\u5546\u54c1\u7f16\u53f7","\u662f\u5426\u62fc\u56e2","\u4e2d\u6587\u540d\u79f0","\u5e93\u5b58","\u8fdb\u8d27\u4ef7\u683c","\u5e02\u573a\u4ef7\u683c","\u552e\u5356\u4ef7\u683c","\u91cd\u91cf"].map(function(e){return o.a.createElement(j.a,{key:"TableHead".concat(e)},e)}),o.a.createElement(j.a,{width:80},"\u8865\u8d27\u6570\u91cf"),o.a.createElement(j.a,{width:80},"\u8865\u8d27\u4ef7\u683c"),o.a.createElement(j.a,{width:100},"\u4f9b\u5e94\u5546"),o.a.createElement(j.a,{width:100},"\u5907\u6ce8"))),o.a.createElement(O.a,null,null===u||void 0===u?void 0:null===(t=u.waitList)||void 0===t?void 0:t.map(function(e,t){return o.a.createElement(_.a,{key:"TableBody".concat(null===e||void 0===e?void 0:e.id)},o.a.createElement(j.a,null,null===e||void 0===e?void 0:e.number),o.a.createElement(j.a,null,(null===e||void 0===e?void 0:e.is_group)?"\u662f":"\u5426"),o.a.createElement(j.a,null,null===e||void 0===e?void 0:e.name),o.a.createElement(j.a,null,null===e||void 0===e?void 0:e.stock),o.a.createElement(j.a,null,null===e||void 0===e?void 0:e.price_in),o.a.createElement(j.a,null,null===e||void 0===e?void 0:e.price_out),o.a.createElement(j.a,null,null===e||void 0===e?void 0:e.price_market),o.a.createElement(j.a,null,null===e||void 0===e?void 0:e.weight),o.a.createElement(j.a,null,o.a.createElement(E.a.TextFieldBox,{label:"",type:"number",value:null===e||void 0===e?void 0:e.addNumber,onChange:function(e){return d(Object(r.a)({},u,{waitList:u.waitList.map(function(n,a){return a!==t?n:Object(r.a)({},n,{addNumber:parseFloat(e.target.value)})})}))}})),o.a.createElement(j.a,null,o.a.createElement(E.a.TextFieldBox,{label:"",type:"number",value:null===e||void 0===e?void 0:e.addPrice,onChange:function(e){return d(Object(r.a)({},u,{waitList:u.waitList.map(function(n,a){return a!==t?n:Object(r.a)({},n,{addPrice:parseFloat(e.target.value)})})}))}})),o.a.createElement(j.a,null,o.a.createElement(E.a.TextFieldBox,{label:"",value:null===e||void 0===e?void 0:e.addSupplier,onChange:function(e){return d(Object(r.a)({},u,{waitList:u.waitList.map(function(n,a){return a!==t?n:Object(r.a)({},n,{addSupplier:e.target.value})})}))}})),o.a.createElement(j.a,null,o.a.createElement(E.a.TextFieldBox,{label:"",value:null===e||void 0===e?void 0:e.addRemark,onChange:function(e){return d(Object(r.a)({},u,{waitList:u.waitList.map(function(n,a){return a!==t?n:Object(r.a)({},n,{addRemark:e.target.value})})}))}})))}))),o.a.createElement("footer",null,o.a.createElement(x.a,{loading:0,color:"primary",variant:"contained",fullWidth:!0,onClick:C},"\u786e\u5b9a\u8865\u8d27"))))},D=n(536),N=n(516),H=n(75),F=n(538),W=function(e){var t,n=e.theme,a=e.open,l=e.editData,r=e.handleClose;return o.a.createElement(g.a,{fullWidth:!0,maxWidth:"lg",open:a,onClose:r},o.a.createElement(h.a,null,"\u8865\u8d27\u5217\u8868"),o.a.createElement(E.a.Content,null,o.a.createElement(b.a.Table,{theme:n},o.a.createElement(y.a,null,o.a.createElement(_.a,null,["\u5546\u54c1\u7f16\u53f7","\u4e2d\u6587\u540d\u79f0","\u8865\u8d27\u6570\u91cf","\u8865\u8d27\u4ef7\u683c","\u5e93\u5b58","\u8fdb\u8d27\u4ef7\u683c","\u5e02\u573a\u4ef7\u683c","\u552e\u5356\u4ef7\u683c","\u91cd\u91cf"].map(function(e){return o.a.createElement(j.a,{key:"TableHead".concat(e)},e)}))),o.a.createElement(O.a,null,null===l||void 0===l?void 0:null===(t=l.addItemList)||void 0===t?void 0:t.map(function(e){var t=e.product;return o.a.createElement(_.a,{key:"TableBody".concat(null===t||void 0===t?void 0:t.id)},o.a.createElement(j.a,null,null===t||void 0===t?void 0:t.number),o.a.createElement(j.a,null,null===t||void 0===t?void 0:t.name),o.a.createElement(j.a,null,null===e||void 0===e?void 0:e.count),o.a.createElement(j.a,null,null===e||void 0===e?void 0:e.amount),o.a.createElement(j.a,null,null===t||void 0===t?void 0:t.stock),o.a.createElement(j.a,null,null===t||void 0===t?void 0:t.price_in),o.a.createElement(j.a,null,null===t||void 0===t?void 0:t.price_out),o.a.createElement(j.a,null,null===t||void 0===t?void 0:t.price_market),o.a.createElement(j.a,null,null===t||void 0===t?void 0:t.weight))}))),o.a.createElement("footer",null)))};n.d(t,"AddProduct",function(){return q});var q=function(e){var t=e.theme,n=Object(D.b)(),a=function(){var e=Object(u.useState)(!1),t=Object(c.a)(e,2),n=t[0],a=t[1],l=Object(u.useState)({}),r=Object(c.a)(l,2),i=r[0],o=r[1];return{editClick:function(e){return function(){o(e),a(!0)}},open:n,setOpen:a,editData:i,setEditData:o,handleClose:function(){o({}),a(!1)}}}(),d=function(){var e=Object(u.useState)(!1),t=Object(c.a)(e,2),n=t[0],a=t[1],l=Object(u.useState)({}),r=Object(c.a)(l,2),i=r[0],o=r[1];return{editClick:function(e){return function(){o(e),a(!0)}},open:n,setOpen:a,editData:i,setEditData:o,handleClose:function(){o({}),a(!1)}}}(),m=a.editClick,g=d.editClick,E=Object(v.e)(B),h=Object(c.a)(E,3),x=h[0],w=h[1],k=w.product_supplement_list,C=w.product_supplement_list_total,L=h[2],I=Object(v.e)(F.a.getList),T=Object(c.a)(I,1)[0],$=function(){var e=Object(i.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(n=e.sent,null===(a=null===n||void 0===n?void 0:null===(t=n.product_list)||void 0===t?void 0:t.filter(function(e){return e.stock<0}))||void 0===a?void 0:a.length){e.next=7;break}return Object(f.b)({message:"\u6682\u65e0\u9700\u8981\u8865\u8d27\u7684\u5546\u54c1"}),e.abrupt("return");case 7:m({waitList:a.map(function(e){return Object(r.a)({},e,{addNumber:-(null===e||void 0===e?void 0:e.stock),addPrice:e.price_in})})})();case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return o.a.useEffect(function(){x({data:Object(r.a)({},n.pageData)})},[x,n.pageData]),o.a.createElement(b.a.Box,null,o.a.createElement("header",null,o.a.createElement(b.a.HeaderBox,null,o.a.createElement("header",null,"\u8865\u8d27\u5217\u8868"),o.a.createElement("section",null,"\u60a8\u53ef\u4ee5\u8fdb\u884c\u7ba1\u7406"),o.a.createElement("main",null,o.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){return $()}},"\u751f\u6210\u8865\u8d27\u5355")))),o.a.createElement("main",null,L?o.a.createElement(p.Loading,null,o.a.createElement(N.a,null)):o.a.createElement(b.a.Table,{theme:t},o.a.createElement(y.a,null,o.a.createElement(_.a,null,["\u8865\u8d27\u5355\u7f16\u53f7","\u521b\u5efa\u65f6\u95f4","\u8ba2\u5355\u8be6\u60c5"].map(function(e){return o.a.createElement(j.a,{key:"TableHead".concat(e)},e)}))),o.a.createElement(O.a,null,null===k||void 0===k?void 0:k.map(function(e){return o.a.createElement(_.a,{key:"TableBody".concat(null===e||void 0===e?void 0:e.id)},o.a.createElement(j.a,null,null===e||void 0===e?void 0:e.number),o.a.createElement(j.a,null,Object(H.c)(new Date(null===e||void 0===e?void 0:e.create_time),"yyyy/MM/dd HH:mm")),o.a.createElement(j.a,null,o.a.createElement(b.a.ActionTableCell,null,o.a.createElement(s.a,{color:"secondary",onClick:function(){e.addItemList.length&&g(e)()},variant:"contained"},"\u8be6\u60c5"))))}))),o.a.createElement(D.a,Object.assign({},n,{count:~~C,refresh:x}))),o.a.createElement(P,Object.assign({theme:t,refreshData:x},a)),o.a.createElement(W,Object.assign({theme:t},d)))};t.default=q},538:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return o});var a=n(117),l=n(85);function r(){var e=Object(a.a)(["\n    mutation ($data: ProductInput) {\n        save_product(ProductInput: $data) {\n            msg\n            flag\n            product {\n                id\n            }\n        }\n    }\n"]);return r=function(){return e},e}function i(){var e=Object(a.a)(["\n    query ($id: String) {\n        category_origin(id: $id) {\n            id number c2_id c2_name c3_id c3_name\n            c2_number c3_number\n        }\n    }\n"]);return i=function(){return e},e}function c(){var e=Object(a.a)(["\n    query ($data: ProductInput) {\n        product_list(ListInput: $data) {\n            id name number is_hot is_new stock price_in is_enable\n            price_market price_out weight unit brand category_id\n            c1_id c1_number c2_id c2_name c3_id c3_name\n            c2_number c3_number is_group group_amount group_precision\n            group_remark\n            imgs { id url number }\n        }\n        product_total(ListInput: $data)\n    }\n  "]);return c=function(){return e},e}var u={getList:Object(l.b)(c())},o=(Object(l.b)(i()),Object(l.b)(r()))}}]);