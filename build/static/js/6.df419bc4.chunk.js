(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{453:function(n,e,t){"use strict";t.r(e);var a=t(29),r=t.n(a),i=t(18),c=t(44),u=t(20),o=t(0),l=t.n(o),d=t(11),m=t(12),p=t(521);function s(){var n=Object(d.a)(["\n  display: grid;\n  grid-template-columns: 4fr 3fr 2fr;\n  grid-gap: 12px;\n  > span {\n    grid-area: 2 / 1 / 2 / 3;\n    justify-self: end;\n    align-self: center;\n  }\n"]);return s=function(){return n},n}function b(){var n=Object(d.a)(["\n  width: 180px;\n  display: inline-flex;\n  > img {\n    width: 80px;\n    height: 60px;\n  }\n  > section {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-left: 10px;\n  }\n"]);return b=function(){return n},n}function f(){var n=Object(d.a)(["&&&{\n  display: flex;\n  flex-direction: column;\n  > header {\n    font-size: 20px;\n    font-weight: bold;\n    margin-bottom: 15px;\n  } \n  > section {\n    font-weight: bold;\n    font-size: 14px;\n    margin-bottom: 10px;\n  }\n  > main {\n    display: flex;\n    align-items: center;\n    //display: grid;\n    //grid-template-columns: auto;\n    //grid-row-gap: 10px;\n    //justify-items: start;\n    \n    > div {\n      margin-right: 10px;\n    }\n  }\n}\n"]);return f=function(){return n},n}function v(){var n=Object(d.a)(["&&& {\n  display: flex;\n  > button {\n    margin-right: 8px;\n    &:last-of-type {\n      margin-right: 0;\n    }\n  }\n}"]);return v=function(){return n},n}function g(){var n=Object(d.a)(["\n  text-align: center;\n"]);return g=function(){return n},n}function j(){var n=Object(d.a)(["\n&&&{\n  margin-top: 20px;\n  border-radius: 5px;\n  border-collapse: initial;\n  overflow: hidden;\n  border: 1px solid rgba(224, 224, 224, 1);\n  > thead {\n    background: ",";\n    > tr > th {\n      color: ",";\n    }\n  }\n}\n"]);return j=function(){return n},n}function O(){var n=Object(d.a)(["\n  margin: 20px;\n  > header {\n    display: grid;\n    grid-column-gap: 10px;\n    grid-template-columns: minmax(200px, auto) repeat(2, 1fr);\n    > section {\n      flex: 1;\n    }\n  }\n"]);return O=function(){return n},n}var h={};h.Box=Object(m.a)("div")(O()),h.Table=Object(m.a)(p.a)(j(),function(n){return n.theme.palette.grey[800]},function(n){return n.theme.palette.common.white}),h.Loading=Object(m.a)("section")(g()),h.ActionTableCell=Object(m.a)("section")(v()),h.HeaderBox=Object(m.a)("section")(f()),h.ImgPreview=Object(m.a)("section")(b()),h.SearchBox=Object(m.a)("div")(s());var E=t(479),x=t(500),_=t(496),w=t(27),y=t(441),k=t(525),C=t(504),L=t(436),P=t(524),S=t(497),T=t(526),B=t(81),D=t(171);function I(){var n=Object(d.a)(["\n    query ($data: ProductSupplementListInput) {\n        product_supplement_list_total(productSupplementListInput: $data)\n        product_supplement_list(productSupplementListInput: $data) {\n            id\n            name\n            amount\n            number\n            user_id\n            state\n            create_time\n            addItemList {\n                id\n                name\n                count\n                amount\n                supplier\n                product {\n                    id\n                    number\n                    is_group\n                    name\n                    stock\n                    price_in\n                    price_out\n                    price_market\n                    weight\n                }\n            }\n        }\n    }\n"]);return I=function(){return n},n}function $(){var n=Object(d.a)(["\n    mutation ($data: ProductInput) {\n        save_product(ProductInput: $data) {\n            msg\n            flag\n            product {\n                id\n            }\n        }\n    }\n"]);return $=function(){return n},n}function F(){var n=Object(d.a)(["\n    query ($id: String) {\n        category_origin(id: $id) {\n            id number c2_id c2_name c3_id c3_name\n            c2_number c3_number\n        }\n    }\n"]);return F=function(){return n},n}function H(){var n=Object(d.a)(["\n      mutation($data: ProductSupplementInput) {\n          save_product_supplement (productSupplementInput: $data) {\n              msg\n              flag\n          }\n      }\n  "]);return H=function(){return n},n}var q={save_product_supplement:Object(D.b)(H())},W=(Object(D.b)(F()),Object(D.b)($()),Object(D.b)(I())),z=t(511),A=function(n){var e,t=n.theme,a=n.open,o=n.editData,d=n.setEditData,m=n.handleClose,p=n.refreshData,s=void 0===p?function(){}:p,b=Object(_.a)(q.save_product_supplement),f=Object(u.a)(b,2)[0],v=function(){var n=Object(c.a)(r.a.mark(function n(){var e,t;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f({data:{addList:o.waitList.map(function(n){return Object(i.a)({},Object(z.pick)(n,["addNumber","addPrice"]),{product_id:n.id})})}});case 2:e=n.sent,(t=e.save_product_supplement).flag&&(Object(w.b)({message:(null===t||void 0===t?void 0:t.msg)||"\u64cd\u4f5c\u6210\u529f"}),m(),s());case 5:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();return l.a.createElement(y.a,{fullWidth:!0,maxWidth:"lg",open:a,onClose:m},l.a.createElement(L.a,null,"\u8865\u8d27\u5217\u8868"),l.a.createElement(C.a.Content,null,l.a.createElement(x.a.Table,{theme:t},l.a.createElement(P.a,null,l.a.createElement(k.a,null,["\u5546\u54c1\u7f16\u53f7","\u662f\u5426\u62fc\u56e2","\u4e2d\u6587\u540d\u79f0","\u5e93\u5b58","\u8fdb\u8d27\u4ef7\u683c","\u5e02\u573a\u4ef7\u683c","\u552e\u5356\u4ef7\u683c","\u91cd\u91cf"].map(function(n){return l.a.createElement(S.a,{key:"TableHead".concat(n)},n)}),l.a.createElement(S.a,{width:80},"\u8865\u8d27\u6570\u91cf"),l.a.createElement(S.a,{width:80},"\u8865\u8d27\u4ef7\u683c"),l.a.createElement(S.a,{width:100},"\u4f9b\u5e94\u5546"),l.a.createElement(S.a,{width:100},"\u5907\u6ce8"))),l.a.createElement(T.a,null,null===o||void 0===o?void 0:null===(e=o.waitList)||void 0===e?void 0:e.map(function(n,e){return l.a.createElement(k.a,{key:"TableBody".concat(null===n||void 0===n?void 0:n.id)},l.a.createElement(S.a,null,null===n||void 0===n?void 0:n.number),l.a.createElement(S.a,null,(null===n||void 0===n?void 0:n.is_group)?"\u662f":"\u5426"),l.a.createElement(S.a,null,null===n||void 0===n?void 0:n.name),l.a.createElement(S.a,null,null===n||void 0===n?void 0:n.stock),l.a.createElement(S.a,null,null===n||void 0===n?void 0:n.price_in),l.a.createElement(S.a,null,null===n||void 0===n?void 0:n.price_out),l.a.createElement(S.a,null,null===n||void 0===n?void 0:n.price_market),l.a.createElement(S.a,null,null===n||void 0===n?void 0:n.weight),l.a.createElement(S.a,null,l.a.createElement(C.a.TextFieldBox,{label:"",type:"number",value:null===n||void 0===n?void 0:n.addNumber,onChange:function(n){return d(Object(i.a)({},o,{waitList:o.waitList.map(function(t,a){return a!==e?t:Object(i.a)({},t,{addNumber:parseFloat(n.target.value)})})}))}})),l.a.createElement(S.a,null,l.a.createElement(C.a.TextFieldBox,{label:"",type:"number",value:null===n||void 0===n?void 0:n.addPrice,onChange:function(n){return console.log(Object(i.a)({},o,{waitList:o.waitList.map(function(t,a){return a!==e?t:Object(i.a)({},t,{addPrice:parseFloat(n.target.value)})})})),d(Object(i.a)({},o,{waitList:o.waitList.map(function(t,a){return a!==e?t:Object(i.a)({},t,{addPrice:parseFloat(n.target.value)})})}))}})),l.a.createElement(S.a,null,l.a.createElement(C.a.TextFieldBox,{label:"",value:null===n||void 0===n?void 0:n.addSupplier,onChange:function(n){return d(Object(i.a)({},o,{waitList:o.waitList.map(function(t,a){return a!==e?t:Object(i.a)({},t,{addSupplier:n.target.value})})}))}})),l.a.createElement(S.a,null,l.a.createElement(C.a.TextFieldBox,{label:"",value:null===n||void 0===n?void 0:n.addRemark,onChange:function(n){return d(Object(i.a)({},o,{waitList:o.waitList.map(function(t,a){return a!==e?t:Object(i.a)({},t,{addRemark:n.target.value})})}))}})))}))),l.a.createElement("footer",null,l.a.createElement(B.a,{loading:0,color:"primary",variant:"contained",fullWidth:!0,onClick:v},"\u786e\u5b9a\u8865\u8d27"))))},N=t(501),R=t(486),J=t(174),M=t(506),G=function(n){var e,t=n.theme,a=n.open,r=n.editData,i=n.handleClose;return l.a.createElement(y.a,{fullWidth:!0,maxWidth:"lg",open:a,onClose:i},l.a.createElement(L.a,null,"\u8865\u8d27\u5217\u8868"),l.a.createElement(C.a.Content,null,l.a.createElement(x.a.Table,{theme:t},l.a.createElement(P.a,null,l.a.createElement(k.a,null,["\u5546\u54c1\u7f16\u53f7","\u4e2d\u6587\u540d\u79f0","\u8865\u8d27\u6570\u91cf","\u8865\u8d27\u4ef7\u683c","\u5e93\u5b58","\u8fdb\u8d27\u4ef7\u683c","\u5e02\u573a\u4ef7\u683c","\u552e\u5356\u4ef7\u683c","\u91cd\u91cf"].map(function(n){return l.a.createElement(S.a,{key:"TableHead".concat(n)},n)}))),l.a.createElement(T.a,null,null===r||void 0===r?void 0:null===(e=r.addItemList)||void 0===e?void 0:e.map(function(n){var e=n.product;return l.a.createElement(k.a,{key:"TableBody".concat(null===e||void 0===e?void 0:e.id)},l.a.createElement(S.a,null,null===e||void 0===e?void 0:e.number),l.a.createElement(S.a,null,null===e||void 0===e?void 0:e.name),l.a.createElement(S.a,null,null===n||void 0===n?void 0:n.count),l.a.createElement(S.a,null,null===n||void 0===n?void 0:n.amount),l.a.createElement(S.a,null,null===e||void 0===e?void 0:e.stock),l.a.createElement(S.a,null,null===e||void 0===e?void 0:e.price_in),l.a.createElement(S.a,null,null===e||void 0===e?void 0:e.price_out),l.a.createElement(S.a,null,null===e||void 0===e?void 0:e.price_market),l.a.createElement(S.a,null,null===e||void 0===e?void 0:e.weight))}))),l.a.createElement("footer",null)))};t.d(e,"AddProduct",function(){return K});var K=function(n){var e=n.theme,t=Object(N.b)(),a=function(){var n=Object(o.useState)(!1),e=Object(u.a)(n,2),t=e[0],a=e[1],r=Object(o.useState)({}),i=Object(u.a)(r,2),c=i[0],l=i[1];return{editClick:function(n){return function(){l(n),a(!0)}},open:t,setOpen:a,editData:c,setEditData:l,handleClose:function(){l({}),a(!1)}}}(),d=function(){var n=Object(o.useState)(!1),e=Object(u.a)(n,2),t=e[0],a=e[1],r=Object(o.useState)({}),i=Object(u.a)(r,2),c=i[0],l=i[1];return{editClick:function(n){return function(){l(n),a(!0)}},open:t,setOpen:a,editData:c,setEditData:l,handleClose:function(){l({}),a(!1)}}}(),m=a.editClick,p=d.editClick,s=Object(_.b)(W),b=Object(u.a)(s,3),f=b[0],v=b[1],g=v.product_supplement_list,j=v.product_supplement_list_total,O=b[2],y=Object(_.b)(M.a.getList),C=Object(u.a)(y,1)[0],L=function(){var n=Object(c.a)(r.a.mark(function n(){var e,t,a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C();case 2:if(t=n.sent,null===(a=null===t||void 0===t?void 0:null===(e=t.product_list)||void 0===e?void 0:e.filter(function(n){return n.stock<0}))||void 0===a?void 0:a.length){n.next=7;break}return Object(w.b)({message:"\u6682\u65e0\u9700\u8981\u8865\u8d27\u7684\u5546\u54c1"}),n.abrupt("return");case 7:m({waitList:a.map(function(n){return Object(i.a)({},n,{addNumber:-(null===n||void 0===n?void 0:n.stock),addPrice:n.price_in})})})();case 8:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();return l.a.useEffect(function(){f({data:Object(i.a)({},t.pageData)})},[f,t.pageData]),l.a.createElement(x.a.Box,null,l.a.createElement("header",null,l.a.createElement(x.a.HeaderBox,null,l.a.createElement("header",null,"\u8865\u8d27\u5217\u8868"),l.a.createElement("section",null,"\u60a8\u53ef\u4ee5\u8fdb\u884c\u7ba1\u7406"),l.a.createElement("main",null,l.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return L()}},"\u751f\u6210\u8865\u8d27\u5355")))),l.a.createElement("main",null,O?l.a.createElement(h.Loading,null,l.a.createElement(R.a,null)):l.a.createElement(x.a.Table,{theme:e},l.a.createElement(P.a,null,l.a.createElement(k.a,null,["\u8865\u8d27\u5355\u7f16\u53f7","\u521b\u5efa\u65f6\u95f4","\u8ba2\u5355\u8be6\u60c5"].map(function(n){return l.a.createElement(S.a,{key:"TableHead".concat(n)},n)}))),l.a.createElement(T.a,null,null===g||void 0===g?void 0:g.map(function(n){return l.a.createElement(k.a,{key:"TableBody".concat(null===n||void 0===n?void 0:n.id)},l.a.createElement(S.a,null,null===n||void 0===n?void 0:n.number),l.a.createElement(S.a,null,Object(J.b)(new Date(null===n||void 0===n?void 0:n.create_time),"yyyy/MM/dd HH:mm")),l.a.createElement(S.a,null,l.a.createElement(x.a.ActionTableCell,null,l.a.createElement(E.a,{color:"secondary",onClick:function(){n.addItemList.length&&p(n)()},variant:"contained"},"\u8be6\u60c5"))))}))),l.a.createElement(N.a,Object.assign({},t,{count:~~j,refresh:f}))),l.a.createElement(A,Object.assign({theme:e,refreshData:f},a)),l.a.createElement(G,Object.assign({theme:e},d)))};e.default=K},496:function(n,e,t){"use strict";t.d(e,"a",function(){return d}),t.d(e,"b",function(){return m});var a=t(29),r=t.n(a),i=t(18),c=t(44),u=t(20),o=t(0),l=(t(522),t(176)),d=function(n,e){var t=Object(o.useState)(),a=Object(u.a)(t,2),d=a[0],m=a[1],p=Object(o.useState)(),s=Object(u.a)(p,2),b=s[0],f=s[1],v=Object(o.useState)(!1),g=Object(u.a)(v,2),j=g[0],O=g[1];return[Object(o.useCallback)(function(){var t=Object(c.a)(r.a.mark(function t(a){var c,u;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.next=3,l.a.mutate(Object(i.a)({mutation:n,variables:Object(i.a)({},a)},e)).catch(function(n){throw f(n),n}).finally(function(){O(!1)});case 3:return c=t.sent,u=c.data,m(u),t.abrupt("return",u);case 7:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}(),[n,e]),d,j,b]},m=function(n,e){var t,a=Object(o.useState)(),d=Object(u.a)(a,2),m=d[0],p=d[1],s=Object(o.useState)(),b=Object(u.a)(s,2),f=b[0],v=b[1],g=Object(o.useState)(!1),j=Object(u.a)(g,2),O=j[0],h=j[1];return[Object(o.useCallback)(function(){var t=Object(c.a)(r.a.mark(function t(a,c){var u,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.next=3,l.a.query(Object(i.a)({fetchPolicy:"network-only",query:n,variables:Object(i.a)({},a)},e,c)).catch(function(n){throw v(n),n}).finally(function(){h(!1)});case 3:return u=t.sent,o=u.data,p(o),t.abrupt("return",o);case 7:case"end":return t.stop()}},t)}));return function(n,e){return t.apply(this,arguments)}}(),[e,n]),null!==(t=m)&&void 0!==t?t:{},O,f]}},497:function(n,e,t){"use strict";var a=t(0),r=t.n(a),i=t(11),c=t(12),u=t(523);function o(){var n=Object(i.a)(["\n&&& {\n  padding-left: 0;\n  padding-right: 0;\n}\n"]);return o=function(){return n},n}var l={};l.Box=Object(c.a)(u.a)(o()),t.d(e,"a",function(){return d});var d=function(n){return r.a.createElement(l.Box,Object.assign({align:"center"},n))}},500:function(n,e,t){"use strict";t.d(e,"a",function(){return d});var a=t(11),r=t(12),i=t(521);function c(){var n=Object(a.a)(["&&& {\n  display: flex;\n  > button {\n    margin-right: 8px;\n    &:last-of-type {\n      margin-right: 0;\n    }\n  }\n}"]);return c=function(){return n},n}function u(){var n=Object(a.a)(["&&&{\n  display: flex;\n  flex-direction: column;\n  > header {\n    font-size: 20px;\n    font-weight: bold;\n    margin-bottom: 15px;\n  } \n  > section {\n    font-weight: bold;\n    font-size: 14px;\n    margin-bottom: 10px;\n  }\n  > main {\n    display: flex;\n    align-items: center;\n    //display: grid;\n    //grid-template-columns: auto;\n    //grid-row-gap: 10px;\n    //justify-items: start;\n    \n    > div {\n      margin-right: 10px;\n    }\n  }\n}\n"]);return u=function(){return n},n}function o(){var n=Object(a.a)(["\n&&&{\n  margin-top: 20px;\n  border-radius: 5px;\n  border-collapse: initial;\n  overflow: hidden;\n  border: 1px solid rgba(224, 224, 224, 1);\n  > thead {\n    background: ",";\n    > tr > th {\n      color: ",";\n    }\n  }\n}\n"]);return o=function(){return n},n}function l(){var n=Object(a.a)(["\n  margin: 20px;\n  > header {\n    display: grid;\n    grid-column-gap: 10px;\n    grid-template-columns: minmax(200px, auto) repeat(2, 1fr);\n    > section {\n      flex: 1;\n    }\n  }\n"]);return l=function(){return n},n}var d={Box:Object(r.a)("div")(l()),Table:Object(r.a)(i.a)(o(),function(n){return n.theme.palette.grey[800]},function(n){return n.theme.palette.common.white}),HeaderBox:Object(r.a)("section")(u()),ActionTableCell:Object(r.a)("section")(c())}},501:function(n,e,t){"use strict";t.d(e,"b",function(){return o}),t.d(e,"a",function(){return l});var a=t(18),r=t(20),i=t(0),c=t.n(i),u=t(514),o=function(){var n=Object(i.useState)({page:0,rows_per_page:10}),e=Object(r.a)(n,2),t=e[0],c=e[1];return{pageData:t,setPageData:function(n){return c(Object(a.a)({},t,n))}}},l=function(n){var e=n.pageData,t=n.setPageData,a=n.count;return c.a.createElement(u.a,{component:"div",rowsPerPageOptions:[5,10,25],count:a,rowsPerPage:e.rows_per_page||10,page:e.page||0,onChangePage:function(n,e){t({page:e})},onChangeRowsPerPage:function(n){t({rows_per_page:n.target.value})}})}},504:function(n,e,t){"use strict";t.d(e,"a",function(){return l});var a=t(11),r=t(12),i=t(437),c=t(440);function u(){var n=Object(a.a)(["\n&&& {\n  padding: 0 15px;\n}\n"]);return u=function(){return n},n}function o(){var n=Object(a.a)(["\n&&& {\n  > footer {\n    margin: 10px 0;\n  }\n}\n"]);return o=function(){return n},n}var l={};l.Content=Object(r.a)(i.a)(o()),l.TextFieldBox=Object(r.a)(c.a)(u())},506:function(n,e,t){"use strict";t.d(e,"a",function(){return o}),t.d(e,"b",function(){return l});var a=t(11),r=t(171);function i(){var n=Object(a.a)(["\n    mutation ($data: ProductInput) {\n        save_product(ProductInput: $data) {\n            msg\n            flag\n            product {\n                id\n            }\n        }\n    }\n"]);return i=function(){return n},n}function c(){var n=Object(a.a)(["\n    query ($id: String) {\n        category_origin(id: $id) {\n            id number c2_id c2_name c3_id c3_name\n            c2_number c3_number\n        }\n    }\n"]);return c=function(){return n},n}function u(){var n=Object(a.a)(["\n    query ($data: ProductInput) {\n        product_list(ListInput: $data) {\n            id name number is_hot is_new stock price_in is_enable\n            price_market price_out weight unit brand category_id\n            c1_id c1_number c2_id c2_name c3_id c3_name\n            c2_number c3_number is_group group_amount group_precision\n            group_remark\n            imgs { id url number }\n        }\n        product_total(ListInput: $data)\n    }\n  "]);return u=function(){return n},n}var o={getList:Object(r.b)(u())},l=(Object(r.b)(c()),Object(r.b)(i()))}}]);