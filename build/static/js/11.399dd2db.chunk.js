(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{316:function(e,t,n){"use strict";n.r(t);var a=n(13),r=n(14),i=n.n(r),o=n(22),c=n(0),l=n.n(c),u=n(24),d=n(443),s={};s.Box=Object(u.b)("div").withConfig({displayName:"style__Box",componentId:"sc-1ay69up-0"})(["margin:20px;> header{display:grid;grid-column-gap:10px;grid-template-columns:minmax(200px,auto) repeat(2,1fr);> section{flex:1;}}"]),s.Table=Object(u.b)(d.a).withConfig({displayName:"style__Table",componentId:"sc-1ay69up-1"})(["&&&{margin-top:20px;border-radius:5px;border-collapse:initial;overflow:hidden;border:1px solid rgba(224,224,224,1);> thead{background:",";> tr > th{color:",";}}}"],function(e){return e.theme.palette.grey[800]},function(e){return e.theme.palette.common.white}),s.Loading=Object(u.b)("section").withConfig({displayName:"style__Loading",componentId:"sc-1ay69up-2"})(["text-align:center;"]),s.ActionTableCell=Object(u.b)("section").withConfig({displayName:"style__ActionTableCell",componentId:"sc-1ay69up-3"})(["&&&{display:flex;> button{margin-right:8px;&:last-of-type{margin-right:0;}}}"]),s.HeaderBox=Object(u.b)("section").withConfig({displayName:"style__HeaderBox",componentId:"sc-1ay69up-4"})(["&&&{display:flex;flex-direction:column;> header{font-size:20px;font-weight:bold;margin-bottom:15px;}> section{font-weight:bold;font-size:14px;margin-bottom:10px;}> main{display:flex;align-items:center;> div{margin-right:10px;}}}"]),s.ImgPreview=Object(u.b)("section").withConfig({displayName:"style__ImgPreview",componentId:"sc-1ay69up-5"})(["width:180px;display:inline-flex;> img{width:80px;height:60px;}> section{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-left:10px;}"]),s.SearchBox=Object(u.b)("div").withConfig({displayName:"style__SearchBox",componentId:"sc-1ay69up-6"})(["display:grid;grid-template-columns:4fr 3fr 2fr;grid-gap:12px;> span{grid-area:2 / 1 / 2 / 3;justify-self:end;align-self:center;}"]);var p=n(359),m=n(360),f=n(349),b=n(60),g=n(447),v=n(358),_=n(446),h=n(448),x=n(70),y=n(117),w=n(133),O=n(86);function j(){var e=Object(w.a)(["\n    query ($data: ProductSupplementListInput) {\n        product_supplement_list_total(productSupplementListInput: $data)\n        product_supplement_list(productSupplementListInput: $data) {\n            id\n            name\n            amount\n            number\n            user_id\n            state\n            create_time\n            addItemList {\n                id\n                name\n                count\n                amount\n                supplier\n                product {\n                    id\n                    number\n                    is_group\n                    name\n                    stock\n                    price_in\n                    price_out\n                    price_market\n                    weight\n                }\n            }\n        }\n    }\n"]);return j=function(){return e},e}function E(){var e=Object(w.a)(["\n    mutation ($data: ProductInput) {\n        save_product(ProductInput: $data) {\n            msg\n            flag\n            product {\n                id\n            }\n        }\n    }\n"]);return E=function(){return e},e}function C(){var e=Object(w.a)(["\n    query ($id: String) {\n        category_origin(id: $id) {\n            id number c2_id c2_name c3_id c3_name\n            c2_number c3_number\n        }\n    }\n"]);return C=function(){return e},e}function L(){var e=Object(w.a)(["\n      mutation($data: ProductSupplementInput) {\n          save_product_supplement (productSupplementInput: $data) {\n              msg\n              flag\n          }\n      }\n  "]);return L=function(){return e},e}var P={save_product_supplement:Object(O.b)(L())},k=(Object(O.b)(C()),Object(O.b)(E()),Object(O.b)(j())),D=n(42),I=n(362),B=Object(m.c)("AddProductList",{listData:[]},{getList:function(){var e=Object(o.a)(i.a.mark(function e(t,n){var a,r,o,c,l,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.setData,r=n.query,o=n.data,e.next=3,r(k,Object(m.e)(o));case 3:c=e.sent,l=c.product_supplement_list,u=c.product_supplement_list_total,a(Object(x.g)({total:u,listData:l}));case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),getAddProductList:function(){var e=Object(o.a)(i.a.mark(function e(t,n){var a,r,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.query,e.next=3,r(I.a.getList);case 3:if(o=e.sent,null===(c=null===o||void 0===o?void 0:null===(a=o.product_list)||void 0===a?void 0:a.filter(function(e){return e.stock<0}))||void 0===c?void 0:c.length){e.next=8;break}return Object(D.b)({message:"\u6682\u65e0\u9700\u8981\u8865\u8d27\u7684\u5546\u54c1"}),e.abrupt("return");case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}),T=n(58),F=n(367),S=n(45),N=n(182),$=Object(T.b)(Object(F.a)("wait",{id:"",waitList:[],state:1}),"waitListModal",{refreshData:function(){}},{setRefreshCall:function(e,t){return(0,t.setData)(Object(x.g)({refreshData:e}))},addOneProductSupplement:function(){var e=Object(o.a)(i.a.mark(function e(t,n){var r,o,c,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.data,c=n.mutate,e.next=3,c(P.save_product_supplement,{addList:o.modalData.waitList.map(function(e){return Object(a.a)({},Object(S.pick)(e,["addRemark","addNumber","addPrice","addSupplier"]),o.modalData.id?{id:e.id,product_id:e.product_id}:{product_id:e.id})}),id:o.modalData.id,state:null!==(r=t.state)&&void 0!==r?r:1});case 3:return(l=e.sent).save_product_supplement.flag&&(Object(D.b)({message:"\u64cd\u4f5c\u6210\u529f"}),o.refreshData()),e.abrupt("return",l);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),isFinish:function(e,t){return t.data.modalData.state===N.ProductSupplement.Finish}}),q=n(297),A=n(397),H=n(291),M=n(56),R=function(e){var t;return Object(a.a)({},e.product,{addNumber:e.count,addPrice:e.amount,addSupplier:e.supplier,addRemark:e.remark,id:e.id,product_id:null===(t=e.product)||void 0===t?void 0:t.id})},W=function(){var e,t=Object(b.a)(),n=Object(y.a)($),r=n.state,c=n.actions,u=c.setModal,d=r.modalData,s=r.fetchLoad[P.save_product_supplement],m=function(){var e=Object(o.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.addOneProductSupplement(t);case 2:if(!e.sent){e.next=4;break}c.onClose({});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(q.a,{fullWidth:!0,maxWidth:"lg",open:r.open,onClose:function(){return c.onClose({})}},l.a.createElement(H.a,null,"\u8865\u8d27\u5217\u8868"),l.a.createElement(A.a.Content,null,l.a.createElement(p.a.Table,{theme:t},l.a.createElement(_.a,null,l.a.createElement(g.a,null,["\u5546\u54c1\u7f16\u53f7","\u662f\u5426\u62fc\u56e2","\u4e2d\u6587\u540d\u79f0","\u5e93\u5b58","\u8fdb\u8d27\u4ef7\u683c","\u5e02\u573a\u4ef7\u683c","\u552e\u5356\u4ef7\u683c","\u91cd\u91cf"].map(function(e){return l.a.createElement(v.a,{key:"TableHead".concat(e)},e)}),l.a.createElement(v.a,{width:80},"\u8865\u8d27\u6570\u91cf"),l.a.createElement(v.a,{width:80},"\u8865\u8d27\u4ef7\u683c"),l.a.createElement(v.a,{width:100},"\u4f9b\u5e94\u5546"),l.a.createElement(v.a,{width:100},"\u5907\u6ce8"))),l.a.createElement(h.a,null,null===d||void 0===d?void 0:null===(e=d.waitList)||void 0===e?void 0:e.map(function(e,t){var n,r,i,o;return l.a.createElement(g.a,{key:"TableBody".concat(null===e||void 0===e?void 0:e.id)},l.a.createElement(v.a,null,null===e||void 0===e?void 0:e.number),l.a.createElement(v.a,null,(null===e||void 0===e?void 0:e.is_group)?"\u662f":"\u5426"),l.a.createElement(v.a,null,null===e||void 0===e?void 0:e.name),l.a.createElement(v.a,null,null===e||void 0===e?void 0:e.stock),l.a.createElement(v.a,null,null===e||void 0===e?void 0:e.price_in),l.a.createElement(v.a,null,null===e||void 0===e?void 0:e.price_out),l.a.createElement(v.a,null,null===e||void 0===e?void 0:e.price_market),l.a.createElement(v.a,null,null===e||void 0===e?void 0:e.weight),l.a.createElement(v.a,null,l.a.createElement(A.a.TextFieldBox,{label:"",type:"number",disabled:c.isFinish(),value:null!==(n=null===e||void 0===e?void 0:e.addNumber)&&void 0!==n?n:"",onChange:function(e){return u(Object(a.a)({},d,{waitList:d.waitList.map(function(n,r){return r!==t?n:Object(a.a)({},n,{addNumber:parseFloat(e.target.value)})})}))}})),l.a.createElement(v.a,null,l.a.createElement(A.a.TextFieldBox,{disabled:c.isFinish(),label:"",type:"number",value:null!==(r=null===e||void 0===e?void 0:e.addPrice)&&void 0!==r?r:"",onChange:function(e){return u(Object(a.a)({},d,{waitList:d.waitList.map(function(n,r){return r!==t?n:Object(a.a)({},n,{addPrice:parseFloat(e.target.value)})})}))}})),l.a.createElement(v.a,null,l.a.createElement(A.a.TextFieldBox,{disabled:c.isFinish(),label:"",value:null!==(i=null===e||void 0===e?void 0:e.addSupplier)&&void 0!==i?i:"",onChange:function(e){return u(Object(a.a)({},d,{waitList:d.waitList.map(function(n,r){return r!==t?n:Object(a.a)({},n,{addSupplier:e.target.value})})}))}})),l.a.createElement(v.a,null,l.a.createElement(A.a.TextFieldBox,{disabled:c.isFinish(),label:"",value:null!==(o=null===e||void 0===e?void 0:e.addRemark)&&void 0!==o?o:"",onChange:function(e){return u(Object(a.a)({},d,{waitList:d.waitList.map(function(n,r){return r!==t?n:Object(a.a)({},n,{addRemark:e.target.value})})}))}})))}))),l.a.createElement("footer",null,d.id?l.a.createElement(l.a.Fragment,null,l.a.createElement(M.a,{loading:s?1:0,disabled:c.isFinish(),color:"primary",variant:"contained",fullWidth:!0,onClick:function(){return m({})}},"\u66f4\u65b0\u6570\u91cf"),l.a.createElement(M.a,{loading:s?1:0,color:"primary",variant:"contained",fullWidth:!0,onClick:function(){return m({state:c.isFinish()?1:2})}},c.isFinish()?"\u64a4\u9500\u8865\u8d27":"\u786e\u5b9a\u8865\u8d27\u5b8c\u6210")):l.a.createElement(M.a,{loading:s?1:0,color:"primary",variant:"contained",fullWidth:!0,onClick:function(){return m({})}},"\u4fdd\u5b58"))))};n.d(t,"AddProduct",function(){return z});var z=function(){var e=Object(b.a)(),t=Object(y.a)(B),n=t.state,r=t.actions,u=t.getLoad,d=u(k),w=n.listData,O=Object(y.a)($).actions;return Object(c.useEffect)(function(){console.log(r.getList),O.setRefreshCall(r.getList)},[r.getList,O]),Object(c.useEffect)(function(){r.getList({})},[r]),l.a.createElement(p.a.Box,null,l.a.createElement("header",null,l.a.createElement(p.a.HeaderBox,null,l.a.createElement("header",null,"\u8865\u8d27\u5217\u8868"),l.a.createElement("section",null,"\u60a8\u53ef\u4ee5\u8fdb\u884c\u7ba1\u7406"),l.a.createElement("main",null,l.a.createElement(M.a,{variant:"contained",color:"primary",loading:u(I.a.getList),onClick:Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getAddProductList({});case 2:t=e.sent,O.openEditClick({data:{waitList:t}});case 4:case"end":return e.stop()}},e)}))},"\u751f\u6210\u8865\u8d27\u5355")))),l.a.createElement("main",null,d?l.a.createElement(s.Loading,null,l.a.createElement(f.a,null)):l.a.createElement(p.a.Table,{theme:e},l.a.createElement(_.a,null,l.a.createElement(g.a,null,["\u8865\u8d27\u5355\u7f16\u53f7","\u521b\u5efa\u65f6\u95f4","\u8865\u8d27\u5355\u72b6\u6001","\u8ba2\u5355\u8be6\u60c5"].map(function(e){return l.a.createElement(v.a,{key:"TableHead".concat(e)},e)}))),l.a.createElement(h.a,null,null===w||void 0===w?void 0:w.map(function(e){return l.a.createElement(g.a,{key:"TableBody".concat(null===e||void 0===e?void 0:e.id)},l.a.createElement(v.a,null,null===e||void 0===e?void 0:e.number),l.a.createElement(v.a,null,Object(x.e)(new Date(null===e||void 0===e?void 0:e.create_time),"yyyy/MM/dd HH:mm")),l.a.createElement(v.a,null,N.ProductSupplementString[null===e||void 0===e?void 0:e.state]),l.a.createElement(v.a,null,l.a.createElement(p.a.ActionTableCell,null,l.a.createElement(M.a,{color:"secondary",onClick:function(){O.openEditClick({data:Object(a.a)({},e,{waitList:null===e||void 0===e?void 0:e.addItemList.map(R)})}),console.log(e)},variant:"contained"},"\u7f16\u8f91"),l.a.createElement(M.a,{color:"secondary",onClick:function(){e.addItemList.length},variant:"contained"},"\u8be6\u60c5"))))}))),l.a.createElement(m.b,{pageModel:t})),l.a.createElement(W,null))};t.default=z},358:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(24),o=n(444),c={};c.Box=Object(i.b)(o.a).withConfig({displayName:"style__Box",componentId:"sc-3ni4n2-0"})(["&&&{padding-left:0;padding-right:0;}"]),n.d(t,"a",function(){return l});var l=function(e){return r.a.createElement(c.Box,Object.assign({align:"center"},e))}},359:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(24),r=n(443),i={Box:Object(a.b)("div").withConfig({displayName:"tableBox__Box",componentId:"sc-1ufeqc9-0"})(["margin:20px;> header{display:grid;grid-column-gap:10px;grid-template-columns:minmax(200px,auto) repeat(2,1fr);> section{flex:1;}}"]),Table:Object(a.b)(r.a).withConfig({displayName:"tableBox__Table",componentId:"sc-1ufeqc9-1"})(["&&&{margin-top:20px;border-radius:5px;border-collapse:initial;overflow:hidden;border:1px solid rgba(224,224,224,1);> thead{background:",";> tr > th{color:",";}}}"],function(e){return e.theme.palette.grey[800]},function(e){return e.theme.palette.common.white}),HeaderBox:Object(a.b)("section").withConfig({displayName:"tableBox__HeaderBox",componentId:"sc-1ufeqc9-2"})(["&&&{display:flex;flex-direction:column;> header{font-size:20px;font-weight:bold;margin-bottom:15px;}> section{font-weight:bold;font-size:14px;margin-bottom:10px;}> main{display:flex;align-items:center;> div{margin-right:10px;}}}"]),ActionTableCell:Object(a.b)("section").withConfig({displayName:"tableBox__ActionTableCell",componentId:"sc-1ufeqc9-3"})(["&&&{display:flex;> button{margin-right:8px;&:last-of-type{margin-right:0;}}}"])}},360:function(e,t,n){"use strict";n.d(t,"f",function(){return d}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return p}),n.d(t,"c",function(){return m}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return b});var a=n(13),r=n(18),i=n(0),o=n.n(i),c=n(516),l=n(58),u=n(70),d=function(){var e=Object(i.useState)({page:0,rows_per_page:10}),t=Object(r.a)(e,2),n=t[0],o=t[1];return{pageData:n,setPageData:function(e){return o(Object(a.a)({},n,e))}}},s=Object(l.d)("pageModel",{page:0,rows_per_page:10,total:0},{setPageData:function(e,t){(0,t.setData)(Object(u.g)(Object(a.a)({},e)))}}),p=function(e){return{page:e.page,rows_per_page:e.rows_per_page}},m=function(e,t,n){return Object(l.b)(s,e,t,n)},f=function(e){var t=e.pageModel,n=t.state,a=t.actions;return o.a.createElement(c.a,{component:"div",rowsPerPageOptions:[5,10,25],count:n.total,rowsPerPage:n.rows_per_page||10,page:n.page||0,onChangePage:function(e,n){a.setPageData({page:n}),a.getList(t.state)},onChangeRowsPerPage:function(e){a.setPageData({page:0,rows_per_page:e.target.value}),a.getList(t.state)}})},b=function(e){var t=e.pageData,n=e.setPageData,a=e.count;return o.a.createElement(c.a,{component:"div",rowsPerPageOptions:[5,10,25],count:a,rowsPerPage:t.rows_per_page||10,page:t.page||0,onChangePage:function(e,t){n({page:t})},onChangeRowsPerPage:function(e){n({rows_per_page:e.target.value})}})}},362:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u});var a=n(133),r=n(86);function i(){var e=Object(a.a)(["\n    mutation ($data: ProductInput) {\n        save_product(ProductInput: $data) {\n            msg\n            flag\n            product {\n                id\n            }\n        }\n    }\n"]);return i=function(){return e},e}function o(){var e=Object(a.a)(["\n    query ($id: String) {\n        category_origin(id: $id) {\n            id number c2_id c2_name c3_id c3_name\n            c2_number c3_number\n        }\n    }\n"]);return o=function(){return e},e}function c(){var e=Object(a.a)(["\n    query ($data: ProductInput) {\n        product_list(ListInput: $data) {\n            id name number is_hot is_new stock price_in is_enable\n            price_market price_out weight unit brand category_id\n            c1_id c1_number c2_id c2_name c3_id c3_name\n            c2_number c3_number is_group group_amount group_precision\n            group_remark\n            imgs { id url number }\n        }\n        product_total(ListInput: $data)\n    }\n  "]);return c=function(){return e},e}var l={getList:Object(r.b)(c())},u=(Object(r.b)(o()),Object(r.b)(i()))},367:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(70),r=n(58),i=function(e,t){return Object(r.d)("".concat(e,"_modalModelFactory"),{modalData:t,open:!1,isEdit:-1},{openClick:function(e,t){return(0,t.setData)(function(t){return Object(a.f)(t,{open:!0,modalData:e,isEdit:-1})})},openEditClick:function(e,t){return(0,t.setData)(function(t){return Object(a.f)(t,{open:!0,modalData:e.data,isEdit:e.index})})},onClose:function(e,t){return(0,t.setData)(function(e){return Object(a.f)(Object(a.i)(e,"modalData",{}),{modalData:{},open:!1})})},setModal:function(e,t){return(0,t.setData)(function(t){return Object(a.f)(t,{modalData:e})})}})}},397:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(24),r=n(292),i=n(347),o={};o.Content=Object(a.b)(r.a).withConfig({displayName:"style__Content",componentId:"icrqdu-0"})(["&&&{> footer{margin:10px 0;display:flex;> button:not(:first-of-type){margin-left:10px;}}}"]),o.TextFieldBox=Object(a.b)(i.a).withConfig({displayName:"style__TextFieldBox",componentId:"icrqdu-1"})(["&&&{padding:0 15px;}"])}}]);