(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{315:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n.n(a),o=n(22),l=n(13),c=n(18),i=n(0),u=n.n(i),d=n(356),m=n(447),p=n(349),s=n(446),v=n(448),b=n(417),f=n(360),g=n(418),y=n(133),O=n(58),_=n(367),h=n(86),j=n(70);function E(){var e=Object(y.a)(["\n    query($data: AddHistoryInput){\n        add_history_list_total(addHistoryInput: $data)\n        add_history_list_by_product(addHistoryInput: $data) {\n            id\n            name\n            create_time\n            update_time\n            is_delete\n            supplement_id\n            number\n            supplier\n            product_id\n            count\n            amount\n        }\n    }\n"]);return E=function(){return e},e}var w=Object(h.b)(E()),x=Object(O.b)(Object(O.c)(Object(_.a)("modal",{list:[],id:""}),f.d),"addProductHistoryModel",{historyList:[]},{getList:function(){var e=Object(o.a)(r.a.mark(function e(t,n){var a,o,l,c,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.setData,o=n.query,e.next=3,o(w,{product_id:t.modalData.id,rows_per_page:t.rows_per_page,page:t.page});case 3:l=e.sent,c=l.add_history_list_by_product,i=l.add_history_list_total,a(function(e){return Object(j.i)(Object(j.i)(e,"total",i),"historyList",c)});case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}),C=n(297),k=n(291),T=n(292),I=n(443),B=n(358),N=n(117),D=function(){var e=Object(N.a)(x),t=e.state,n=t.open,a=t.modalData,r=t.historyList,o=e.actions,l=o.getList;return Object(i.useEffect)(function(){n&&l({page:x.state.page,rows_per_page:x.state.rows_per_page,modalData:{id:null===a||void 0===a?void 0:a.id}})},[l,a.id,n]),u.a.createElement(C.a,{open:n,onClose:function(){return o.onClose({})},maxWidth:"lg",fullWidth:!0},u.a.createElement(k.a,null,"\u8865\u8d27\u5386\u53f2"),u.a.createElement(T.a,null,u.a.createElement(I.a,null,u.a.createElement(s.a,null,u.a.createElement(m.a,null,["\u8865\u8d27\u65e5\u671f","\u8865\u8d27\u5355\u53f7","\u8865\u8d27\u6570\u91cf","\u8865\u8d27\u5355\u4ef7"].map(function(e){return u.a.createElement(B.a,{key:"TableHead".concat(e)},e)}))),u.a.createElement(v.a,null,r.map(function(e){return u.a.createElement(m.a,{key:"historyList".concat(e.id)},u.a.createElement(B.a,null,Object(j.e)(new Date(e.create_time),"yyyy/MM/dd HH:mm")),u.a.createElement(B.a,null,e.number),u.a.createElement(B.a,null,e.count),u.a.createElement(B.a,null,e.amount))}))),u.a.createElement(f.b,{pageModel:e})))},L={ajax:function(e){return function(t,n){var a=Object(i.useState)({}),u=Object(c.a)(a,2),d=u[0],m=u[1],p=Object(i.useState)(),s=Object(c.a)(p,2),v=s[0],b=s[1],f=Object(i.useState)(!1),g=Object(c.a)(f,2),y=g[0],O=g[1];return[Object(i.useCallback)(function(){var a=Object(o.a)(r.a.mark(function a(o){var c,i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=Object(l.a)({},n,o),a.next=3,axios[e](t,c,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).catch(function(e){return b(e),e}).finally(function(){O(!1)});case 3:return i=a.sent,m((null===i||void 0===i?void 0:i.data)||{}),a.abrupt("return",(null===i||void 0===i?void 0:i.data)||{});case 6:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),[n,t]),d,y,v]}}};L.post=L.ajax("post"),L.get=L.ajax("get");var q=n(56),H=n(136),S=n(157),F=n(517),P=n(489),U=n(515),$=n(24),G={};G.Box=Object($.b)(C.a).withConfig({displayName:"style__Box",componentId:"sc-1iqm0j9-0"})([""]),G.Img=Object($.b)("section").withConfig({displayName:"style__Img",componentId:"sc-1iqm0j9-1"})(["> img{max-width:80vw;max-height:60vh;}"]);n(490);var M=n(491),A=n(379),W=G.Box,J=G.Img,z=function(e){var t=e.open,n=e.closeModal,a=e.data,r=void 0===a?[]:a;return u.a.createElement(W,{open:t,onClose:n},u.a.createElement(M.Carousel,null,null===r||void 0===r?void 0:r.map(function(e){return u.a.createElement(J,{key:"Carousel".concat(null===e||void 0===e?void 0:e.id)},u.a.createElement("img",{alt:"",src:Object(A.a)(null===e||void 0===e?void 0:e.url)}))})))},K=n(511),Q=n(512),R={};R.Box=Object($.b)("div").withConfig({displayName:"style__Box",componentId:"nyxq6l-0"})(["margin:20px;> header{display:grid;grid-column-gap:10px;grid-template-columns:minmax(200px,auto) repeat(2,1fr);> section{flex:1;}}"]),R.Table=Object($.b)(I.a).withConfig({displayName:"style__Table",componentId:"nyxq6l-1"})(["&&&{margin-top:20px;border-radius:5px;border-collapse:initial;overflow:hidden;border:1px solid rgba(224,224,224,1);> thead{background:",";> tr > th{color:",";}}}"],function(e){return e.theme.palette.grey[800]},function(e){return e.theme.palette.common.white}),R.Loading=Object($.b)("section").withConfig({displayName:"style__Loading",componentId:"nyxq6l-2"})(["text-align:center;"]),R.ActionTableCell=Object($.b)("section").withConfig({displayName:"style__ActionTableCell",componentId:"nyxq6l-3"})(["&&&{display:flex;> button{margin-right:8px;&:last-of-type{margin-right:0;}}}"]),R.HeaderBox=Object($.b)("section").withConfig({displayName:"style__HeaderBox",componentId:"nyxq6l-4"})(["&&&{display:flex;flex-direction:column;> header{font-size:20px;font-weight:bold;margin-bottom:15px;}> section{font-weight:bold;font-size:14px;margin-bottom:10px;}> main{display:flex;align-items:center;> div{margin-right:10px;}}}"]),R.ImgPreview=Object($.b)("section").withConfig({displayName:"style__ImgPreview",componentId:"nyxq6l-5"})(["width:180px;display:inline-flex;> img{width:80px;height:60px;}> section{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-left:10px;}"]),R.SearchBox=Object($.b)("div").withConfig({displayName:"style__SearchBox",componentId:"nyxq6l-6"})(["display:grid;grid-template-columns:4fr 3fr 2fr;grid-gap:12px;> span{grid-area:2 / 1 / 2 / 3;justify-self:end;align-self:center;}"]);var V=n(510),X=n(305),Y=n(116),Z=n(362);n.d(t,"Product",function(){return ne});var ee="1",te="2",ne=function(e){var t,n,a,i,y=e.theme,O=e.match,_=Object(N.a)(x).actions.openEditClick,h=null!==(t=~~(null===O||void 0===O?void 0:null===(n=O.params)||void 0===n?void 0:n.is_group))&&void 0!==t?t:-1,E=Object(f.f)(),w=Object(g.b)(),C=w.editClick,k=function(){var e=u.a.useState({typeOne:"",typeTwo:"",typeThree:""}),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(Y.e)(X.categoryGraphql.getCategoryList),o=Object(c.a)(r,2),i=o[0],d=o[1].category_list,m=Object(Y.e)(X.categoryGraphql.getCategoryList),p=Object(c.a)(m,2),s=p[0],v=p[1].category_list,b=Object(Y.e)(X.categoryGraphql.getCategoryList),f=Object(c.a)(b,2),g=f[0],y=f[1].category_list;return u.a.useEffect(function(){i({parent_id:""})},[i]),u.a.useEffect(function(){n.typeOne?s({parent_id:n.typeOne}):a(function(e){return Object(l.a)({},e,{typeTwo:"",res:""})})},[s,n.typeOne]),u.a.useEffect(function(){a(function(e){var t;return Object(l.a)({},e,(null===v||void 0===v?void 0:v.length)?{}:{res:e.typeOne},{typeTwo:(null===v||void 0===v?void 0:null===(t=v[0])||void 0===t?void 0:t.id)||""})})},[v]),u.a.useEffect(function(){n.typeTwo?g({parent_id:n.typeTwo}):a(function(e){return Object(l.a)({},e,{typeThree:"",res:e.typeOne})})},[g,n.typeTwo]),u.a.useEffect(function(){a(function(e){var t;return Object(l.a)({},e,(null===y||void 0===y?void 0:y.length)?{}:{res:e.typeTwo},{typeThree:(null===y||void 0===y?void 0:null===(t=y[0])||void 0===t?void 0:t.id)||""})})},[y]),u.a.useEffect(function(){a(function(e){return Object(l.a)({},e,{res:n.typeThree||e.typeTwo||e.typeOne})})},[n.typeThree]),{typeHelpObj:n,setTypeHelpObj:a,typeOptionOne:d,typeOptionTwo:v,typeOptionThree:y}}(),T=k.typeHelpObj,I=k.setTypeHelpObj,$=k.typeOptionOne,G=k.typeOptionTwo,M=k.typeOptionThree,W=u.a.useState({type:ee,value:""}),J=Object(c.a)(W,2),ne=J[0],ae=J[1],re=u.a.useState({sort_type:""}),oe=Object(c.a)(re,2),le=oe[0],ce=oe[1],ie=u.a.useState({open:!1,data:[]}),ue=Object(c.a)(ie,2),de=ue[0],me=ue[1],pe=Object(Y.e)(Z.a.getList),se=Object(c.a)(pe,3),ve=se[0],be=se[1],fe=be.product_list,ge=be.product_total,ye=se[2],Oe=(null===fe||void 0===fe?void 0:fe.length)?fe:[],_e=Object(Y.c)(Z.b),he=Object(c.a)(_e,1)[0],je=L.post("/Products/ExportCommodity"),Ee=Object(c.a)(je,1)[0],we=L.post("/Products/ImportCommodity"),xe=Object(c.a)(we,1)[0],Ce=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ve({data:Object(l.a)({},le,E.pageData,{origin_category_id:(null===le||void 0===le?void 0:le.category_id)?null===le||void 0===le?void 0:le.category_id:null},n,{category_id:null,is_group:null!==(e=~~(null===O||void 0===O?void 0:null===(t=O.params)||void 0===t?void 0:t.is_group))&&void 0!==e?e:-1})})};return u.a.useEffect(function(){ve({data:Object(l.a)({},le,{origin_category_id:(null===le||void 0===le?void 0:le.category_id)?null===le||void 0===le?void 0:le.category_id:null,category_id:null},E.pageData,{is_group:h})})},[ve,le,E.pageData,h]),u.a.useEffect(function(){ce(function(e){return Object(l.a)({},e,{category_id:T.res||""})})},[T.res]),u.a.createElement(R.Box,null,u.a.createElement("header",null,u.a.createElement(R.HeaderBox,null,u.a.createElement("header",null,"\u4ea7\u54c1\u5217\u8868"),u.a.createElement("section",null,"\u60a8\u53ef\u4ee5\u8fdb\u884c\u7ba1\u7406"),u.a.createElement("main",null,u.a.createElement(q.a,{variant:"contained",color:"primary",onClick:C({})},"\u65b0\u589e"),u.a.createElement(q.a,{variant:"contained",color:"default",onClick:Object(o.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe();case 2:(null===(t=e.sent)||void 0===t?void 0:t.msg)&&Object(H.b)({oneButton:!0,message:"".concat(t.msg),callBack:function(){var e=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});case 4:case"end":return e.stop()}},e)}))},"\u5bfc\u5165"),u.a.createElement(q.a,{variant:"contained",color:"default",onClick:Object(o.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:(null===(t=e.sent)||void 0===t?void 0:t.msg)&&Object(H.b)({oneButton:!0,message:"".concat(t.msg),callBack:function(){var e=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});case 4:case"end":return e.stop()}},e)}))},"\u5bfc\u51fa"))),u.a.createElement(R.HeaderBox,null,u.a.createElement("header",null,"\u540d\u79f0\u641c\u7d22"),u.a.createElement("main",null,u.a.createElement(S.a,{value:ne.value,onChange:function(e){var t;return ae(Object(l.a)({},ne,{value:null===e||void 0===e?void 0:null===(t=e.target)||void 0===t?void 0:t.value}))},style_type:"light"}),u.a.createElement(F.a,{row:!0,value:ne.type,onChange:function(e){return ae(function(t){var n;return Object(l.a)({},t,{type:null===e||void 0===e?void 0:null===(n=e.target)||void 0===n?void 0:n.value,value:""})})}},u.a.createElement(P.a,{value:ee,control:u.a.createElement(U.a,null),label:"\u7f16\u53f7"}),u.a.createElement(P.a,{value:te,control:u.a.createElement(U.a,null),label:"\u540d\u79f0"})),u.a.createElement(q.a,{onClick:function(){return ce(Object(l.a)({},le,{name:ne.type===te?ne.value:null,number:ne.type===ee?parseInt(ne.value):null}))},variant:"contained",color:"secondary"},"\u641c\u7d22"))),u.a.createElement(R.HeaderBox,null,u.a.createElement("header",null,"\u7c7b\u522b\u7b5b\u9009"),u.a.createElement(R.SearchBox,null,u.a.createElement(b.a,{value:T.typeOne,onChange:function(e){I(Object(l.a)({},T,{typeOne:e.target.value}))},clear:1,placeholder:"\u5168\u90e8"},null===$||void 0===$?void 0:$.map(function(e){return u.a.createElement(d.a,{key:"typeOptionOne".concat(e.id),value:e.id},e.name)})),u.a.createElement(b.a,{value:T.typeTwo,onChange:function(e){I(Object(l.a)({},T,{typeTwo:e.target.value}))},clear:1,placeholder:"\u5168\u90e8"},null===G||void 0===G?void 0:G.map(function(e){return u.a.createElement(d.a,{key:"typeOptionTwo".concat(e.id),value:e.id},e.name)})),u.a.createElement(b.a,{onChange:function(e){I(Object(l.a)({},T,{typeThree:e.target.value}))},value:T.typeThree,clear:1,placeholder:"\u5168\u90e8"},null===M||void 0===M?void 0:M.map(function(e){return u.a.createElement(d.a,{key:"typeOptionThree".concat(e.id),value:e.id},e.name)})),u.a.createElement("span",null,"\u7c7b\u522b\u6392\u5e8f"),u.a.createElement(b.a,{placeholder:"\u9009\u62e9\u6392\u5e8f",value:le.sort_type,onChange:function(e){ce(Object(l.a)({},le,{sort_type:e.target.value}))}},[["create_time desc","\u6309\u4ea7\u54c1\u521b\u5efa/\u4fee\u6539\u65f6\u95f4"],["number asc","\u5546\u54c1\u7f16\u53f7"],["stock asc","\u5e93\u5b58\u5012\u5e8f"]].map(function(e){return u.a.createElement(d.a,{key:"sort_type".concat(e[0]),value:e[0]},e[1])}))))),u.a.createElement("main",null,ye?u.a.createElement(R.Loading,null,u.a.createElement(p.a,null)):u.a.createElement(R.Table,{theme:y},u.a.createElement(s.a,null,u.a.createElement(m.a,null,["\u5546\u54c1\u7f16\u53f7","\u4e2d\u6587\u540d\u79f0","\u56fe\u7247","\u70ed\u95e8","\u65b0\u54c1","\u5e93\u5b58","\u8fdb\u8d27\u4ef7\u683c","\u5e02\u573a\u4ef7\u683c","\u552e\u5356\u4ef7\u683c","\u91cd\u91cf","\u5355\u4f4d"].map(function(e){return u.a.createElement(B.a,{key:"TableHead".concat(e)},e)}),u.a.createElement(B.a,{width:240},"\u64cd\u4f5css"))),u.a.createElement(v.a,null,null===Oe||void 0===Oe?void 0:Oe.map(function(e){var t,n,a,l,c,i,d;return u.a.createElement(m.a,{key:"TableBody".concat(null===e||void 0===e?void 0:e.id)},u.a.createElement(B.a,null,(l=null===e||void 0===e?void 0:e.c3_number,c=null===e||void 0===e?void 0:e.c2_number,i=null===e||void 0===e?void 0:e.c1_number,d=null===e||void 0===e?void 0:e.number,"".concat(Object(j.b)(2)(l)).concat(Object(j.b)(2)(c)).concat(Object(j.b)(2)(i)).concat(Object(j.b)(3)(d)))),u.a.createElement(B.a,null,null===e||void 0===e?void 0:e.name),u.a.createElement(B.a,{width:240},u.a.createElement(R.ImgPreview,null,u.a.createElement("img",{src:Object(A.a)(null===e||void 0===e?void 0:null===(t=e.imgs)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.url),alt:""}),u.a.createElement("section",null,u.a.createElement("div",null,null===e||void 0===e?void 0:null===(a=e.imgs)||void 0===a?void 0:a.length,"/7"),u.a.createElement(V.a,{component:"button",color:"secondary",onClick:function(){var t,n;(null===e||void 0===e?void 0:null===(t=e.imgs)||void 0===t?void 0:t.length)&&me({open:!0,data:null!==(n=null===e||void 0===e?void 0:e.imgs)&&void 0!==n?n:[]})}},"\u9884\u89c8")))),u.a.createElement(B.a,null,1===(null===e||void 0===e?void 0:e.is_hot)?u.a.createElement(K.a,null):u.a.createElement(Q.a,null)),u.a.createElement(B.a,null,1===(null===e||void 0===e?void 0:e.is_new)?u.a.createElement(K.a,null):u.a.createElement(Q.a,null)),u.a.createElement(B.a,null,null===e||void 0===e?void 0:e.stock),u.a.createElement(B.a,null,null===e||void 0===e?void 0:e.price_in),u.a.createElement(B.a,null,null===e||void 0===e?void 0:e.price_out),u.a.createElement(B.a,null,null===e||void 0===e?void 0:e.price_market),u.a.createElement(B.a,null,null===e||void 0===e?void 0:e.weight),u.a.createElement(B.a,null,null===e||void 0===e?void 0:e.unit),u.a.createElement(B.a,null,u.a.createElement(R.ActionTableCell,null,u.a.createElement(q.a,{color:"secondary",onClick:C(e),variant:"contained"},"\u7f16\u8f91"),u.a.createElement(q.a,{color:"secondary",onClick:function(){return _({data:e})},variant:"contained"},"\u8865\u8d27\u5386\u53f2"),u.a.createElement(q.a,{color:(null===e||void 0===e?void 0:e.is_enable)?"primary":"default",variant:"contained",onClick:function(){Object(H.b)({message:"\u786e\u5b9a".concat((null===e||void 0===e?void 0:e.is_enable)?"\u505c\u7528":"\u542f\u7528","\u8be5\u5546\u54c1\u5417"),callBack:function(){var t=Object(o.a)(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,he({data:{id:null===e||void 0===e?void 0:e.id,is_enable:(null===e||void 0===e?void 0:e.is_enable)?0:1}});case 4:Ce();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()})}},(null===e||void 0===e?void 0:e.is_enable)?"\u505c\u7528":"\u542f\u7528"))))}))),u.a.createElement(f.a,Object.assign({},E,{count:~~ge}))),u.a.createElement(g.a,Object.assign({},w,{refreshData:Ce})),u.a.createElement(D,null),u.a.createElement(z,{open:null!==(a=de.open)&&void 0!==a&&a,closeModal:function(){return me({open:!1,data:[]})},data:null!==(i=de.data)&&void 0!==i?i:[]}))};t.default=ne},362:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return u});var a=n(133),r=n(86);function o(){var e=Object(a.a)(["\n    mutation ($data: ProductInput) {\n        save_product(ProductInput: $data) {\n            msg\n            flag\n            product {\n                id\n            }\n        }\n    }\n"]);return o=function(){return e},e}function l(){var e=Object(a.a)(["\n    query ($id: String) {\n        category_origin(id: $id) {\n            id number c2_id c2_name c3_id c3_name\n            c2_number c3_number\n        }\n    }\n"]);return l=function(){return e},e}function c(){var e=Object(a.a)(["\n    query ($data: ProductInput) {\n        product_list(ListInput: $data) {\n            id name number is_hot is_new stock price_in is_enable\n            price_market price_out weight unit brand category_id\n            c1_id c1_number c2_id c2_name c3_id c3_name\n            c2_number c3_number is_group group_amount group_precision\n            group_remark\n            imgs { id url number }\n        }\n        product_total(ListInput: $data)\n    }\n  "]);return c=function(){return e},e}var i={getList:Object(r.b)(c())},u=(Object(r.b)(l()),Object(r.b)(o()))},367:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(70),r=n(58),o=function(e,t){return Object(r.d)("".concat(e,"_modalModelFactory"),{modalData:t,open:!1,isEdit:-1},{openClick:function(e,t){return(0,t.setData)(function(t){return Object(a.f)(t,{open:!0,modalData:e,isEdit:-1})})},openEditClick:function(e,t){return(0,t.setData)(function(t){return Object(a.f)(t,{open:!0,modalData:e.data,isEdit:e.index})})},onClose:function(e,t){return(0,t.setData)(function(e){return Object(a.f)(Object(a.i)(e,"modalData",{}),{modalData:{},open:!1})})},setModal:function(e,t){return(0,t.setData)(function(t){return Object(a.f)(t,{modalData:e})})}})}},418:function(e,t,n){"use strict";var a=n(48),r=n(63),o=n(14),l=n.n(o),c=n(22),i=n(13),u=n(18),d=n(0),m=n.n(d),p=n(24),s=n(297),v=n(292),b=n(357),f={};f.Box=Object(p.b)(s.a).withConfig({displayName:"style__Box",componentId:"c6bdki-0"})([""]),f.Content=Object(p.b)(v.a).withConfig({displayName:"style__Content",componentId:"c6bdki-1"})(["&&&{width:960px;> form{display:grid;grid-auto-flow:column;grid-template-rows:repeat(11,minmax(48px,auto));grid-template-columns:1fr 1fr;grid-column-gap:20px;margin-bottom:20px;> button{grid-area:12 / 1 / 13 / 3;}}}"]),f.FieldTwoBox=Object(p.b)("section").withConfig({displayName:"style__FieldTwoBox",componentId:"c6bdki-2"})(["&{display:grid;grid-template-columns:1fr 1fr;grid-column-gap:25px;}"]),f.UploadBox=Object(p.b)("main").withConfig({displayName:"style__UploadBox",componentId:"c6bdki-3"})(["&{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr) 40px;grid-gap:8px;> span{grid-area:4 / 1 / 5 / 4;}}"]),f.UploadFormControl=Object(p.b)(b.a.TextFieldBox).withConfig({displayName:"style__UploadFormControl",componentId:"c6bdki-4"})(["grid-area:6 / 2 / 12 / 3;"]);var g=n(291),y=n(363),O=n(393),_=n(356),h=n(56),j=n(42),E=n(286),w=n(287),x=n(496),C=n(489),k=n(371),T=n(70),I=n(305),B=n(116),N=n(362),D=n(45),L=n(54);n.d(t,"c",function(){return q}),n.d(t,"b",function(){return S}),n.d(t,"a",function(){return F});var q=function(){var e=Object(d.useState)({oneCode:"",twoCode:"",threeCode:""}),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(B.e)(I.categoryGraphql.getCategoryList),o=Object(u.a)(r,2),l=o[0],c=o[1].category_list,p=void 0===c?[]:c,s=Object(B.e)(I.categoryGraphql.getCategoryList),v=Object(u.a)(s,2),b=v[0],f=v[1].category_list,g=void 0===f?[]:f,y=Object(B.e)(I.categoryGraphql.getCategoryList),O=Object(u.a)(y,2),_=O[0],h=O[1].category_list,j=void 0===h?[]:h;return m.a.useEffect(function(){n.oneCode&&b({parent_id:n.oneCode})},[n.oneCode,b]),m.a.useEffect(function(){n.twoCode&&_({parent_id:n.twoCode})},[n.twoCode,_]),[Object(i.a)({},n,{one:p,two:g,three:j}),a,{getOne:l,getTwo:b,getThree:_}]},H=function(e){return e},S=function(){var e=q(),t=Object(u.a)(e,3),n=t[0],a=t[1],r=t[2],o=r.getOne,m=r.getTwo,p=r.getThree,s=Object(d.useState)(!1),v=Object(u.a)(s,2),b=v[0],f=v[1],g=Object(d.useState)({}),y=Object(u.a)(g,2),O=y[0],_=y[1];return Object(i.a)({},n,{setLinkData:a,editClick:function(e){return Object(c.a)(l.a.mark(function t(){var n,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.next=3,o({parent_id:""});case 3:if(n=H(e),!e.category_id){t.next=13;break}return t.next=7,m({parent_id:e.c3_id});case 7:return t.next=9,p({parent_id:e.c2_id});case 9:_(Object(i.a)({},n,{num:"".concat(e.c3_number,"-").concat(e.c2_number,"-").concat(e.c1_number,"-").concat(null!==(r=e.number)&&void 0!==r?r:"")})),a({oneCode:e.c3_id,twoCode:e.c2_id,threeCode:e.c1_id}),t.next=14;break;case 13:_(n);case 14:case"end":return t.stop()}},t)}))},open:b,setOpen:f,editData:O,setEditData:_})},F=function(e){var t,n,o,p=e.oneCode,s=e.twoCode,v=e.one,I=e.two,q=e.threeCode,H=e.three,S=e.setLinkData,F=e.open,P=e.setOpen,U=e.editData,$=e.setEditData,G=e.refreshData,M=void 0===G?function(){}:G,A=Object(L.g)(),W=null!==(t=~~(null===A||void 0===A?void 0:A.is_group))&&void 0!==t?t:-1,J=Object(B.c)(N.b),z=Object(u.a)(J,3),K=z[0],Q=z[2],R=Object(d.useState)({oneNum:"",twoNum:"",threeNum:""}),V=Object(u.a)(R,2),X=V[0],Y=V[1],Z=function(){S({oneCode:"",twoCode:"",threeCode:""}),re({}),P(!1),$({})},ee=function(){var e=Object(c.a)(l.a.mark(function e(){var t,n,a,r,o,c,u,d;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Object.keys(ae)).length){e.next=6;break}return e.next=4,Object(T.d)({},t.map(function(e){return ae[e]}),"/api/fileUpload");case 4:c=e.sent,n=null!==(a=null===c||void 0===c?void 0:null===(r=c.data)||void 0===r?void 0:null===(o=r.files)||void 0===o?void 0:o.map(function(e,n){return{number:~~t[n],url:null===e||void 0===e?void 0:e.url,name:null===e||void 0===e?void 0:e.originalName}}))&&void 0!==a?a:[];case 6:return e.next=8,K({data:Object(i.a)({},Object(D.pick)(U,["id","name","remark","is_hot","is_new","stock","unit","weight","price_in","price_out","price_market","brand","is_group","group_amount","group_precision","group_remark"]),{category_id:q,imgs:n})});case 8:u=e.sent,(d=u.save_product).flag&&(Object(j.b)({message:(null===d||void 0===d?void 0:d.msg)||"\u64cd\u4f5c\u6210\u529f"}),Z(),M());case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();m.a.useEffect(function(){var e,t,n;Y({oneNum:null!==(e=U.c3_number)&&void 0!==e?e:"",twoNum:null!==(t=U.c2_number)&&void 0!==t?t:"",threeNum:null!==(n=U.c1_number)&&void 0!==n?n:""})},[U.c1_number,U.c2_number,U.c3_number]),m.a.useEffect(function(){(X.oneNum||X.twoNum||X.threeNum)&&$(function(e){var t;return Object(i.a)({},e,{num:"".concat(X.oneNum,"-").concat(X.twoNum,"-").concat(X.threeNum,"-").concat(null!==(t=U.number)&&void 0!==t?t:"")||""})})},[U.number,$,X]);var te=Object(d.useState)({}),ne=Object(u.a)(te,2),ae=ne[0],re=ne[1];return m.a.createElement(f.Box,{open:F,onClose:Z,maxWidth:!1},m.a.createElement(g.a,null,"\u65b0\u589e\u4ea7\u54c1"),m.a.createElement(f.Content,null,m.a.createElement("form",null,m.a.createElement(y.a,{InputProps:{readOnly:!0},label:"\u4ea7\u54c1\u7f16\u53f7",value:U.num}),m.a.createElement(O.a,{label:"",placeholder:"\u9009\u62e9\u7c7b\u522b",value:p,onChange:function(e,t){S(function(t){return Object(i.a)({},t,{oneCode:e.target.value,twoCode:"",threeCode:""})}),Y(function(e){return Object(i.a)({},e,{oneNum:t.props.num})})}},null===v||void 0===v?void 0:v.map(function(e){return m.a.createElement(_.a,{key:"typeOptionOne".concat(e.id),value:null===e||void 0===e?void 0:e.id,num:null===e||void 0===e?void 0:e.number},e.name)})),m.a.createElement(O.a,{label:"",placeholder:"\u9009\u62e9\u7c7b\u522b",value:s,onChange:function(e,t){S(function(t){return Object(i.a)({},t,{twoCode:e.target.value,threeCode:""})}),Y(function(e){return Object(i.a)({},e,{twoNum:t.props.num})})}},null===I||void 0===I?void 0:I.map(function(e){return m.a.createElement(_.a,{key:"typeOptionOne".concat(e.id),value:e.id,num:null===e||void 0===e?void 0:e.number},e.name)})),m.a.createElement(O.a,{label:"",placeholder:"\u9009\u62e9\u7c7b\u522b",value:q,onChange:function(e,t){S(function(t){return Object(i.a)({},t,{threeCode:e.target.value})}),Y(function(e){return Object(i.a)({},e,{threeNum:t.props.num})})}},null===H||void 0===H?void 0:H.map(function(e){return m.a.createElement(_.a,{key:"typeOptionOne".concat(e.id),value:e.id,num:null===e||void 0===e?void 0:e.number},e.name)})),m.a.createElement(y.a,{label:"\u4e2d\u6587\u540d\u79f0",value:U.name,onChange:function(e){return $(Object(i.a)({},U,{name:e.target.value}))}}),m.a.createElement(b.a.TextFieldBox,{as:E.a},m.a.createElement(w.a,{shrink:!0,htmlFor:"tag"},"\u4e0a\u67b6\u7c7b\u578b"),m.a.createElement(C.a,{control:m.a.createElement(x.a,{checked:!!U.is_new||!1,onChange:function(e){return $(Object(i.a)({},U,{is_new:e.target.checked?1:0}))}}),label:"\u65b0\u54c1"}),m.a.createElement(C.a,{control:m.a.createElement(x.a,{checked:null!==(n=!!U.is_hot)&&void 0!==n&&n,onChange:function(e){return $(Object(i.a)({},U,{is_hot:e.target.checked?1:0}))}}),label:"\u70ed\u95e8"})),m.a.createElement(y.a,{label:"\u5e93\u5b58",type:"number",value:U.stock,onChange:function(e){return $(Object(i.a)({},U,{stock:Object(T.k)(e.target.value)}))}}),m.a.createElement(y.a,{label:"\u8fdb\u8d27\u4ef7\u683c",type:"number",value:U.price_in,onChange:function(e){return $(Object(i.a)({},U,{price_in:Object(T.k)(e.target.value)}))}}),m.a.createElement(y.a,{label:"\u54c1\u724c\u540d\u79f0",value:U.brand,onChange:function(e){return $(Object(i.a)({},U,{brand:e.target.value}))}}),m.a.createElement(y.a,{label:"\u5e02\u573a\u4ef7\u683c",type:"number",value:U.price_market,onChange:function(e){return $(Object(i.a)({},U,{price_market:Object(T.k)(e.target.value)}))}}),m.a.createElement(y.a,{label:"\u552e\u5356\u4ef7\u683c",type:"number",value:U.price_out,onChange:function(e){return $(Object(i.a)({},U,{price_out:Object(T.k)(e.target.value)}))}}),m.a.createElement(f.FieldTwoBox,null,m.a.createElement(y.a,{label:"\u91cd\u91cf",type:"number",value:U.weight,onChange:function(e){return $(Object(i.a)({},U,{weight:Object(T.k)(e.target.value)}))}}),m.a.createElement(O.a,{label:"\u5355\u4f4d",value:U.unit,onChange:function(e){return $(Object(i.a)({},U,{unit:e.target.value}))}},null===(o=[["g","\u514b/g"]])||void 0===o?void 0:o.map(function(e){return m.a.createElement(_.a,{key:"unit".concat(e[0]),value:e[0]},e[1])}))),1===W?m.a.createElement(m.a.Fragment,null,m.a.createElement(y.a,{label:"\u62fc\u56e2\u6570\u91cf",type:"number",value:U.group_amount,onChange:function(e){return $(Object(i.a)({},U,{group_amount:Object(T.k)(e.target.value)}))}}),m.a.createElement(y.a,{label:"\u62fc\u56e2\u7cbe\u5ea6",type:"number",value:U.group_precision,onChange:function(e){return $(Object(i.a)({},U,{group_precision:Object(T.k)(e.target.value)}))}}),m.a.createElement(y.a,{label:"\u62fc\u56e2\u63cf\u8ff0",value:U.group_remark,placeholder:"\u6574\u7bb1",onChange:function(e){return $(Object(i.a)({},U,{group_remark:e.target.value}))}})):"",m.a.createElement(f.UploadFormControl,{as:E.a},m.a.createElement(w.a,{shrink:!0,htmlFor:"imgUpload"},"\u4e0a\u4f20\u56fe\u7247"),m.a.createElement(f.UploadBox,null,Object(a.a)(Array(7).keys()).map(function(e){var t,n,a,o;return m.a.createElement(k.a,{key:"ImgUpload".concat(e),initSrc:null!==(t=(null===U||void 0===U?void 0:U.imgs)&&(null===U||void 0===U?void 0:null===(n=U.imgs)||void 0===n?void 0:null===(a=n.find(function(t){return t.number===~~e}))||void 0===a?void 0:a.url))&&void 0!==t?t:"",onChange:(o=e,function(e){re(Object(i.a)({},ae,Object(r.a)({},o,e)))})})}),m.a.createElement("span",null,"\u6700\u591a\u652f\u6301\u4e0a\u4f207\u5f20\u56fe\u7247,\u6bcf\u5f20\u56fe\u7247\u5927\u5c0f\u4e0d\u8d85\u8fc71m,\u6587\u4ef6\u683c\u5f0f\u4ec5\u652f\u6301PNG/JPG"))),m.a.createElement(h.a,{loading:Q?1:0,color:"primary",variant:"contained",fullWidth:!0,onClick:ee},"\u4fdd\u5b58"))))}}}]);