(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{350:function(e,t,n){"use strict";n.r(t);var a=n(13),i=n(12),r=n.n(i),l=n(17),c=n(0),o=n.n(c),u=n(16),d=n(200),s={};s.Box=Object(u.b)("div").withConfig({displayName:"style__Box",componentId:"sc-1ay69up-0"})(["margin:20px;> header{display:grid;grid-column-gap:10px;grid-template-columns:minmax(200px,auto) repeat(2,1fr);> section{flex:1;}}"]),s.Table=Object(u.b)(d.a).withConfig({displayName:"style__Table",componentId:"sc-1ay69up-1"})(["&&&{margin-top:20px;border-radius:5px;border-collapse:initial;overflow:hidden;border:1px solid rgba(224,224,224,1);> thead{background:",";> tr > th{color:",";}}}"],function(e){return e.theme.palette.grey[800]},function(e){return e.theme.palette.common.white}),s.Loading=Object(u.b)("section").withConfig({displayName:"style__Loading",componentId:"sc-1ay69up-2"})(["text-align:center;"]),s.ActionTableCell=Object(u.b)("section").withConfig({displayName:"style__ActionTableCell",componentId:"sc-1ay69up-3"})(["&&&{display:flex;> button{margin-right:8px;&:last-of-type{margin-right:0;}}}"]),s.HeaderBox=Object(u.b)("section").withConfig({displayName:"style__HeaderBox",componentId:"sc-1ay69up-4"})(["&&&{display:flex;flex-direction:column;> header{font-size:20px;font-weight:bold;margin-bottom:15px;}> section{font-weight:bold;font-size:14px;margin-bottom:10px;}> main{display:flex;align-items:center;> div{margin-right:10px;}}}"]),s.ImgPreview=Object(u.b)("section").withConfig({displayName:"style__ImgPreview",componentId:"sc-1ay69up-5"})(["width:180px;display:inline-flex;> img{width:80px;height:60px;}> section{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-left:10px;}"]),s.SearchBox=Object(u.b)("div").withConfig({displayName:"style__SearchBox",componentId:"sc-1ay69up-6"})(["display:grid;grid-template-columns:4fr 3fr 2fr;grid-gap:12px;> span{grid-area:2 / 1 / 2 / 3;justify-self:end;align-self:center;}"]);var p=n(100),m=n(78),b=n(381),f=n(60),v=n(385),g=n(46),_=n(384),h=n(386),y=n(18),x=n(73),E=n(54),j=n(39);function O(){var e=Object(E.a)(["\n    query ($data: ProductSupplementListInput) {\n        product_supplement_list_total(productSupplementListInput: $data)\n        product_supplement_list(productSupplementListInput: $data) {\n            id\n            name\n            amount\n            number\n            user_id\n            state\n            create_time\n            addItemList {\n                id\n                name\n                count\n                amount\n                supplier\n                product {\n                    id\n                    number\n                    is_group\n                    name\n                    stock\n                    price_in\n                    price_out\n                    price_market\n                    weight\n                }\n            }\n        }\n    }\n"]);return O=function(){return e},e}function w(){var e=Object(E.a)(["\n    mutation ($data: ProductInput) {\n        save_product(ProductInput: $data) {\n            msg\n            flag\n            product {\n                id\n            }\n        }\n    }\n"]);return w=function(){return e},e}function L(){var e=Object(E.a)(["\n    query ($id: String) {\n        category_origin(id: $id) {\n            id number c2_id c2_name c3_id c3_name\n            c2_number c3_number\n        }\n    }\n"]);return L=function(){return e},e}function k(){var e=Object(E.a)(["\n      mutation($data: ProductSupplementInput) {\n          save_product_supplement (productSupplementInput: $data) {\n              msg\n              flag\n          }\n      }\n  "]);return k=function(){return e},e}var C={save_product_supplement:Object(j.b)(k())},I=(Object(j.b)(L()),Object(j.b)(w()),Object(j.b)(O())),P=n(30),F=n(398),S=Object(m.c)("AddProductList",{listData:[]},{getList:function(){var e=Object(l.a)(r.a.mark(function e(t,n){var a,i,l,c,o,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.setData,i=n.query,l=n.data,e.next=3,i(I,Object(m.e)(l));case 3:c=e.sent,o=c.product_supplement_list,u=c.product_supplement_list_total,a(Object(y.f)({total:u,listData:o}));case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),getAddProductList:function(){var e=Object(l.a)(r.a.mark(function e(t,n){var a,i,l,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.query,e.next=3,i(F.a.getList);case 3:if(l=e.sent,null===(c=null===l||void 0===l?void 0:null===(a=l.product_list)||void 0===a?void 0:a.filter(function(e){return e.stock<0}))||void 0===c?void 0:c.length){e.next=8;break}return Object(P.b)({message:"\u6682\u65e0\u9700\u8981\u8865\u8d27\u7684\u5546\u54c1"}),e.abrupt("return");case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}),T=n(25),B=n(155),$=n(56),D=n(88),N=Object(T.b)(Object(B.a)("wait",{id:"",waitList:[],state:1}),"waitListModal",{refreshData:function(){}},{setRefreshCall:function(e,t){return(0,t.setData)(Object(y.f)({refreshData:e}))},addOneProductSupplement:function(){var e=Object(l.a)(r.a.mark(function e(t,n){var i,l,c,o,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.data,o=n.mutate,e.next=3,o(C.save_product_supplement,{addList:c.modalData.waitList.map(function(e){return Object(a.a)({},Object($.pick)(e,["addRemark","addNumber","addPrice","addSupplier"]),c.modalData.id?{id:e.id,product_id:e.product_id}:{product_id:e.id})}),id:c.modalData.id,state:null!==(i=t.state)&&void 0!==i?i:1});case 3:return u=e.sent,(null===(l=u.save_product_supplement)||void 0===l?void 0:l.flag)&&(Object(P.b)({message:"\u64cd\u4f5c\u6210\u529f"}),c.refreshData()),e.abrupt("return",u);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),isFinish:function(e,t){return t.data.modalData.state===D.ProductSupplement.Finish}}),q=n(328),A=n(427),H=n(322),R=n(37),M=function(e){var t;return Object(a.a)({},e.product,{addNumber:e.count,addPrice:e.amount,addSupplier:e.supplier,addRemark:e.remark,id:e.id,product_id:null===(t=e.product)||void 0===t?void 0:t.id})},W=function(){var e,t=Object(f.a)(),n=Object(x.a)(N),i=n.state,c=n.actions,u=c.setModal,d=i.modalData,s=i.fetchLoad[C.save_product_supplement],m=function(){var e=Object(l.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.addOneProductSupplement(t);case 2:if(!e.sent){e.next=4;break}c.onClose({});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(q.a,{fullWidth:!0,maxWidth:"lg",open:i.open,onClose:function(){return c.onClose({})}},o.a.createElement(H.a,null,"\u8865\u8d27\u5217\u8868"),o.a.createElement(A.a.Content,null,o.a.createElement(p.a.Table,{theme:t},o.a.createElement(_.a,null,o.a.createElement(v.a,null,["\u5546\u54c1\u7f16\u53f7","\u662f\u5426\u62fc\u56e2","\u4e2d\u6587\u540d\u79f0","\u5e93\u5b58","\u8fdb\u8d27\u4ef7\u683c","\u5e02\u573a\u4ef7\u683c","\u552e\u5356\u4ef7\u683c","\u91cd\u91cf"].map(function(e){return o.a.createElement(g.a,{key:"TableHead".concat(e)},e)}),o.a.createElement(g.a,{width:80},"\u8865\u8d27\u6570\u91cf"),o.a.createElement(g.a,{width:80},"\u8865\u8d27\u4ef7\u683c"),o.a.createElement(g.a,{width:100},"\u4f9b\u5e94\u5546"),o.a.createElement(g.a,{width:100},"\u5907\u6ce8"))),o.a.createElement(h.a,null,null===d||void 0===d?void 0:null===(e=d.waitList)||void 0===e?void 0:e.map(function(e,t){var n,i,r,l;return o.a.createElement(v.a,{key:"TableBody".concat(null===e||void 0===e?void 0:e.id)},o.a.createElement(g.a,null,null===e||void 0===e?void 0:e.number),o.a.createElement(g.a,null,(null===e||void 0===e?void 0:e.is_group)?"\u662f":"\u5426"),o.a.createElement(g.a,null,null===e||void 0===e?void 0:e.name),o.a.createElement(g.a,null,null===e||void 0===e?void 0:e.stock),o.a.createElement(g.a,null,null===e||void 0===e?void 0:e.price_in),o.a.createElement(g.a,null,null===e||void 0===e?void 0:e.price_out),o.a.createElement(g.a,null,null===e||void 0===e?void 0:e.price_market),o.a.createElement(g.a,null,null===e||void 0===e?void 0:e.weight),o.a.createElement(g.a,null,o.a.createElement(A.a.TextFieldBox,{label:"",type:"number",disabled:c.isFinish(),value:null!==(n=null===e||void 0===e?void 0:e.addNumber)&&void 0!==n?n:"",onChange:function(e){return u(Object(a.a)({},d,{waitList:d.waitList.map(function(n,i){return i!==t?n:Object(a.a)({},n,{addNumber:parseFloat(e.target.value)})})}))}})),o.a.createElement(g.a,null,o.a.createElement(A.a.TextFieldBox,{disabled:c.isFinish(),label:"",type:"number",value:null!==(i=null===e||void 0===e?void 0:e.addPrice)&&void 0!==i?i:"",onChange:function(e){return u(Object(a.a)({},d,{waitList:d.waitList.map(function(n,i){return i!==t?n:Object(a.a)({},n,{addPrice:parseFloat(e.target.value)})})}))}})),o.a.createElement(g.a,null,o.a.createElement(A.a.TextFieldBox,{disabled:c.isFinish(),label:"",value:null!==(r=null===e||void 0===e?void 0:e.addSupplier)&&void 0!==r?r:"",onChange:function(e){return u(Object(a.a)({},d,{waitList:d.waitList.map(function(n,i){return i!==t?n:Object(a.a)({},n,{addSupplier:e.target.value})})}))}})),o.a.createElement(g.a,null,o.a.createElement(A.a.TextFieldBox,{disabled:c.isFinish(),label:"",value:null!==(l=null===e||void 0===e?void 0:e.addRemark)&&void 0!==l?l:"",onChange:function(e){return u(Object(a.a)({},d,{waitList:d.waitList.map(function(n,i){return i!==t?n:Object(a.a)({},n,{addRemark:e.target.value})})}))}})))}))),o.a.createElement("footer",null,d.id?o.a.createElement(o.a.Fragment,null,o.a.createElement(R.a,{loading:s?1:0,disabled:c.isFinish(),color:"primary",variant:"contained",fullWidth:!0,onClick:function(){return m({})}},"\u66f4\u65b0\u6570\u91cf"),o.a.createElement(R.a,{loading:s?1:0,color:"primary",variant:"contained",fullWidth:!0,onClick:function(){return m({state:c.isFinish()?1:2})}},c.isFinish()?"\u64a4\u9500\u8865\u8d27":"\u786e\u5b9a\u8865\u8d27\u5b8c\u6210")):o.a.createElement(R.a,{loading:s?1:0,color:"primary",variant:"contained",fullWidth:!0,onClick:function(){return m({})}},"\u4fdd\u5b58"))))};n.d(t,"AddProduct",function(){return z});var z=function(){var e=Object(f.a)(),t=Object(x.a)(S),n=t.state,i=t.actions,u=t.getLoad,d=u(I),E=n.listData,j=Object(x.a)(N).actions;return Object(c.useEffect)(function(){j.setRefreshCall(i.getList)},[i.getList,j]),Object(c.useEffect)(function(){i.getList({})},[i]),o.a.createElement(p.a.Box,null,o.a.createElement("header",null,o.a.createElement(p.a.HeaderBox,null,o.a.createElement("header",null,"\u8865\u8d27\u5217\u8868"),o.a.createElement("section",null,"\u60a8\u53ef\u4ee5\u8fdb\u884c\u7ba1\u7406"),o.a.createElement("main",null,o.a.createElement(R.a,{variant:"contained",color:"primary",loading:u(F.a.getList),onClick:Object(l.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getAddProductList({});case 2:t=e.sent,j.openEditClick({data:{waitList:t}});case 4:case"end":return e.stop()}},e)}))},"\u751f\u6210\u8865\u8d27\u5355")))),o.a.createElement("main",null,d?o.a.createElement(s.Loading,null,o.a.createElement(b.a,null)):o.a.createElement(p.a.Table,{theme:e},o.a.createElement(_.a,null,o.a.createElement(v.a,null,["\u8865\u8d27\u5355\u7f16\u53f7","\u521b\u5efa\u65f6\u95f4","\u8865\u8d27\u5355\u72b6\u6001","\u8ba2\u5355\u8be6\u60c5"].map(function(e){return o.a.createElement(g.a,{key:"TableHead".concat(e)},e)}))),o.a.createElement(h.a,null,null===E||void 0===E?void 0:E.map(function(e){return o.a.createElement(v.a,{key:"TableBody".concat(null===e||void 0===e?void 0:e.id)},o.a.createElement(g.a,null,null===e||void 0===e?void 0:e.number),o.a.createElement(g.a,null,Object(y.d)(new Date(null===e||void 0===e?void 0:e.create_time),"yyyy/MM/dd HH:mm")),o.a.createElement(g.a,null,D.ProductSupplementString[null===e||void 0===e?void 0:e.state]),o.a.createElement(g.a,null,o.a.createElement(p.a.ActionTableCell,null,o.a.createElement(R.a,{color:"secondary",onClick:function(){j.openEditClick({data:Object(a.a)({},e,{waitList:null===e||void 0===e?void 0:e.addItemList.map(M)})})},variant:"contained"},"\u7f16\u8f91"),o.a.createElement(R.a,{color:"secondary",onClick:function(){e.addItemList.length},variant:"contained"},"\u8be6\u60c5"))))}))),o.a.createElement(m.b,{pageModel:t})),o.a.createElement(W,null))};t.default=z},398:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return u});var a=n(54),i=n(39);function r(){var e=Object(a.a)(["\n    mutation ($data: ProductInput) {\n        save_product(ProductInput: $data) {\n            msg\n            flag\n            product {\n                id\n            }\n        }\n    }\n"]);return r=function(){return e},e}function l(){var e=Object(a.a)(["\n    query ($id: String) {\n        category_origin(id: $id) {\n            id number c2_id c2_name c3_id c3_name\n            c2_number c3_number\n        }\n    }\n"]);return l=function(){return e},e}function c(){var e=Object(a.a)(["\n    query ($data: ProductInput) {\n        product_list(ListInput: $data) {\n            id name number is_hot is_new stock price_in is_enable\n            price_market price_out weight unit brand category_id\n            c1_id c1_number c2_id c2_name c3_id c3_name\n            c2_number c3_number is_group group_amount group_precision\n            group_remark shelvesTypes\n            imgs { id url number }\n        }\n        product_total(ListInput: $data)\n    }\n  "]);return c=function(){return e},e}var o={getList:Object(i.b)(c())},u=(Object(i.b)(l()),Object(i.b)(r()))},427:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(16),i=n(323),r=n(314),l={};l.Content=Object(a.b)(i.a).withConfig({displayName:"style__Content",componentId:"icrqdu-0"})(["&&&{> footer{margin:10px 0;display:flex;> button:not(:first-of-type){margin-left:10px;}}}"]),l.TextFieldBox=Object(a.b)(r.a).withConfig({displayName:"style__TextFieldBox",componentId:"icrqdu-1"})(["&&&{padding:0 15px;}"])}}]);