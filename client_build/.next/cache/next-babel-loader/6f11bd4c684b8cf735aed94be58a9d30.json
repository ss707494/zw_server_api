{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\code\\\\zw\\\\zw_client_web\\\\utils\\\\components\\\\ProductItem\\\\ProductItem.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport styled from 'styled-components';\nimport StarRoundedIcon from '@material-ui/icons/StarRounded';\nimport StarBorderRoundedIcon from '@material-ui/icons/StarBorderRounded';\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport React, { useEffect } from 'react';\nimport { dealImgUrl } from '../../tools/img';\nimport { Button, Card, IconButton } from '@material-ui/core';\nimport { dealMoney } from '../../tools/utils';\nimport { mpStyle } from '../../style/common';\nimport { modelFactory } from '../../ModelAction/modelUtil';\nimport { useStoreModel } from '../../ModelAction/useStore';\nimport { meModel } from '../../view/m/me/model';\nimport { doc } from '../../graphqlTypes/doc';\nimport { showMessage } from '../Message/Message';\nimport { ll } from '../../tools/dealKey';\nimport { grey } from '@material-ui/core/colors';\nimport { shopCartModel } from '../../view/m/cart';\nimport { useRouter } from 'next/router';\nimport { updateShopCartModel } from './UpdateShopCart';\nimport { Space } from '../Box/Box';\nexport var productModel = modelFactory('productModel', {}, {\n  updateNumShopCart: function () {\n    var _updateNumShopCart = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value, option) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return option.mutate(doc.updateNumShopCart, _objectSpread({\n                shopCart: value\n              }, value.number ? {\n                updateNum: value.number\n              } : {}));\n\n            case 2:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function updateNumShopCart(_x, _x2) {\n      return _updateNumShopCart.apply(this, arguments);\n    }\n\n    return updateNumShopCart;\n  }(),\n  updateShopCart: function () {\n    var _updateShopCart = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value, option) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return option.mutate(doc.updateShopCart, {\n                shopCart: value\n              });\n\n            case 2:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    function updateShopCart(_x3, _x4) {\n      return _updateShopCart.apply(this, arguments);\n    }\n\n    return updateShopCart;\n  }()\n});\nvar Box = styled(Card).withConfig({\n  displayName: \"ProductItem__Box\",\n  componentId: \"sc-1cef71f-0\"\n})([\"padding:10px 10px 0;> header{width:100%;height:40vw;> img{border-radius:8px;width:100%;height:40vw;}}> main{margin-top:10px;line-height:22px;\", \";}> footer{margin-top:4px;display:flex;align-items:center;> main{flex-grow:1;}> .MuiButtonBase-root{padding:5px;}}\"], mpStyle.ellipsis);\n_c = Box;\nexport var ProductPrice = function ProductPrice(_ref) {\n  var product = _ref.product,\n      priceOutTip = _ref.priceOutTip;\n  return __jsx(React.Fragment, null, __jsx(\"aside\", {\n    style: {\n      display: 'inline-block',\n      fontSize: '12px',\n      textDecoration: 'line-through',\n      flexShrink: 0\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, dealMoney(product === null || product === void 0 ? void 0 : product.priceMarket)), __jsx(\"main\", {\n    style: {\n      display: 'inline-block',\n      fontSize: '14px',\n      marginLeft: '6px',\n      color: mpStyle.red,\n      flexShrink: 0\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, priceOutTip !== null && priceOutTip !== void 0 ? priceOutTip : '', dealMoney(product === null || product === void 0 ? void 0 : product.priceOut)));\n};\n_c2 = ProductPrice;\nexport var ProductItem = function ProductItem(_ref2) {\n  _s();\n\n  var _product$img, _product$img$, _stateMe$user;\n\n  var product = _ref2.product;\n\n  var _useStoreModel = useStoreModel(updateShopCartModel),\n      actionsUpdateShopCartModel = _useStoreModel.actions;\n\n  var _useStoreModel2 = useStoreModel(shopCartModel),\n      actionsShopCart = _useStoreModel2.actions;\n\n  var _useStoreModel3 = useStoreModel(meModel),\n      stateMe = _useStoreModel3.state,\n      actionsMe = _useStoreModel3.actions;\n\n  useEffect(function () {\n    if (!stateMe.user.id) {\n      actionsMe.getLoginUser();\n    }\n  }, [actionsMe, stateMe.user.id]);\n\n  var _useStoreModel4 = useStoreModel(productModel),\n      actionsPM = _useStoreModel4.actions;\n\n  return __jsx(Box, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 10\n    }\n  }, __jsx(\"header\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, __jsx(\"img\", {\n    src: dealImgUrl(product === null || product === void 0 ? void 0 : (_product$img = product.img) === null || _product$img === void 0 ? void 0 : (_product$img$ = _product$img[0]) === null || _product$img$ === void 0 ? void 0 : _product$img$.url),\n    alt: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  })), __jsx(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, product.name, \" \", product.weight, product.unit, \" \", product.packingUnitString), __jsx(\"footer\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, __jsx(ProductPrice, {\n    product: product,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }), ((_stateMe$user = stateMe.user) === null || _stateMe$user === void 0 ? void 0 : _stateMe$user.id) && __jsx(IconButton, {\n    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var res, _yield$actionsPM$upda, _yield$actionsPM$upda2;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return actionsUpdateShopCartModel.openClick();\n\n            case 2:\n              res = _context3.sent;\n\n              if (!((res === null || res === void 0 ? void 0 : res.num) > 0)) {\n                _context3.next = 18;\n                break;\n              }\n\n              _context3.next = 6;\n              return actionsPM.updateNumShopCart({\n                product: product,\n                number: ~~(res === null || res === void 0 ? void 0 : res.num)\n              });\n\n            case 6:\n              _context3.t1 = _yield$actionsPM$upda = _context3.sent;\n              _context3.t0 = _context3.t1 === null;\n\n              if (_context3.t0) {\n                _context3.next = 10;\n                break;\n              }\n\n              _context3.t0 = _yield$actionsPM$upda === void 0;\n\n            case 10:\n              if (!_context3.t0) {\n                _context3.next = 14;\n                break;\n              }\n\n              _context3.t2 = void 0;\n              _context3.next = 15;\n              break;\n\n            case 14:\n              _context3.t2 = (_yield$actionsPM$upda2 = _yield$actionsPM$upda.updateNumShopCart) === null || _yield$actionsPM$upda2 === void 0 ? void 0 : _yield$actionsPM$upda2.id;\n\n            case 15:\n              if (!_context3.t2) {\n                _context3.next = 18;\n                break;\n              }\n\n              showMessage('操作成功');\n              actionsShopCart.getList();\n\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    })),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 28\n    }\n  }, __jsx(ShoppingCartIcon, {\n    color: 'secondary',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }))));\n};\n\n_s(ProductItem, \"0jInX7mzTsepQMlV3vQZ7vhR/Fk=\", false, function () {\n  return [useStoreModel, useStoreModel, useStoreModel, useStoreModel];\n});\n\n_c3 = ProductItem;\nvar RowBox = styled.div.withConfig({\n  displayName: \"ProductItem__RowBox\",\n  componentId: \"sc-1cef71f-1\"\n})([\"display:flex;padding:8px;box-shadow:\", \";border-radius:8px;margin-bottom:8px;\"], mpStyle.shadow['1']);\n_c4 = RowBox;\nvar Img = styled.div.withConfig({\n  displayName: \"ProductItem__Img\",\n  componentId: \"sc-1cef71f-2\"\n})([\"width:35vw;height:35vw;margin-right:8px;> img{width:35vw;height:35vw;}\"]);\n_c5 = Img;\nvar LeftBox = styled.div.withConfig({\n  displayName: \"ProductItem__LeftBox\",\n  componentId: \"sc-1cef71f-3\"\n})([\"display:flex;flex-direction:column;flex-grow:1;width:0;> main{line-height:22px;\", \";}\"], mpStyle.ellipsis);\n_c6 = LeftBox;\nvar Tip = styled.div.withConfig({\n  displayName: \"ProductItem__Tip\",\n  componentId: \"sc-1cef71f-4\"\n})([\"margin-top:16px;border-radius:8px;padding:2px 6px;background:\", \";color:white;width:max-content;\"], grey[800]);\n_c7 = Tip;\nvar Price = styled.div.withConfig({\n  displayName: \"ProductItem__Price\",\n  componentId: \"sc-1cef71f-5\"\n})([\"margin-top:16px;flex-grow:1;\"]);\n_c8 = Price;\nvar Bun = styled.div.withConfig({\n  displayName: \"ProductItem__Bun\",\n  componentId: \"sc-1cef71f-6\"\n})([\"&&&{.MuiButtonBase-root{padding:4px 0;}}\"]);\n_c9 = Bun;\nexport var ProductItemOneRow = function ProductItemOneRow(_ref4) {\n  _s2();\n\n  var _product$img2, _product$img2$, _stateMe$user2;\n\n  var product = _ref4.product,\n      _ref4$sumOrderTip = _ref4.sumOrderTip,\n      sumOrderTip = _ref4$sumOrderTip === void 0 ? '' : _ref4$sumOrderTip,\n      _ref4$hideAction = _ref4.hideAction,\n      hideAction = _ref4$hideAction === void 0 ? false : _ref4$hideAction,\n      _ref4$showSumOrder = _ref4.showSumOrder,\n      showSumOrder = _ref4$showSumOrder === void 0 ? false : _ref4$showSumOrder;\n\n  var _useStoreModel5 = useStoreModel(updateShopCartModel),\n      actionsUpdateShopCartModel = _useStoreModel5.actions;\n\n  var _useStoreModel6 = useStoreModel(meModel),\n      stateMe = _useStoreModel6.state,\n      actionsMe = _useStoreModel6.actions;\n\n  var _useStoreModel7 = useStoreModel(productModel),\n      actionsPM = _useStoreModel7.actions;\n\n  var _useStoreModel8 = useStoreModel(shopCartModel),\n      actionsShopCart = _useStoreModel8.actions;\n\n  useEffect(function () {\n    if (!stateMe.user.id) {\n      actionsMe.getLoginUser();\n    }\n  }, [actionsMe, stateMe.user.id]);\n  return __jsx(RowBox, {\n    key: \"ProductItemOneRow_\".concat(product.id),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 10\n    }\n  }, __jsx(Img, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 5\n    }\n  }, __jsx(\"img\", {\n    src: dealImgUrl(product === null || product === void 0 ? void 0 : (_product$img2 = product.img) === null || _product$img2 === void 0 ? void 0 : (_product$img2$ = _product$img2[0]) === null || _product$img2$ === void 0 ? void 0 : _product$img2$.url),\n    alt: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  })), __jsx(LeftBox, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 5\n    }\n  }, __jsx(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, product.name, \" \", product.weight, product.unit, \" \", product.packingUnitString), showSumOrder && __jsx(Tip, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 24\n    }\n  }, sumOrderTip, ll('销量'), \": \", product.sumOrder), __jsx(Price, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }\n  }, __jsx(ProductPrice, {\n    product: product,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  })), !hideAction && ((_stateMe$user2 = stateMe.user) === null || _stateMe$user2 === void 0 ? void 0 : _stateMe$user2.id) && __jsx(Bun, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 43\n    }\n  }, __jsx(Button, {\n    fullWidth: true,\n    color: 'secondary',\n    variant: 'contained',\n    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var res, _yield$actionsPM$upda3, _yield$actionsPM$upda4;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return actionsUpdateShopCartModel.openClick();\n\n            case 2:\n              res = _context4.sent;\n\n              if (!((res === null || res === void 0 ? void 0 : res.num) > 0)) {\n                _context4.next = 18;\n                break;\n              }\n\n              _context4.next = 6;\n              return actionsPM.updateNumShopCart({\n                product: product,\n                number: ~~(res === null || res === void 0 ? void 0 : res.num)\n              });\n\n            case 6:\n              _context4.t1 = _yield$actionsPM$upda3 = _context4.sent;\n              _context4.t0 = _context4.t1 === null;\n\n              if (_context4.t0) {\n                _context4.next = 10;\n                break;\n              }\n\n              _context4.t0 = _yield$actionsPM$upda3 === void 0;\n\n            case 10:\n              if (!_context4.t0) {\n                _context4.next = 14;\n                break;\n              }\n\n              _context4.t2 = void 0;\n              _context4.next = 15;\n              break;\n\n            case 14:\n              _context4.t2 = (_yield$actionsPM$upda4 = _yield$actionsPM$upda3.updateNumShopCart) === null || _yield$actionsPM$upda4 === void 0 ? void 0 : _yield$actionsPM$upda4.id;\n\n            case 15:\n              if (!_context4.t2) {\n                _context4.next = 18;\n                break;\n              }\n\n              showMessage('操作成功');\n              actionsShopCart.getList();\n\n            case 18:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    })),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }, __jsx(ShoppingCartIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }), ll('加入购物车')))));\n};\n\n_s2(ProductItemOneRow, \"s6kstHlnFzPm5FU+OG2M8CAvvqo=\", false, function () {\n  return [useStoreModel, useStoreModel, useStoreModel, useStoreModel];\n});\n\n_c10 = ProductItemOneRow;\nvar GroupBox = styled.div.withConfig({\n  displayName: \"ProductItem__GroupBox\",\n  componentId: \"sc-1cef71f-7\"\n})([\"display:flex;\"]);\n_c11 = GroupBox;\nvar GroupImg = styled.div.withConfig({\n  displayName: \"ProductItem__GroupImg\",\n  componentId: \"sc-1cef71f-8\"\n})([\"width:35vw;height:35vw;margin-right:16px;> img{width:35vw;height:35vw;border-radius:8px;}\"]);\n_c12 = GroupImg;\nvar RightBox = styled.div.withConfig({\n  displayName: \"ProductItem__RightBox\",\n  componentId: \"sc-1cef71f-9\"\n})([\"display:flex;flex-grow:1;flex-direction:column;\"]);\n_c13 = RightBox;\nvar Title = styled.div.withConfig({\n  displayName: \"ProductItem__Title\",\n  componentId: \"sc-1cef71f-10\"\n})([\"font-weight:bold;display:flex;\"]);\n_c14 = Title;\nvar MarketPrice = styled.div.withConfig({\n  displayName: \"ProductItem__MarketPrice\",\n  componentId: \"sc-1cef71f-11\"\n})([\"margin-top:8px;color:\", \";> span{text-decoration:line-through;}\"], grey[700]);\n_c15 = MarketPrice;\nvar OutPrice = styled.div.withConfig({\n  displayName: \"ProductItem__OutPrice\",\n  componentId: \"sc-1cef71f-12\"\n})([\"margin-top:8px;color:\", \";\"], mpStyle.red);\n_c16 = OutPrice;\nvar Star = styled.div.withConfig({\n  displayName: \"ProductItem__Star\",\n  componentId: \"sc-1cef71f-13\"\n})([\"flex-grow:1;\"]);\n_c17 = Star;\nvar Action = styled.div.withConfig({\n  displayName: \"ProductItem__Action\",\n  componentId: \"sc-1cef71f-14\"\n})([\"\"]);\n_c18 = Action;\nvar OrderTip = styled.div.withConfig({\n  displayName: \"ProductItem__OrderTip\",\n  componentId: \"sc-1cef71f-15\"\n})([\"margin-top:16px;border-radius:8px;padding:2px 6px;background:\", \";color:white;width:max-content;\"], grey[800]);\n_c19 = OrderTip;\nexport var GroupProductItem = function GroupProductItem(_ref6) {\n  _s3();\n\n  var _product$img3, _product$img3$;\n\n  var product = _ref6.product,\n      groupQueue = _ref6.groupQueue,\n      _ref6$sumOrderTip = _ref6.sumOrderTip,\n      sumOrderTip = _ref6$sumOrderTip === void 0 ? '' : _ref6$sumOrderTip,\n      _ref6$showSumOrder = _ref6.showSumOrder,\n      showSumOrder = _ref6$showSumOrder === void 0 ? false : _ref6$showSumOrder;\n\n  var _useStoreModel9 = useStoreModel(meModel),\n      stateMe = _useStoreModel9.state,\n      actionsMe = _useStoreModel9.actions;\n\n  var router = useRouter();\n  useEffect(function () {\n    if (!stateMe.user.id) {\n      actionsMe.getLoginUser();\n    }\n  }, [actionsMe, stateMe.user.id]);\n  return __jsx(GroupBox, {\n    key: \"GroupBox_\".concat(product.id),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 10\n    }\n  }, __jsx(GroupImg, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 5\n    }\n  }, __jsx(\"img\", {\n    src: dealImgUrl(product === null || product === void 0 ? void 0 : (_product$img3 = product.img) === null || _product$img3 === void 0 ? void 0 : (_product$img3$ = _product$img3[0]) === null || _product$img3$ === void 0 ? void 0 : _product$img3$.url),\n    alt: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }\n  })), __jsx(RightBox, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 5\n    }\n  }, __jsx(Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }\n  }, product.name, \"(\", product.groupRemark, \"/\", product.groupAmount, product.groupAmountUnitString, \"/\", product.groupPrecisionString, \")\"), showSumOrder && __jsx(OrderTip, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 24\n    }\n  }, sumOrderTip, ll('拼团达人数'), \": \", product.sumOrder), __jsx(MarketPrice, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }\n  }, ll('市场价'), __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }\n  }, dealMoney(product.priceMarket))), __jsx(OutPrice, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }\n  }, ll('基准价格'), __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 9\n    }\n  }, dealMoney(product.priceOut))), __jsx(Star, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }\n  }, (groupQueue === null || groupQueue === void 0 ? void 0 : groupQueue.id) && __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 28\n    }\n  }, __jsx(Space, {\n    h: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 11\n    }\n  }), _toConsumableArray(Array(product.groupPrecision)).map(function (v, i) {\n    return i;\n  }).map(function (value) {\n    var _groupQueue$sumFillAm;\n\n    return value + 1 > ((_groupQueue$sumFillAm = groupQueue.sumFillAmount) !== null && _groupQueue$sumFillAm !== void 0 ? _groupQueue$sumFillAm : 0) ? __jsx(StarBorderRoundedIcon, {\n      key: \"clickStar\".concat(value),\n      fontSize: 'small',\n      style: {\n        color: grey[700]\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 15\n      }\n    }) : __jsx(StarRoundedIcon, {\n      key: \"clickStar\".concat(value),\n      style: {\n        color: '#FDD334'\n      },\n      fontSize: 'small',\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 20\n      }\n    });\n  }))), __jsx(Action, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    variant: 'contained',\n    color: 'secondary',\n    fullWidth: true,\n    onClick: function onClick() {\n      router.push(\"/m/groupProduct/[id]\", \"/m/groupProduct/\".concat(product.id));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 9\n    }\n  }, __jsx(AddCircleOutlineIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 11\n    }\n  }), ll('拼一个')))));\n};\n\n_s3(GroupProductItem, \"y873HSUKuY6haZEHsjsukCN0NjQ=\", false, function () {\n  return [useStoreModel, useRouter];\n});\n\n_c20 = GroupProductItem;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20;\n\n$RefreshReg$(_c, \"Box\");\n$RefreshReg$(_c2, \"ProductPrice\");\n$RefreshReg$(_c3, \"ProductItem\");\n$RefreshReg$(_c4, \"RowBox\");\n$RefreshReg$(_c5, \"Img\");\n$RefreshReg$(_c6, \"LeftBox\");\n$RefreshReg$(_c7, \"Tip\");\n$RefreshReg$(_c8, \"Price\");\n$RefreshReg$(_c9, \"Bun\");\n$RefreshReg$(_c10, \"ProductItemOneRow\");\n$RefreshReg$(_c11, \"GroupBox\");\n$RefreshReg$(_c12, \"GroupImg\");\n$RefreshReg$(_c13, \"RightBox\");\n$RefreshReg$(_c14, \"Title\");\n$RefreshReg$(_c15, \"MarketPrice\");\n$RefreshReg$(_c16, \"OutPrice\");\n$RefreshReg$(_c17, \"Star\");\n$RefreshReg$(_c18, \"Action\");\n$RefreshReg$(_c19, \"OrderTip\");\n$RefreshReg$(_c20, \"GroupProductItem\");","map":{"version":3,"sources":["D:/code/zw/zw_client_web/utils/components/ProductItem/ProductItem.tsx"],"names":["styled","StarRoundedIcon","StarBorderRoundedIcon","AddCircleOutlineIcon","ShoppingCartIcon","React","useEffect","dealImgUrl","Button","Card","IconButton","dealMoney","mpStyle","modelFactory","useStoreModel","meModel","doc","showMessage","ll","grey","shopCartModel","useRouter","updateShopCartModel","Space","productModel","updateNumShopCart","value","option","mutate","shopCart","number","updateNum","updateShopCart","Box","ellipsis","ProductPrice","product","priceOutTip","display","fontSize","textDecoration","flexShrink","priceMarket","marginLeft","color","red","priceOut","ProductItem","actionsUpdateShopCartModel","actions","actionsShopCart","stateMe","state","actionsMe","user","id","getLoginUser","actionsPM","img","url","name","weight","unit","packingUnitString","openClick","res","num","getList","RowBox","div","shadow","Img","LeftBox","Tip","Price","Bun","ProductItemOneRow","sumOrderTip","hideAction","showSumOrder","sumOrder","GroupBox","GroupImg","RightBox","Title","MarketPrice","OutPrice","Star","Action","OrderTip","GroupProductItem","groupQueue","router","groupRemark","groupAmount","groupAmountUnitString","groupPrecisionString","Array","groupPrecision","map","v","i","sumFillAmount","push"],"mappings":"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","sourcesContent":["import styled from 'styled-components'\r\nimport StarRoundedIcon from '@material-ui/icons/StarRounded'\r\nimport StarBorderRoundedIcon from '@material-ui/icons/StarBorderRounded'\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline'\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'\r\nimport React, {useEffect} from 'react'\r\nimport {GroupQueue, Maybe, Product, ShopCartItemInput} from '../../graphqlTypes/types'\r\nimport {dealImgUrl} from '../../tools/img'\r\nimport {Button, Card, IconButton} from '@material-ui/core'\r\nimport {dealMoney} from '../../tools/utils'\r\nimport {mpStyle} from '../../style/common'\r\nimport {modelFactory} from '../../ModelAction/modelUtil'\r\nimport {useStoreModel} from '../../ModelAction/useStore'\r\nimport {meModel} from '../../view/m/me/model'\r\nimport {doc} from '../../graphqlTypes/doc'\r\nimport {showMessage} from '../Message/Message'\r\nimport {ll} from '../../tools/dealKey'\r\nimport {grey} from '@material-ui/core/colors'\r\nimport {shopCartModel} from '../../view/m/cart'\r\nimport {useRouter} from 'next/router'\r\nimport {updateShopCartModel} from './UpdateShopCart'\r\nimport {Space} from '../Box/Box'\r\n\r\nexport const productModel = modelFactory('productModel', {}, {\r\n  updateNumShopCart: async (value: ShopCartItemInput, option) => {\r\n    return await option.mutate(doc.updateNumShopCart, {\r\n      shopCart: value,\r\n      ...(value.number ? {\r\n        updateNum: value.number,\r\n      } : {}),\r\n    })\r\n  },\r\n  updateShopCart: async (value: ShopCartItemInput, option) => {\r\n    return await option.mutate(doc.updateShopCart, {\r\n      shopCart: value,\r\n    })\r\n  },\r\n})\r\n\r\nconst Box = styled(Card)`\r\n  padding: 10px 10px 0;\r\n  > header {\r\n    width: 100%;\r\n    height: 40vw;\r\n    > img {\r\n      border-radius: 8px;\r\n      width: 100%;\r\n      height: 40vw;\r\n    }\r\n  }\r\n  > main {\r\n    margin-top: 10px;\r\n    line-height: 22px;\r\n    ${mpStyle.ellipsis};\r\n  }\r\n  > footer {\r\n    margin-top: 4px;\r\n    display: flex;\r\n    align-items: center;\r\n    > main {\r\n      flex-grow: 1;\r\n    }\r\n    > .MuiButtonBase-root {\r\n      padding: 5px;\r\n    }\r\n  }\r\n`\r\n\r\nexport const ProductPrice = ({product, priceOutTip}: { product?: Maybe<Product>, priceOutTip?: string }) => {\r\n  return <>\r\n    <aside\r\n        style={{display: 'inline-block', fontSize: '12px', textDecoration: 'line-through', flexShrink: 0}}\r\n    >{dealMoney(product?.priceMarket)}</aside>\r\n    <main\r\n        style={{display: 'inline-block', fontSize: '14px', marginLeft: '6px', color: mpStyle.red, flexShrink: 0}}\r\n    >{priceOutTip ?? ''}{dealMoney(product?.priceOut)}</main>\r\n  </>\r\n}\r\n\r\nexport const ProductItem = ({product}: { product: Product }) => {\r\n  const {actions: actionsUpdateShopCartModel} = useStoreModel(updateShopCartModel)\r\n  const {actions: actionsShopCart} = useStoreModel(shopCartModel)\r\n  const {state: stateMe, actions: actionsMe} = useStoreModel(meModel)\r\n  useEffect(() => {\r\n    if (!stateMe.user.id) {\r\n      actionsMe.getLoginUser()\r\n    }\r\n  }, [actionsMe, stateMe.user.id])\r\n  const {actions: actionsPM} = useStoreModel(productModel)\r\n  return <Box>\r\n    <header>\r\n      <img src={dealImgUrl(product?.img?.[0]?.url)}\r\n           alt=\"\"/>\r\n    </header>\r\n    <main>{product.name} {product.weight}{product.unit} {product.packingUnitString}</main>\r\n    <footer>\r\n      <ProductPrice product={product}/>\r\n      {stateMe.user?.id && <IconButton\r\n          onClick={async () => {\r\n            const res = await actionsUpdateShopCartModel.openClick()\r\n            if (res?.num > 0) {\r\n              if ((await actionsPM.updateNumShopCart({\r\n                product,\r\n                number: ~~res?.num,\r\n              }))?.updateNumShopCart?.id) {\r\n                showMessage('操作成功')\r\n                actionsShopCart.getList()\r\n              }\r\n            }\r\n          }}\r\n      >\r\n        <ShoppingCartIcon color={'secondary'}/>\r\n      </IconButton>}\r\n    </footer>\r\n  </Box>\r\n}\r\n\r\nconst RowBox = styled.div`\r\n  display: flex;\r\n  padding: 8px;\r\n  box-shadow: ${mpStyle.shadow['1']};\r\n  border-radius: 8px;\r\n  margin-bottom: 8px;\r\n`\r\nconst Img = styled.div`\r\n  width: 35vw;\r\n  height: 35vw;\r\n  margin-right: 8px;\r\n  > img {\r\n    width: 35vw;\r\n    height: 35vw;\r\n  }\r\n  \r\n`\r\nconst LeftBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  width: 0;\r\n  > main {\r\n    line-height: 22px;\r\n    ${mpStyle.ellipsis};\r\n  }\r\n`\r\nconst Tip = styled.div`\r\n  margin-top: 16px;\r\n  border-radius: 8px;\r\n  padding: 2px 6px;\r\n  background: ${grey[800]};\r\n  color: white;\r\n  width: max-content;\r\n`\r\nconst Price = styled.div`\r\n  margin-top: 16px;\r\n  flex-grow: 1;\r\n`\r\nconst Bun = styled.div`\r\n  &&& {\r\n    .MuiButtonBase-root {\r\n      padding: 4px 0;\r\n    }\r\n  }\r\n`\r\nexport const ProductItemOneRow = ({product, sumOrderTip = '', hideAction = false, showSumOrder = false}: { product: Product, sumOrderTip?: string, hideAction?: boolean, showSumOrder?: boolean }) => {\r\n  const {actions: actionsUpdateShopCartModel} = useStoreModel(updateShopCartModel)\r\n  const {state: stateMe, actions: actionsMe} = useStoreModel(meModel)\r\n  const {actions: actionsPM} = useStoreModel(productModel)\r\n  const {actions: actionsShopCart} = useStoreModel(shopCartModel)\r\n\r\n  useEffect(() => {\r\n    if (!stateMe.user.id) {\r\n      actionsMe.getLoginUser()\r\n    }\r\n  }, [actionsMe, stateMe.user.id])\r\n\r\n  return <RowBox key={`ProductItemOneRow_${product.id}`}>\r\n    <Img>\r\n      <img src={dealImgUrl(product?.img?.[0]?.url)}\r\n           alt=\"\"/>\r\n    </Img>\r\n    <LeftBox>\r\n      <main>{product.name} {product.weight}{product.unit} {product.packingUnitString}</main>\r\n      {/*<Stock>{ls('当前剩余')}: {product.stock}</Stock>*/}\r\n      {showSumOrder && <Tip>{sumOrderTip}{ll('销量')}: {product.sumOrder}</Tip>}\r\n      <Price>\r\n        <ProductPrice product={product}/>\r\n      </Price>\r\n      {!hideAction && stateMe.user?.id && <Bun>\r\n        <Button\r\n            fullWidth={true}\r\n            color={'secondary'}\r\n            variant={'contained'}\r\n            onClick={async () => {\r\n              const res = await actionsUpdateShopCartModel.openClick()\r\n              if (res?.num > 0) {\r\n                if ((await actionsPM.updateNumShopCart({\r\n                  product,\r\n                  number: ~~res?.num,\r\n                }))?.updateNumShopCart?.id) {\r\n                  showMessage('操作成功')\r\n                  actionsShopCart.getList()\r\n                }\r\n              }\r\n            }}\r\n        >\r\n          <ShoppingCartIcon/>\r\n          {ll('加入购物车')}\r\n        </Button>\r\n      </Bun>}\r\n    </LeftBox>\r\n  </RowBox>\r\n}\r\n\r\nconst GroupBox = styled.div`\r\n  display: flex;\r\n`\r\nconst GroupImg = styled.div`\r\n  width: 35vw;\r\n  height: 35vw;\r\n  margin-right: 16px;\r\n  > img {\r\n    width: 35vw;\r\n    height: 35vw;\r\n    border-radius: 8px;\r\n  }\r\n`\r\nconst RightBox = styled.div`\r\n  display: flex;\r\n  flex-grow: 1;\r\n  flex-direction: column;\r\n`\r\nconst Title = styled.div`\r\n  font-weight: bold;\r\n  display: flex;\r\n`\r\nconst MarketPrice = styled.div`\r\n  margin-top: 8px;\r\n  color: ${grey[700]};\r\n  > span {\r\n    text-decoration: line-through;\r\n  }\r\n`\r\nconst OutPrice = styled.div`\r\n  margin-top: 8px;\r\n  color: ${mpStyle.red};\r\n`\r\nconst Star = styled.div`\r\n    flex-grow: 1;\r\n`\r\nconst Action = styled.div`\r\n`\r\nconst OrderTip = styled.div`\r\n  margin-top: 16px;\r\n  border-radius: 8px;\r\n  padding: 2px 6px;\r\n  background: ${grey[800]};\r\n  color: white;\r\n  width: max-content;\r\n`\r\n\r\nexport const GroupProductItem = ({product, groupQueue, sumOrderTip = '', showSumOrder = false}: { product: Product, groupQueue?: GroupQueue, sumOrderTip?: string, showSumOrder?: boolean }) => {\r\n  const {state: stateMe, actions: actionsMe} = useStoreModel(meModel)\r\n  const router = useRouter()\r\n\r\n  useEffect(() => {\r\n    if (!stateMe.user.id) {\r\n      actionsMe.getLoginUser()\r\n    }\r\n  }, [actionsMe, stateMe.user.id])\r\n\r\n  return <GroupBox key={`GroupBox_${product.id}`}>\r\n    <GroupImg>\r\n      <img src={dealImgUrl(product?.img?.[0]?.url)}\r\n           alt=\"\"/>\r\n    </GroupImg>\r\n    <RightBox>\r\n      <Title>\r\n        {product.name}({product.groupRemark}/{product.groupAmount}{product.groupAmountUnitString}/{product.groupPrecisionString})\r\n      </Title>\r\n      {showSumOrder && <OrderTip>{sumOrderTip}{ll('拼团达人数')}: {product.sumOrder}</OrderTip>}\r\n      <MarketPrice>\r\n        {ll('市场价')}\r\n        <span>{dealMoney(product.priceMarket)}</span>\r\n      </MarketPrice>\r\n      <OutPrice>\r\n        {ll('基准价格')}\r\n        <span>{dealMoney(product.priceOut)}</span>\r\n      </OutPrice>\r\n      <Star>\r\n        {groupQueue?.id && <div>\r\n          <Space h={8}/>\r\n          {[...Array(product.groupPrecision)].map((v, i) => i).map(value => value + 1 > (groupQueue.sumFillAmount ?? 0) ?\r\n              <StarBorderRoundedIcon\r\n                  key={`clickStar${value}`}\r\n                  fontSize={'small'}\r\n                  style={{color: grey[700]}}\r\n              /> : <StarRoundedIcon\r\n                  key={`clickStar${value}`}\r\n                  style={{color: '#FDD334'}}\r\n                  fontSize={'small'}\r\n              />)}\r\n        </div>}\r\n      </Star>\r\n      <Action>\r\n        <Button\r\n            variant={'contained'}\r\n            color={'secondary'}\r\n            fullWidth={true}\r\n            onClick={() => {\r\n              router.push(`/m/groupProduct/[id]`, `/m/groupProduct/${product.id}`)\r\n            }}\r\n        >\r\n          <AddCircleOutlineIcon/>\r\n          {ll('拼一个')}\r\n        </Button>\r\n      </Action>\r\n    </RightBox>\r\n  </GroupBox>\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}