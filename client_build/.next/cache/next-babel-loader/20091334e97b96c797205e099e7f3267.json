{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect } from 'react';\nimport StarRoundedIcon from '@material-ui/icons/StarRounded';\nimport StarBorderRoundedIcon from '@material-ui/icons/StarBorderRounded';\nimport { useRouter } from 'next/router';\nimport { modelFactory } from '../../ModelAction/modelUtil';\nimport { doc } from '../../graphqlTypes/doc';\nimport { useStoreModel } from '../../ModelAction/useStore';\nimport { dealMoney, fpMergePre } from '../../tools/utils';\nimport CusCarousel from '../../components/Swipe/Swipe';\nimport { HeaderTitle } from '../../components/HeaderTitle/HeaderTitle';\nimport styled from 'styled-components';\nimport { ls } from '../../tools/dealKey';\nimport { mpStyle } from '../../style/common';\nimport { grey } from '@material-ui/core/colors';\nexport const groupProductModel = modelFactory('groupProductModel', {\n  product: {},\n  groupQueneList: [],\n  selectNum: 0\n}, {\n  getData: async (value, option) => {\n    var _res$productListByIds, _res$productListByIds2, _groupQueneList$group;\n\n    const res = await option.query(doc.productListByIds, {\n      ids: [value]\n    });\n    const groupQueneList = await option.query(doc.groupQueueList, {\n      groupQueueItemInput: {\n        product: {\n          id: value\n        }\n      }\n    });\n    option.setData(fpMergePre({\n      product: (_res$productListByIds = res === null || res === void 0 ? void 0 : (_res$productListByIds2 = res.productListByIds) === null || _res$productListByIds2 === void 0 ? void 0 : _res$productListByIds2.list[0]) !== null && _res$productListByIds !== void 0 ? _res$productListByIds : {},\n      groupQueneList: (_groupQueneList$group = groupQueneList === null || groupQueneList === void 0 ? void 0 : groupQueneList.groupQueueList) !== null && _groupQueneList$group !== void 0 ? _groupQueneList$group : []\n    }));\n  },\n  updateSelectNum: (value, option) => {\n    option.setData(fpMergePre({\n      selectNum: value === option.data.selectNum ? 0 : value\n    }));\n  }\n});\nconst PriceRed = styled.div.withConfig({\n  displayName: \"id__PriceRed\",\n  componentId: \"sc-1c5vpsf-0\"\n})([\"background:\", \";color:white;display:grid;grid-template-columns:1fr 120px;grid-template-rows:repeat(2,30px);align-items:center;> main{grid-area:1/1/3/2;padding-left:20px;> span{margin-left:16px;}}\"], mpStyle.red);\nconst Name = styled.div.withConfig({\n  displayName: \"id__Name\",\n  componentId: \"sc-1c5vpsf-1\"\n})([\"padding:16px 20px;display:flex;align-items:flex-end;> main{font-size:22px;margin-right:8px;flex-shrink:0;}> section{> span{padding:0 4px;background:\", \";border-radius:4px;position:relative;bottom:-4px;margin-left:8px;display:inline-flex;align-items:center;}}\"], grey['700']);\n\nconst YellowStar = () => __jsx(StarRoundedIcon, {\n  fontSize: 'small',\n  style: {\n    color: '#FDD334'\n  }\n});\n\nconst Title = styled.header.withConfig({\n  displayName: \"id__Title\",\n  componentId: \"sc-1c5vpsf-2\"\n})([\"font-size:20px;\"]);\nconst GroupQuene = styled.div.withConfig({\n  displayName: \"id__GroupQuene\",\n  componentId: \"sc-1c5vpsf-3\"\n})([\"padding:16px;\"]);\nconst SmartMatch = styled.div.withConfig({\n  displayName: \"id__SmartMatch\",\n  componentId: \"sc-1c5vpsf-4\"\n})([\"padding:16px;> section{margin-top:8px;display:flex;align-items:center;}> main{}\"]);\nconst Price = styled.div.withConfig({\n  displayName: \"id__Price\",\n  componentId: \"sc-1c5vpsf-5\"\n})([\"margin-top:8px;display:flex;justify-content:space-between;align-items:center;> main{font-weight:bold;}> main,section{> *{text-align:center;}}\"]);\nconst Submit = styled.div.withConfig({\n  displayName: \"id__Submit\",\n  componentId: \"sc-1c5vpsf-6\"\n})([\"\"]);\nexport const GroupProduct = () => {\n  var _ref, _router$query, _product$img, _product$priceOut, _product$priceOut2;\n\n  const router = useRouter();\n  const id = (_ref = (_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.id) !== null && _ref !== void 0 ? _ref : '';\n  const {\n    actions: actionsGroupProduct,\n    state: stateGroupProduct\n  } = useStoreModel(groupProductModel);\n  useEffect(() => {\n    actionsGroupProduct.getData(id);\n  }, [id]);\n  const product = stateGroupProduct.product;\n  console.log(stateGroupProduct.groupQueneList);\n  return __jsx(\"div\", null, __jsx(HeaderTitle, {\n    title: '产品详情'\n  }), __jsx(CusCarousel, {\n    height: '240px',\n    dataList: product === null || product === void 0 ? void 0 : (_product$img = product.img) === null || _product$img === void 0 ? void 0 : _product$img.map(v => _objectSpread(_objectSpread({}, v), {}, {\n      imgUrl: v === null || v === void 0 ? void 0 : v.url\n    }))\n  }), __jsx(PriceRed, null, __jsx(\"main\", null, ls('基准价格'), __jsx(\"span\", null, dealMoney(product.priceOut), \"/\", product.packingUnitString)), __jsx(\"aside\", null, ls('已成团'), 23, ls('单')), __jsx(\"aside\", null, ls('拼团中'), 2, ls('单'))), __jsx(Name, null, __jsx(\"main\", null, product.name), __jsx(\"section\", null, product.groupRemark, \"/\", product.groupAmount, product.groupAmountUnitString, __jsx(\"br\", null), ls('分团精度'), __jsx(\"span\", null, [...Array(product.groupPrecision)].map((v, i) => i).map(value => __jsx(YellowStar, {\n    key: value\n  }))))), __jsx(GroupQuene, null, __jsx(Title, null, ls('拼团中'))), __jsx(SmartMatch, null, __jsx(\"header\", null, __jsx(Title, null, ls('智能匹配'))), __jsx(\"section\", null, ls('请点击'), __jsx(StarBorderRoundedIcon, null), ls('确定您需要的份数')), __jsx(\"main\", null, [...Array(product.groupPrecision)].map((v, i) => i).map(value => value + 1 > stateGroupProduct.selectNum ? __jsx(StarBorderRoundedIcon, {\n    key: `clickStar${value}`,\n    fontSize: 'large',\n    onClick: () => actionsGroupProduct.updateSelectNum(value + 1)\n  }) : __jsx(StarRoundedIcon, {\n    key: `clickStar${value}`,\n    style: {\n      color: '#FDD334'\n    },\n    fontSize: 'large',\n    onClick: () => actionsGroupProduct.updateSelectNum(value + 1)\n  }))), __jsx(Price, null, __jsx(\"main\", null, __jsx(\"header\", null, dealMoney(((_product$priceOut = product.priceOut) !== null && _product$priceOut !== void 0 ? _product$priceOut : 0) * stateGroupProduct.selectNum)), __jsx(\"footer\", null, ls('折后价格'))), __jsx(\"div\", null, \"=\"), __jsx(\"section\", null, __jsx(\"header\", null, dealMoney(((_product$priceOut2 = product.priceOut) !== null && _product$priceOut2 !== void 0 ? _product$priceOut2 : 0) * stateGroupProduct.selectNum)), __jsx(\"footer\", null, ls('基准价格'))), __jsx(\"div\", null, \"x\"), __jsx(\"section\", null, __jsx(\"header\", null, \"1\"), __jsx(\"footer\", null, ls('份数折扣'))), __jsx(\"div\", null, \"x\"), __jsx(\"section\", null, __jsx(\"header\", null, \"1\"), __jsx(\"footer\", null, ls('成团折上折'))))), __jsx(Submit, null, \"\\u53BB\\u7ED3\\u7B97\"));\n};","map":null,"metadata":{},"sourceType":"module"}