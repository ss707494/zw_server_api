{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\code\\\\zw\\\\zw_client_web\\\\utils\\\\view\\\\me\\\\orderDetail\\\\orderDetail.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { HeaderTitle } from '../../../components/HeaderTitle/HeaderTitle';\nimport { BScroller } from '../../../components/BScroll/BScroller';\nimport styled from 'styled-components';\nimport { modelFactory } from '../../../ModelAction/modelUtil';\nimport { doc } from '../../../graphqlTypes/doc';\nimport { dealMoney, formatDate, fpMergePre } from '../../../tools/utils';\nimport { useStoreModel } from '../../../ModelAction/useStore';\nimport { useRouter } from 'next/router';\nimport { ls } from '../../../tools/dealKey';\nimport { orderStateToString, PickUpTypeEnum } from '../../../ss_common/enum';\nimport { mpStyle } from '../../../style/common';\nimport { grey } from '@material-ui/core/colors';\nimport { dealImgUrl } from '../../../tools/img';\nimport { Button } from '@material-ui/core';\nexport var orderDetailModel = modelFactory('orderDetail', {\n  orderInfo: {},\n  selfAddress: []\n}, {\n  getDetail: function () {\n    var _getDetail = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value, option) {\n      var _res$selfAddress, _res$selfAddress$valu;\n\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return option.query(doc.orderDetail, {\n                id: value\n              });\n\n            case 2:\n              res = _context.sent;\n              option.setData(fpMergePre({\n                orderInfo: (res === null || res === void 0 ? void 0 : res.orderDetail) || {},\n                selfAddress: (res === null || res === void 0 ? void 0 : (_res$selfAddress = res.selfAddress) === null || _res$selfAddress === void 0 ? void 0 : (_res$selfAddress$valu = _res$selfAddress.value) === null || _res$selfAddress$valu === void 0 ? void 0 : _res$selfAddress$valu.list) || []\n              }));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function getDetail(_x, _x2) {\n      return _getDetail.apply(this, arguments);\n    }\n\n    return getDetail;\n  }(),\n  updateOrder: function () {\n    var _updateOrder = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value, option) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return option.mutate(doc.updateOrder, {\n                orderInfoItemInput: value\n              });\n\n            case 2:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    function updateOrder(_x3, _x4) {\n      return _updateOrder.apply(this, arguments);\n    }\n\n    return updateOrder;\n  }()\n});\nvar Box = styled.div.withConfig({\n  displayName: \"orderDetail__Box\",\n  componentId: \"lz0d8y-0\"\n})([\"padding:0 20px;\"]);\n_c = Box;\nvar Top = styled.div.withConfig({\n  displayName: \"orderDetail__Top\",\n  componentId: \"lz0d8y-1\"\n})([\"margin-top:10px;font-size:18px;display:flex;> aside{margin-left:20px;color:\", \";}\"], mpStyle.red);\n_c2 = Top;\nvar InfoLabel = styled.div.withConfig({\n  displayName: \"orderDetail__InfoLabel\",\n  componentId: \"lz0d8y-2\"\n})([\"display:flex;margin-top:16px;> aside{color:\", \";width:80px;}\"], grey[600]);\n_c3 = InfoLabel;\nvar GreyPart = styled.div.withConfig({\n  displayName: \"orderDetail__GreyPart\",\n  componentId: \"lz0d8y-3\"\n})([\"margin-top:12px;position:relative;left:-20px;width:100vw;height:12px;background:\", \";\"], grey[200]);\n_c4 = GreyPart;\nvar ProductBox = styled.div.withConfig({\n  displayName: \"orderDetail__ProductBox\",\n  componentId: \"lz0d8y-4\"\n})([\"display:grid;padding-top:4vw;margin-bottom:10px;grid-template-columns:min-content 1fr 30vw;> img{grid-area:1/1/4/2;width:20vw;height:20vw;margin-right:14px;}> section{grid-area:1/2/2/4;font-size:20px;}> main{padding:10px 0;grid-area:2/2/3/4;font-size:14px;color:\", \";}> footer{display:flex;> aside{text-decoration:line-through;}> span{margin-left:5px;color:\", \";font-size:17px;}}> aside{> button{border-radius:10px;padding:2px 14px;}}\"], grey[500], mpStyle.red);\n_c5 = ProductBox;\nvar Sum = styled.div.withConfig({\n  displayName: \"orderDetail__Sum\",\n  componentId: \"lz0d8y-5\"\n})([\"display:flex;justify-content:space-between;margin-bottom:12px;\"]);\n_c6 = Sum;\nexport var OrderDetail = function OrderDetail() {\n  _s();\n\n  var _orderInfo$userAddres, _orderInfo$userPayCar, _orderInfo$userPayCar2, _orderInfo$userPayCar3, _orderInfo$rOrderProd;\n\n  var router = useRouter();\n\n  var _useStoreModel = useStoreModel(orderDetailModel),\n      stateOD = _useStoreModel.state,\n      actionsOD = _useStoreModel.actions;\n\n  var orderInfo = stateOD.orderInfo;\n  useEffect(function () {\n    var _stateOD$orderInfo;\n\n    if (router.query.id && !((_stateOD$orderInfo = stateOD.orderInfo) === null || _stateOD$orderInfo === void 0 ? void 0 : _stateOD$orderInfo.id)) {\n      var _router$query;\n\n      actionsOD.getDetail(\"\".concat((_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.id));\n    }\n  }, [router.query.id, stateOD.orderInfo]);\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 10\n    }\n  }, __jsx(HeaderTitle, {\n    title: '订单详情',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }\n  }), !(orderInfo === null || orderInfo === void 0 ? void 0 : orderInfo.id) ? __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 23\n    }\n  }) : __jsx(BScroller, {\n    boxHeight: 'calc(100vh - 60px)',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 32\n    }\n  }, __jsx(Box, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, __jsx(Top, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, __jsx(\"section\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, ls(formatDate(orderInfo.createTime))), __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, orderStateToString(orderInfo === null || orderInfo === void 0 ? void 0 : orderInfo.state))), __jsx(InfoLabel, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, ls('送货地址'), \" :\"), __jsx(\"section\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, orderInfo.pickUpType === PickUpTypeEnum.Self && function (v) {\n    return \"\".concat(v.province, \" \").concat(v.city, \" \").concat(v.streetAddress);\n  }(stateOD.selfAddress.find(function (v) {\n    return v.id === orderInfo.selfAddressId;\n  })) || ((_orderInfo$userAddres = orderInfo.userAddress) === null || _orderInfo$userAddres === void 0 ? void 0 : _orderInfo$userAddres.combineAddress))), __jsx(InfoLabel, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, ls('订单编号'), \" :\"), __jsx(\"section\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, orderInfo.number)), __jsx(InfoLabel, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, ls('支付方式'), \" :\"), __jsx(\"section\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }, __jsx(\"header\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, orderInfo === null || orderInfo === void 0 ? void 0 : (_orderInfo$userPayCar = orderInfo.userPayCard) === null || _orderInfo$userPayCar === void 0 ? void 0 : _orderInfo$userPayCar.code), __jsx(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, formatDate(orderInfo === null || orderInfo === void 0 ? void 0 : (_orderInfo$userPayCar2 = orderInfo.userPayCard) === null || _orderInfo$userPayCar2 === void 0 ? void 0 : _orderInfo$userPayCar2.expirationTime, 'MM/yy')), __jsx(\"footer\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, orderInfo === null || orderInfo === void 0 ? void 0 : (_orderInfo$userPayCar3 = orderInfo.userPayCard) === null || _orderInfo$userPayCar3 === void 0 ? void 0 : _orderInfo$userPayCar3.userName))), __jsx(GreyPart, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }), (_orderInfo$rOrderProd = orderInfo.rOrderProduct) === null || _orderInfo$rOrderProd === void 0 ? void 0 : _orderInfo$rOrderProd.map(function (rOrderProduct) {\n    var _rOrderProduct$produc, _rOrderProduct$produc2, _rOrderProduct$produc3, _rOrderProduct$produc4, _rOrderProduct$produc5, _rOrderProduct$produc6;\n\n    return __jsx(ProductBox, {\n      key: \"ProductBox_\".concat(rOrderProduct.id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }\n    }, __jsx(\"img\", {\n      src: dealImgUrl((_rOrderProduct$produc = rOrderProduct.product) === null || _rOrderProduct$produc === void 0 ? void 0 : (_rOrderProduct$produc2 = _rOrderProduct$produc.img) === null || _rOrderProduct$produc2 === void 0 ? void 0 : (_rOrderProduct$produc3 = _rOrderProduct$produc2[0]) === null || _rOrderProduct$produc3 === void 0 ? void 0 : _rOrderProduct$produc3.url),\n      alt: \"\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }\n    }), __jsx(\"section\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }\n    }, (_rOrderProduct$produc4 = rOrderProduct.product) === null || _rOrderProduct$produc4 === void 0 ? void 0 : _rOrderProduct$produc4.name), __jsx(\"main\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, \"\\u72EC\\u7ACB\\u5305\\u88C5\"), __jsx(\"footer\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 15\n      }\n    }, __jsx(\"aside\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, dealMoney((_rOrderProduct$produc5 = rOrderProduct.product) === null || _rOrderProduct$produc5 === void 0 ? void 0 : _rOrderProduct$produc5.priceMarket)), __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, dealMoney((_rOrderProduct$produc6 = rOrderProduct.product) === null || _rOrderProduct$produc6 === void 0 ? void 0 : _rOrderProduct$produc6.priceOut))), __jsx(\"aside\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }\n    }, __jsx(Button, {\n      variant: 'contained',\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, ls('加入购物车'))));\n  }), __jsx(\"div\", {\n    style: {\n      height: '26px',\n      width: '100%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }), __jsx(Sum, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }, ls('小计')), __jsx(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, dealMoney(orderInfo.subtotal))), __jsx(Sum, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, ls('优惠券折扣')), __jsx(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, dealMoney(0, '-'))), __jsx(Sum, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }, ls('运费')), __jsx(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }, dealMoney(orderInfo.transportationCosts))), __jsx(Sum, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, ls('达人币抵扣')), __jsx(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }, dealMoney(orderInfo.deductCoin, '-'))), __jsx(Sum, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }, __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }, ls('消费税')), __jsx(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 11\n    }\n  }, dealMoney(orderInfo.saleTax))), __jsx(Sum, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  }, __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 11\n    }\n  }, ls('实际支付')), __jsx(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }, dealMoney(orderInfo.actuallyPaid))), __jsx(Sum, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }, __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 11\n    }\n  }, ls('获得达人币')), __jsx(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }, dealMoney(orderInfo.generateCoin))), __jsx(\"div\", {\n    style: {\n      height: '96px',\n      width: '100%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }))));\n};\n\n_s(OrderDetail, \"0hzXqr0SotEPIUi/kg5ze3kqMP0=\", false, function () {\n  return [useRouter, useStoreModel];\n});\n\n_c7 = OrderDetail;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"Box\");\n$RefreshReg$(_c2, \"Top\");\n$RefreshReg$(_c3, \"InfoLabel\");\n$RefreshReg$(_c4, \"GreyPart\");\n$RefreshReg$(_c5, \"ProductBox\");\n$RefreshReg$(_c6, \"Sum\");\n$RefreshReg$(_c7, \"OrderDetail\");","map":{"version":3,"sources":["D:/code/zw/zw_client_web/utils/view/me/orderDetail/orderDetail.tsx"],"names":["React","useEffect","HeaderTitle","BScroller","styled","modelFactory","doc","dealMoney","formatDate","fpMergePre","useStoreModel","useRouter","ls","orderStateToString","PickUpTypeEnum","mpStyle","grey","dealImgUrl","Button","orderDetailModel","orderInfo","selfAddress","getDetail","value","option","query","orderDetail","id","res","setData","list","updateOrder","mutate","orderInfoItemInput","Box","div","Top","red","InfoLabel","GreyPart","ProductBox","Sum","OrderDetail","router","stateOD","state","actionsOD","actions","createTime","pickUpType","Self","v","province","city","streetAddress","find","selfAddressId","userAddress","combineAddress","number","userPayCard","code","expirationTime","userName","rOrderProduct","map","product","img","url","name","priceMarket","priceOut","height","width","subtotal","transportationCosts","deductCoin","saleTax","actuallyPaid","generateCoin"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react'\r\nimport {HeaderTitle} from '../../../components/HeaderTitle/HeaderTitle'\r\nimport {BScroller} from '../../../components/BScroll/BScroller'\r\nimport styled from 'styled-components'\r\nimport {modelFactory} from '../../../ModelAction/modelUtil'\r\nimport {OrderInfo, OrderInfoItemInput} from '../../../graphqlTypes/types'\r\nimport {doc} from '../../../graphqlTypes/doc'\r\nimport {dealMoney, formatDate, fpMergePre} from '../../../tools/utils'\r\nimport {useStoreModel} from '../../../ModelAction/useStore'\r\nimport {useRouter} from 'next/router'\r\nimport {ls} from '../../../tools/dealKey'\r\nimport {orderStateToString, PickUpTypeEnum} from '../../../ss_common/enum'\r\nimport {mpStyle} from '../../../style/common'\r\nimport {grey} from '@material-ui/core/colors'\r\nimport {dealImgUrl} from '../../../tools/img'\r\nimport {Button} from '@material-ui/core'\r\n\r\nexport const orderDetailModel = modelFactory('orderDetail', {\r\n  orderInfo: {} as OrderInfo,\r\n  selfAddress: [] as any[],\r\n}, {\r\n  getDetail: async (value: string, option) => {\r\n    const res = await option.query(doc.orderDetail, {id: value})\r\n    option.setData(fpMergePre({\r\n      orderInfo: res?.orderDetail || {},\r\n      selfAddress: res?.selfAddress?.value?.list || [],\r\n    }))\r\n  },\r\n  updateOrder: async (value: OrderInfoItemInput, option) => {\r\n    return await option.mutate(doc.updateOrder, {\r\n      orderInfoItemInput: value,\r\n    })\r\n  },\r\n})\r\n\r\nconst Box = styled.div`\r\n  padding: 0 20px;\r\n`\r\nconst Top = styled.div`\r\n  margin-top: 10px;\r\n  font-size: 18px;\r\n  display: flex;\r\n  > aside {\r\n    margin-left: 20px;\r\n    color: ${mpStyle.red};\r\n  }\r\n`\r\nconst InfoLabel = styled.div`\r\n  display: flex;\r\n  margin-top: 16px;\r\n  > aside {\r\n    color: ${grey[600]};\r\n    width: 80px;\r\n  }\r\n  \r\n`\r\n\r\nconst GreyPart = styled.div`\r\n  margin-top: 12px;\r\n  position: relative;\r\n  left: -20px;\r\n  width: 100vw;\r\n  height: 12px;\r\n  background: ${grey[200]};\r\n`\r\nconst ProductBox = styled.div`\r\n  display: grid;\r\n  padding-top: 4vw;\r\n  margin-bottom: 10px;\r\n  grid-template-columns: min-content 1fr 30vw;\r\n  > img {\r\n    grid-area: 1/1/4/2;\r\n    width: 20vw;\r\n    height: 20vw;\r\n    margin-right: 14px;\r\n  }\r\n  > section {\r\n    grid-area: 1/2/2/4;\r\n    font-size: 20px;\r\n  }\r\n  > main {\r\n    padding: 10px 0;\r\n    grid-area: 2/2/3/4;\r\n    font-size: 14px;\r\n    color: ${grey[500]};\r\n  }\r\n  > footer {\r\n    display: flex;\r\n    > aside {\r\n      text-decoration: line-through;\r\n    }\r\n    > span {\r\n      margin-left: 5px;\r\n      color: ${mpStyle.red};\r\n      font-size: 17px;\r\n    }\r\n  }\r\n  > aside {\r\n    > button {\r\n      border-radius: 10px;\r\n      padding: 2px 14px;\r\n    }\r\n  }\r\n`\r\nconst Sum = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 12px;\r\n`\r\n\r\nexport const OrderDetail = () => {\r\n  const router = useRouter()\r\n  const {state: stateOD, actions: actionsOD} = useStoreModel(orderDetailModel)\r\n  const orderInfo = stateOD.orderInfo\r\n\r\n  useEffect(() => {\r\n    if (router.query.id && !stateOD.orderInfo?.id) {\r\n      actionsOD.getDetail(`${router.query?.id}`)\r\n    }\r\n  }, [router.query.id, stateOD.orderInfo])\r\n\r\n  return <div>\r\n    <HeaderTitle\r\n        title={'订单详情'}\r\n    />\r\n    {!orderInfo?.id ? <div/> : <BScroller boxHeight={'calc(100vh - 60px)'}>\r\n      <Box>\r\n        <Top>\r\n          <section>{ls(formatDate(orderInfo.createTime))}</section>\r\n          <aside>{orderStateToString(orderInfo?.state)}</aside>\r\n        </Top>\r\n        <InfoLabel>\r\n          <aside>{ls('送货地址')} :</aside>\r\n          <section>\r\n            {(orderInfo.pickUpType === PickUpTypeEnum.Self &&\r\n                (v => `${v.province} ${v.city} ${v.streetAddress}`)(stateOD.selfAddress.find(v => v.id === orderInfo.selfAddressId))\r\n            ) || orderInfo.userAddress?.combineAddress}\r\n          </section>\r\n        </InfoLabel>\r\n        <InfoLabel>\r\n          <aside>{ls('订单编号')} :</aside>\r\n          <section>{orderInfo.number}</section>\r\n        </InfoLabel>\r\n        <InfoLabel>\r\n          <aside>{ls('支付方式')} :</aside>\r\n          <section>\r\n            <header>{orderInfo?.userPayCard?.code}</header>\r\n            <main>{formatDate(orderInfo?.userPayCard?.expirationTime, 'MM/yy')}</main>\r\n            <footer>{orderInfo?.userPayCard?.userName}</footer>\r\n          </section>\r\n        </InfoLabel>\r\n        <GreyPart/>\r\n        {orderInfo.rOrderProduct?.map(rOrderProduct => (\r\n            <ProductBox\r\n                key={`ProductBox_${rOrderProduct.id}`}\r\n            >\r\n              <img src={dealImgUrl(rOrderProduct.product?.img?.[0]?.url)}\r\n                   alt=\"\"/>\r\n              <section>{rOrderProduct.product?.name}</section>\r\n              <main>独立包装</main>\r\n              <footer>\r\n                <aside>{dealMoney(rOrderProduct.product?.priceMarket)}</aside>\r\n                <span>{dealMoney(rOrderProduct.product?.priceOut)}</span>\r\n              </footer>\r\n              <aside>\r\n                <Button\r\n                    variant={'contained'}\r\n                >{ls('加入购物车')}</Button>\r\n              </aside>\r\n            </ProductBox>\r\n        ))}\r\n        <div style={{height: '26px', width: '100%'}}/>\r\n        <Sum>\r\n          <aside>{ls('小计')}</aside>\r\n          <main>{dealMoney(orderInfo.subtotal)}</main>\r\n        </Sum>\r\n        <Sum>\r\n          <aside>{ls('优惠券折扣')}</aside>\r\n          <main>{dealMoney(0, '-')}</main>\r\n        </Sum>\r\n        <Sum>\r\n          <aside>{ls('运费')}</aside>\r\n          <main>{dealMoney(orderInfo.transportationCosts)}</main>\r\n        </Sum>\r\n        <Sum>\r\n          <aside>{ls('达人币抵扣')}</aside>\r\n          <main>{dealMoney(orderInfo.deductCoin, '-')}</main>\r\n        </Sum>\r\n        <Sum>\r\n          <aside>{ls('消费税')}</aside>\r\n          <main>{dealMoney(orderInfo.saleTax)}</main>\r\n        </Sum>\r\n        <Sum>\r\n          <aside>{ls('实际支付')}</aside>\r\n          <main>{dealMoney(orderInfo.actuallyPaid)}</main>\r\n        </Sum>\r\n        <Sum>\r\n          <aside>{ls('获得达人币')}</aside>\r\n          <main>{dealMoney(orderInfo.generateCoin)}</main>\r\n        </Sum>\r\n        <div style={{height: '96px', width: '100%'}}/>\r\n      </Box>\r\n    </BScroller>}\r\n\r\n  </div>\r\n}\r\n"]},"metadata":{},"sourceType":"module"}