{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport EditIcon from '@material-ui/icons/Edit';\nimport StreetviewIcon from '@material-ui/icons/Streetview';\nimport { HeaderTitle } from '../../../../components/HeaderTitle/HeaderTitle';\nimport { modelFactory } from '../../../../ModelAction/modelUtil';\nimport { doc } from '../../../../graphqlTypes/doc';\nimport { fpMergePre } from '../../../../tools/utils';\nimport { useStoreModel } from '../../../../ModelAction/useStore';\nimport styled from 'styled-components';\nimport { Button, IconButton } from '@material-ui/core';\nimport { ls } from '../../../../tools/dealKey';\nimport { grey } from '@material-ui/core/colors';\nimport { useRouter } from 'next/router';\nimport { showMessage } from '../../../../components/Message/Message';\nimport { mpStyle } from '../../../../style/common';\nvar myAddressModel = modelFactory('myAddressModel', {\n  list: []\n}, {\n  getList: function () {\n    var _getList = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value, option) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return option.query(doc.userAddressListOneUser);\n\n            case 2:\n              res = _context.sent;\n              option.setData(fpMergePre({\n                list: res === null || res === void 0 ? void 0 : res.userAddressListOneUser\n              }));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function getList(_x, _x2) {\n      return _getList.apply(this, arguments);\n    }\n\n    return getList;\n  }(),\n  setDefault: function () {\n    var _setDefault = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value, option) {\n      var _res$setUserAddressDe;\n\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return option.mutate(doc.setUserAddressDefault, {\n                data: {\n                  id: value.id\n                }\n              });\n\n            case 2:\n              res = _context2.sent;\n\n              if (res === null || res === void 0 ? void 0 : (_res$setUserAddressDe = res.setUserAddressDefault) === null || _res$setUserAddressDe === void 0 ? void 0 : _res$setUserAddressDe.id) {\n                showMessage('操作成功');\n              }\n\n              return _context2.abrupt(\"return\", res);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    function setDefault(_x3, _x4) {\n      return _setDefault.apply(this, arguments);\n    }\n\n    return setDefault;\n  }()\n});\nvar ListBox = styled.div.withConfig({\n  displayName: \"list__ListBox\",\n  componentId: \"xu47ow-0\"\n})([\"\"]);\nvar ListItem = styled.div.withConfig({\n  displayName: \"list__ListItem\",\n  componentId: \"xu47ow-1\"\n})([\"display:flex;height:80px;align-items:center;padding-left:20px;border-bottom:1px solid \", \";> svg{}> main{margin-left:10px;flex-grow:1;}\"], grey[200]);\nexport var DefaultBox = styled.div.withConfig({\n  displayName: \"list__DefaultBox\",\n  componentId: \"xu47ow-2\"\n})([\"padding:4px 16px;background:\", \";color:white;border-radius:14px;display:inline-flex;\"], mpStyle.red);\nexport var MyAddress = function MyAddress() {\n  var router = useRouter();\n\n  var _useStoreModel = useStoreModel(myAddressModel),\n      stateMAM = _useStoreModel.state,\n      actionsMAM = _useStoreModel.actions;\n\n  useEffect(function () {\n    actionsMAM.getList();\n  }, []);\n  return __jsx(\"div\", null, __jsx(HeaderTitle, {\n    title: '我的地址'\n  }), __jsx(ListBox, null, stateMAM.list.map(function (value) {\n    return __jsx(ListItem, {\n      key: \"myAddress_\".concat(value.id)\n    }, __jsx(StreetviewIcon, {\n      fontSize: 'large'\n    }), __jsx(\"main\", null, __jsx(\"header\", null, value.name), __jsx(\"footer\", null, value.combineAddress)), __jsx(\"aside\", null, value.isDefault && __jsx(DefaultBox, {\n      style: {\n        fontSize: '14px'\n      }\n    }, ls('默认')) || __jsx(Button, {\n      size: 'small',\n      color: 'secondary',\n      variant: 'outlined',\n      onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _yield$actionsMAM$set, _yield$actionsMAM$set2;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return actionsMAM.setDefault(value);\n\n              case 2:\n                _context3.t1 = _yield$actionsMAM$set = _context3.sent;\n                _context3.t0 = _context3.t1 === null;\n\n                if (_context3.t0) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                _context3.t0 = _yield$actionsMAM$set === void 0;\n\n              case 6:\n                if (!_context3.t0) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                _context3.t2 = void 0;\n                _context3.next = 11;\n                break;\n\n              case 10:\n                _context3.t2 = (_yield$actionsMAM$set2 = _yield$actionsMAM$set.setUserAddressDefault) === null || _yield$actionsMAM$set2 === void 0 ? void 0 : _yield$actionsMAM$set2.id;\n\n              case 11:\n                if (!_context3.t2) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                actionsMAM.getList();\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))\n    }, ls('设为默认')), __jsx(IconButton, {\n      onClick: function onClick() {\n        return router.push('/m/me/myAddress/edit/[id]', \"/m/me/myAddress/edit/\".concat(value.id));\n      }\n    }, __jsx(EditIcon, null))));\n  })), __jsx(\"div\", {\n    style: {\n      padding: '0 20px',\n      marginTop: '20px'\n    }\n  }, __jsx(Button, {\n    fullWidth: true,\n    variant: 'contained',\n    color: 'secondary',\n    onClick: function onClick() {\n      return router.push('/m/me/myAddress/edit/[id]', \"/m/me/myAddress/edit/0\");\n    }\n  }, ls('新增'))));\n};","map":null,"metadata":{},"sourceType":"module"}