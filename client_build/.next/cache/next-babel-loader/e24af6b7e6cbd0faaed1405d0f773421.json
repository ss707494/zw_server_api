{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { MeLayoutBox } from '../components/meLayoutBox';\nimport { MyInfo } from '../components/myInfo';\nimport { Space } from '../../../../components/Box/Box';\nimport { mpStyle } from '../../../../style/common';\nimport styled from 'styled-components';\nimport { ll } from '../../../../tools/dealKey';\nimport { useRouter } from 'next/router';\nimport { useStoreModel } from '../../../../ModelAction/useStore';\nimport { orderDetailModel } from '../../../m/me/orderDetail/orderDetail';\nimport { PickUpTypeEnum } from '../../../../ss_common/enum';\nimport { dealLastNumber, dealMoney, formatDate } from '../../../../tools/utils';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport { calcAddress, OrderAddressBox, SelfAddressModel } from '../orderHistory/orderHistory';\nimport { Divider } from '@material-ui/core';\nimport { OrderProductBox } from '../components/orderProductBox';\nconst Title = styled.div.withConfig({\n  displayName: \"orderDetail__Title\",\n  componentId: \"sc-1n7yziu-0\"\n})([\"\", \";\"], mpStyle.fontType.l);\nconst InfoBox = styled.div.withConfig({\n  displayName: \"orderDetail__InfoBox\",\n  componentId: \"sc-1n7yziu-1\"\n})([\"display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:min-content min-content;grid-auto-flow:column;grid-gap:\", \";padding:\", \";border:1px solid \", \";> section{> header{font-weight:bold;margin-bottom:\", \";}}\"], mpStyle.spacePx.xs, mpStyle.spacePx.xs, mpStyle.grey, mpStyle.spacePx.xxs);\nconst ProductBox = styled.div.withConfig({\n  displayName: \"orderDetail__ProductBox\",\n  componentId: \"sc-1n7yziu-2\"\n})([\"display:flex;> section{flex-grow:1;}> aside{flex-basis:320px;> header{\", \";}}\"], mpStyle.fontType.n);\nconst TotalBox = styled.div.withConfig({\n  displayName: \"orderDetail__TotalBox\",\n  componentId: \"sc-1n7yziu-3\"\n})([\"padding:\", \";border:1px solid \", \";border-radius:4px;> section{display:flex;justify-content:space-between;align-items:center;}\"], mpStyle.spacePx.xs, mpStyle.grey);\nconst BoldBox = styled.section.withConfig({\n  displayName: \"orderDetail__BoldBox\",\n  componentId: \"sc-1n7yziu-4\"\n})([\"font-weight:bold;\"]);\nexport const OrderDetail = () => {\n  var _orderInfo$userAddres, _orderInfo$userAddres2, _orderInfo$userAddres3, _orderInfo$userAddres4, _orderInfo$userAddres5, _orderInfo$userPayCar, _orderInfo$userPayCar2, _orderInfo$userPayCar3, _orderInfo$userPayCar4, _calcAddress$name, _calcAddress, _orderInfo$rOrderProd;\n\n  const router = useRouter();\n  const {\n    state: stateOrderDetailModel,\n    actions: actionsOrderDetailModel\n  } = useStoreModel(orderDetailModel);\n  const orderInfo = stateOrderDetailModel.orderInfo;\n  useEffect(() => {\n    var _stateOrderDetailMode;\n\n    if (router.query.id && !((_stateOrderDetailMode = stateOrderDetailModel.orderInfo) === null || _stateOrderDetailMode === void 0 ? void 0 : _stateOrderDetailMode.id)) {\n      var _router$query;\n\n      actionsOrderDetailModel.getDetail(`${(_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.id}`);\n    }\n  }, [router.query.id, stateOrderDetailModel.orderInfo]);\n  const {\n    actions: actionsSelfAddressModel,\n    state: stateSelfAddressModel\n  } = useStoreModel(SelfAddressModel);\n  useEffect(() => {\n    actionsSelfAddressModel.getList();\n  }, []);\n  return __jsx(MeLayoutBox, null, __jsx(MyInfo, null), __jsx(Space, {\n    h: mpStyle.space.n\n  }), __jsx(Title, null, ll('订单历史'), \" > \", ll('订单详情')), __jsx(Space, {\n    h: mpStyle.space.n\n  }), __jsx(InfoBox, null, __jsx(\"section\", null, __jsx(\"header\", null, ll('订单编号')), __jsx(\"main\", null, orderInfo.number)), __jsx(\"section\", null, __jsx(\"header\", null, ll('取货地址')), __jsx(\"main\", null, orderInfo.pickUpType === PickUpTypeEnum.Self && (v => __jsx(React.Fragment, null, __jsx(\"main\", null, v.fullName), __jsx(Space, {\n    h: mpStyle.space.xxs / 2\n  }), __jsx(\"header\", null, v.streetAddress), __jsx(Space, {\n    h: mpStyle.space.xxs / 2\n  }), __jsx(\"footer\", null, v.city, \" \", v.province, \" \", v.zip)))(stateOrderDetailModel.selfAddress.find(v => v.id === orderInfo.selfAddressId)) || __jsx(React.Fragment, null, __jsx(\"main\", null, (_orderInfo$userAddres = orderInfo.userAddress) === null || _orderInfo$userAddres === void 0 ? void 0 : _orderInfo$userAddres.name), __jsx(Space, {\n    h: mpStyle.space.xxs / 2\n  }), __jsx(\"header\", null, (_orderInfo$userAddres2 = orderInfo.userAddress) === null || _orderInfo$userAddres2 === void 0 ? void 0 : _orderInfo$userAddres2.address), __jsx(Space, {\n    h: mpStyle.space.xxs / 2\n  }), __jsx(\"footer\", null, (_orderInfo$userAddres3 = orderInfo.userAddress) === null || _orderInfo$userAddres3 === void 0 ? void 0 : _orderInfo$userAddres3.city, \" \", (_orderInfo$userAddres4 = orderInfo.userAddress) === null || _orderInfo$userAddres4 === void 0 ? void 0 : _orderInfo$userAddres4.province, \" \", (_orderInfo$userAddres5 = orderInfo.userAddress) === null || _orderInfo$userAddres5 === void 0 ? void 0 : _orderInfo$userAddres5.zip)))), __jsx(\"section\", null, __jsx(\"header\", null, ll('交易时间')), __jsx(\"main\", null, formatDate(orderInfo.createTime, 'YYYY/MM/dd'))), __jsx(\"section\", null, __jsx(\"header\", null, ll('支付方式')), __jsx(\"main\", null, __jsx(\"header\", null, orderInfo === null || orderInfo === void 0 ? void 0 : (_orderInfo$userPayCar = orderInfo.userPayCard) === null || _orderInfo$userPayCar === void 0 ? void 0 : _orderInfo$userPayCar.code), __jsx(Space, {\n    h: mpStyle.space.xxs / 2\n  }), __jsx(\"main\", null, ll('过期日'), \" \", formatDate(orderInfo === null || orderInfo === void 0 ? void 0 : (_orderInfo$userPayCar2 = orderInfo.userPayCard) === null || _orderInfo$userPayCar2 === void 0 ? void 0 : _orderInfo$userPayCar2.expirationTime, 'MM/yy')), __jsx(Space, {\n    h: mpStyle.space.xxs / 2\n  }), __jsx(\"footer\", null, ll('卡号'), \" \", dealLastNumber((_orderInfo$userPayCar3 = orderInfo.userPayCard) === null || _orderInfo$userPayCar3 === void 0 ? void 0 : _orderInfo$userPayCar3.number)), __jsx(Space, {\n    h: mpStyle.space.xxs / 2\n  }), __jsx(\"footer\", null, ll('持卡人'), \" \", orderInfo === null || orderInfo === void 0 ? void 0 : (_orderInfo$userPayCar4 = orderInfo.userPayCard) === null || _orderInfo$userPayCar4 === void 0 ? void 0 : _orderInfo$userPayCar4.userName)))), __jsx(Space, {\n    h: mpStyle.space.n\n  }), __jsx(ProductBox, null, __jsx(\"section\", null, __jsx(OrderAddressBox, null, __jsx(CheckCircleIcon, null), __jsx(\"section\", null, ll('已自取')), __jsx(\"footer\", null, ll('于'), (_calcAddress$name = (_calcAddress = calcAddress(orderInfo, stateSelfAddressModel.list)) === null || _calcAddress === void 0 ? void 0 : _calcAddress.name) !== null && _calcAddress$name !== void 0 ? _calcAddress$name : '')), __jsx(Space, {\n    h: mpStyle.space.xs\n  }), __jsx(Divider, null), __jsx(Space, {\n    h: mpStyle.space.xs\n  }), (_orderInfo$rOrderProd = orderInfo.rOrderProduct) === null || _orderInfo$rOrderProd === void 0 ? void 0 : _orderInfo$rOrderProd.map(rOrderProduct => __jsx(OrderProductBox, {\n    key: `orderInfo.rOrderProduct${rOrderProduct.id}`,\n    rOrderProduct: rOrderProduct\n  }))), __jsx(Space, {\n    w: mpStyle.space.xs\n  }), __jsx(\"aside\", null, __jsx(\"header\", null, ll('订单结算')), __jsx(Space, {\n    h: mpStyle.space.xs\n  }), __jsx(TotalBox, null, __jsx(\"section\", null, __jsx(\"aside\", null, ll('小计')), __jsx(\"main\", null, dealMoney(orderInfo.subtotal))), __jsx(Space, {\n    h: mpStyle.space.xs\n  }), __jsx(\"section\", null, __jsx(\"aside\", null, ll('优惠券折扣')), __jsx(\"main\", null, dealMoney(0, '-'))), __jsx(Space, {\n    h: mpStyle.space.xs\n  }), __jsx(\"section\", null, __jsx(\"aside\", null, ll('运费')), __jsx(\"main\", null, dealMoney(orderInfo.transportationCosts))), __jsx(Space, {\n    h: mpStyle.space.xs\n  }), __jsx(\"section\", null, __jsx(\"aside\", null, ll('达人币抵扣')), __jsx(\"main\", null, dealMoney(orderInfo.deductCoin, '-'))), __jsx(Space, {\n    h: mpStyle.space.xs\n  }), __jsx(Divider, null), __jsx(Space, {\n    h: mpStyle.space.xs\n  }), __jsx(BoldBox, null, __jsx(\"aside\", null, ll('实际支付')), __jsx(\"main\", null, dealMoney(orderInfo.actuallyPaid)))))));\n};","map":null,"metadata":{},"sourceType":"module"}