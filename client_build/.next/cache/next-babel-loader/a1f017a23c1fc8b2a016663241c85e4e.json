{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"D:\\\\code\\\\zw\\\\zw_client_web\\\\utils\\\\view\\\\pay\\\\index.tsx\";\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Head from 'next/head';\nimport './mysqpaymentform.css';\nimport { ls } from '../../tools/dealKey';\nexport var Pay = function Pay() {\n  // @ts-ignore\n  var paymentForm = new SqPaymentForm({\n    // Initialize the payment form elements\n    applicationId: \"sandbox-sq0idb-42FQ7wGBwzibToRM9_zdFw\",\n    inputClass: 'sq-input',\n    autoBuild: false,\n    // Customize the CSS for SqPaymentForm iframe elements\n    inputStyles: [{\n      fontSize: '16px',\n      lineHeight: '24px',\n      padding: '16px',\n      placeholderColor: '#a0a0a0',\n      backgroundColor: 'transparent'\n    }],\n    // Initialize the credit card placeholders\n    cardNumber: {\n      elementId: 'sq-card-number',\n      placeholder: 'Card Number'\n    },\n    cvv: {\n      elementId: 'sq-cvv',\n      placeholder: 'CVV'\n    },\n    expirationDate: {\n      elementId: 'sq-expiration-date',\n      placeholder: 'MM/YY'\n    },\n    postalCode: {\n      elementId: 'sq-postal-code',\n      placeholder: 'Postal'\n    },\n    // SqPaymentForm callback functions\n    callbacks: {\n      /*\r\n      * callback function: cardNonceResponseReceived\r\n      * Triggered when: SqPaymentForm completes a card nonce request\r\n      */\n      cardNonceResponseReceived: function cardNonceResponseReceived(errors, nonce, cardData) {\n        if (errors) {\n          // Log errors from nonce generation to the browser developer console.\n          console.error('Encountered errors:');\n          errors.forEach(function (error) {\n            console.error('  ' + error.message);\n          });\n          alert('Encountered errors, check browser developer console for more details');\n          return;\n        } // alert(`The generated nonce is:\\n${nonce}`)\n\n\n        fetch('process-payment', {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            nonce: nonce\n          })\n        })[\"catch\"](function (err) {\n          alert('Network error: ' + err);\n        }).then(function (response) {\n          if (!response.ok) {\n            return response.json().then(function (errorInfo) {\n              return Promise.reject(errorInfo);\n            }); //UPDATE HERE\n          }\n\n          return response.json(); //UPDATE HERE\n        }).then(function (data) {\n          console.log(data); //UPDATE HERE\n\n          alert('Payment complete successfully!\\nCheck browser developer console for more details');\n        })[\"catch\"](function (err) {\n          console.error(err);\n          alert('Payment failed to complete!\\nCheck browser developer console for more details');\n        });\n      }\n    }\n  });\n  paymentForm.build(); // onGetCardNonce is triggered when the \"Pay $1.00\" button is clicked\n\n  function onGetCardNonce(event) {\n    // Don't submit the form until SqPaymentForm returns with a nonce\n    event.preventDefault(); // Request a nonce from the SqPaymentForm object\n\n    paymentForm.requestCardNonce();\n  }\n\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 10\n    }\n  }, __jsx(Head, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, __jsx(\"title\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, \"pay\"), __jsx(\"script\", {\n    type: \"text/javascript\",\n    src: \"https://js.squareupsandbox.com/v2/paymentform\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  })), ls('支付'), __jsx(\"div\", {\n    id: \"form-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    id: \"sq-card-number\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"third\",\n    id: \"sq-expiration-date\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"third\",\n    id: \"sq-cvv\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"third\",\n    id: \"sq-postal-code\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }), __jsx(\"button\", {\n    id: \"sq-creditcard\",\n    className: \"button-credit-card\",\n    onClick: onGetCardNonce,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, \"Pay\")));\n};\n_c = Pay;\n\nvar _c;\n\n$RefreshReg$(_c, \"Pay\");","map":{"version":3,"sources":["D:/code/zw/zw_client_web/utils/view/pay/index.tsx"],"names":["React","Head","ls","Pay","paymentForm","SqPaymentForm","applicationId","inputClass","autoBuild","inputStyles","fontSize","lineHeight","padding","placeholderColor","backgroundColor","cardNumber","elementId","placeholder","cvv","expirationDate","postalCode","callbacks","cardNonceResponseReceived","errors","nonce","cardData","console","error","forEach","message","alert","fetch","method","headers","body","JSON","stringify","err","then","response","ok","json","errorInfo","Promise","reject","data","log","build","onGetCardNonce","event","preventDefault","requestCardNonce"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Head from 'next/head'\r\nimport './mysqpaymentform.css'\r\nimport { ls } from '../../tools/dealKey'\r\n\r\nexport const Pay = () => {\r\n  // @ts-ignore\r\n  const paymentForm = new SqPaymentForm({\r\n    // Initialize the payment form elements\r\n    applicationId: \"sandbox-sq0idb-42FQ7wGBwzibToRM9_zdFw\",\r\n    inputClass: 'sq-input',\r\n    autoBuild: false,\r\n    // Customize the CSS for SqPaymentForm iframe elements\r\n    inputStyles: [{\r\n      fontSize: '16px',\r\n      lineHeight: '24px',\r\n      padding: '16px',\r\n      placeholderColor: '#a0a0a0',\r\n      backgroundColor: 'transparent',\r\n    }],\r\n    // Initialize the credit card placeholders\r\n    cardNumber: {\r\n      elementId: 'sq-card-number',\r\n      placeholder: 'Card Number',\r\n    },\r\n    cvv: {\r\n      elementId: 'sq-cvv',\r\n      placeholder: 'CVV',\r\n    },\r\n    expirationDate: {\r\n      elementId: 'sq-expiration-date',\r\n      placeholder: 'MM/YY',\r\n    },\r\n    postalCode: {\r\n      elementId: 'sq-postal-code',\r\n      placeholder: 'Postal',\r\n    },\r\n    // SqPaymentForm callback functions\r\n    callbacks: {\r\n      /*\r\n      * callback function: cardNonceResponseReceived\r\n      * Triggered when: SqPaymentForm completes a card nonce request\r\n      */\r\n      cardNonceResponseReceived: function(errors: any, nonce: any, cardData: any) {\r\n        if (errors) {\r\n          // Log errors from nonce generation to the browser developer console.\r\n          console.error('Encountered errors:')\r\n          errors.forEach(function(error: any) {\r\n            console.error('  ' + error.message)\r\n          })\r\n          alert('Encountered errors, check browser developer console for more details')\r\n          return\r\n        }\r\n        // alert(`The generated nonce is:\\n${nonce}`)\r\n        fetch('process-payment', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            nonce: nonce,\r\n          }),\r\n        })\r\n            .catch(err => {\r\n              alert('Network error: ' + err)\r\n            })\r\n            .then((response: any) => {\r\n              if (!response.ok) {\r\n                return response.json().then((errorInfo: any) => Promise.reject(errorInfo)) //UPDATE HERE\r\n              }\r\n              return response.json() //UPDATE HERE\r\n            })\r\n            .then(data => {\r\n              console.log(data) //UPDATE HERE\r\n              alert('Payment complete successfully!\\nCheck browser developer console for more details')\r\n            })\r\n            .catch(err => {\r\n              console.error(err)\r\n              alert('Payment failed to complete!\\nCheck browser developer console for more details')\r\n            })\r\n      },\r\n    },\r\n  })\r\n  paymentForm.build()\r\n\r\n// onGetCardNonce is triggered when the \"Pay $1.00\" button is clicked\r\n  function onGetCardNonce(event: any) {\r\n    // Don't submit the form until SqPaymentForm returns with a nonce\r\n    event.preventDefault()\r\n    // Request a nonce from the SqPaymentForm object\r\n    paymentForm.requestCardNonce()\r\n  }\r\n\r\n  return <div>\r\n    <Head>\r\n      <title>pay</title>\r\n      <script type=\"text/javascript\"\r\n              src=\"https://js.squareupsandbox.com/v2/paymentform\">\r\n      </script>\r\n    </Head>\r\n    {ls('支付')}\r\n    <div id=\"form-container\">\r\n      <div id=\"sq-card-number\"></div>\r\n      <div className=\"third\"\r\n           id=\"sq-expiration-date\"></div>\r\n      <div className=\"third\"\r\n           id=\"sq-cvv\"></div>\r\n      <div className=\"third\"\r\n           id=\"sq-postal-code\"></div>\r\n      <button id=\"sq-creditcard\"\r\n              className=\"button-credit-card\"\r\n              onClick={onGetCardNonce}>Pay\r\n      </button>\r\n    </div>\r\n  </div>\r\n}\r\n"]},"metadata":{},"sourceType":"module"}