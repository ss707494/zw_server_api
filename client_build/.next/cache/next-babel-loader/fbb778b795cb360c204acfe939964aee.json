{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport EditIcon from '@material-ui/icons/Edit';\nimport StreetviewIcon from '@material-ui/icons/Streetview';\nimport { HeaderTitle } from '../../../../components/HeaderTitle/HeaderTitle';\nimport { modelFactory } from '../../../../ModelAction/modelUtil';\nimport { doc } from '../../../../graphqlTypes/doc';\nimport { fpMergePre } from '../../../../tools/utils';\nimport { useStoreModel } from '../../../../ModelAction/useStore';\nimport styled from 'styled-components';\nimport { Button, IconButton } from '@material-ui/core';\nimport { ls } from '../../../../tools/dealKey';\nimport { grey } from '@material-ui/core/colors';\nimport { useRouter } from 'next/router';\nimport { showMessage } from '../../../../components/Message/Message';\nimport { mpStyle } from '../../../../style/common';\nimport { Space } from '../../../../components/Box/Box';\nexport const myAddressModel = modelFactory('myAddressModel', {\n  list: []\n}, {\n  getList: async (value, option) => {\n    const res = await option.query(doc.userAddressListOneUser);\n    option.setData(fpMergePre({\n      list: res === null || res === void 0 ? void 0 : res.userAddressListOneUser\n    }));\n  },\n  setDefault: async (value, option) => {\n    var _res$setUserAddressDe;\n\n    const res = await option.mutate(doc.setUserAddressDefault, {\n      data: {\n        id: value.id\n      }\n    });\n\n    if (res === null || res === void 0 ? void 0 : (_res$setUserAddressDe = res.setUserAddressDefault) === null || _res$setUserAddressDe === void 0 ? void 0 : _res$setUserAddressDe.id) {\n      showMessage('操作成功');\n    }\n\n    return res;\n  }\n});\nconst ListBox = styled.div.withConfig({\n  displayName: \"list__ListBox\",\n  componentId: \"xu47ow-0\"\n})([\"\"]);\nconst ListItem = styled.div.withConfig({\n  displayName: \"list__ListItem\",\n  componentId: \"xu47ow-1\"\n})([\"display:flex;height:80px;align-items:center;padding-left:20px;border-bottom:1px solid \", \";> svg{}> main{margin-left:10px;flex-grow:1;}\"], grey[200]);\nexport const DefaultBox = styled.div.withConfig({\n  displayName: \"list__DefaultBox\",\n  componentId: \"xu47ow-2\"\n})([\"padding:4px 16px;background:\", \";color:white;border-radius:14px;display:inline-flex;\"], mpStyle.red);\nconst AddressBox = styled.main.withConfig({\n  displayName: \"list__AddressBox\",\n  componentId: \"xu47ow-3\"\n})([\"> footer{font-size:small;color:\", \";}\"], grey[400]);\nexport const MyAddress = () => {\n  const router = useRouter();\n  const {\n    state: stateMAM,\n    actions: actionsMAM\n  } = useStoreModel(myAddressModel);\n  useEffect(() => {\n    actionsMAM.getList();\n  }, []);\n  return __jsx(\"div\", null, __jsx(HeaderTitle, {\n    title: '我的地址'\n  }), __jsx(ListBox, null, stateMAM.list.map(value => __jsx(ListItem, {\n    key: `myAddress_${value.id}`\n  }, __jsx(StreetviewIcon, {\n    fontSize: 'large'\n  }), __jsx(AddressBox, null, __jsx(\"header\", null, value.name), __jsx(Space, {\n    h: 4\n  }), __jsx(\"footer\", null, value.address), __jsx(Space, {\n    h: 4\n  }), __jsx(\"footer\", null, value.city, \" \", value.province, \" \", value.zip)), __jsx(\"aside\", null, value.isDefault && __jsx(DefaultBox, {\n    style: {\n      fontSize: '14px'\n    }\n  }, ls('默认')) || __jsx(Button, {\n    size: 'small',\n    color: 'secondary',\n    variant: 'outlined',\n    onClick: async () => {\n      var _await$actionsMAM$set, _await$actionsMAM$set2;\n\n      if ((_await$actionsMAM$set = await actionsMAM.setDefault(value)) === null || _await$actionsMAM$set === void 0 ? void 0 : (_await$actionsMAM$set2 = _await$actionsMAM$set.setUserAddressDefault) === null || _await$actionsMAM$set2 === void 0 ? void 0 : _await$actionsMAM$set2.id) {\n        actionsMAM.getList();\n      }\n    }\n  }, ls('设为默认')), __jsx(IconButton, {\n    onClick: () => router.push('/m/me/myAddress/edit/[id]', `/m/me/myAddress/edit/${value.id}`)\n  }, __jsx(EditIcon, null)))))), __jsx(\"div\", {\n    style: {\n      padding: '0 20px',\n      marginTop: '20px'\n    }\n  }, __jsx(Button, {\n    fullWidth: true,\n    variant: 'contained',\n    color: 'secondary',\n    onClick: () => router.push('/m/me/myAddress/edit/[id]', `/m/me/myAddress/edit/0`)\n  }, ls('新增'))));\n};","map":null,"metadata":{},"sourceType":"module"}