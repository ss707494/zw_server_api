{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport PersonPinCircleIcon from '@material-ui/icons/PersonPinCircle';\nimport PinDropIcon from '@material-ui/icons/PinDrop';\nimport CardGiftcardIcon from '@material-ui/icons/CardGiftcard';\nimport CardMembershipIcon from '@material-ui/icons/CardMembership';\nimport HistoryIcon from '@material-ui/icons/History';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Button, ButtonBase } from '@material-ui/core';\nimport { meModel } from './model';\nimport { grey, red } from '@material-ui/core/colors';\nimport { useStoreModel } from '../../../ModelAction/useStore';\nimport { ll } from '../../../tools/dealKey';\nimport { FootBar } from '../../../components/FootBar/FootBar';\nimport MonetizationOn from '@material-ui/icons/MonetizationOn';\nimport PaymentIcon from '@material-ui/icons/Payment';\nimport { BScroller } from '../../../components/BScroll/BScroller';\nimport { useRouter } from 'next/router';\nimport { DealNoAuth } from '../../../components/NoAuth/NoAuth';\nimport { ShoppingCartIconButton } from '../../../components/ShoppingCartIconButton/ShoppingCartIconButton';\nimport { cardModel } from '../card/[type]';\nimport { PromoCodeTypeEnum } from '../../../ss_common/enum';\nimport { CoinDetailDialog, CoinDetailDialogModel } from './coinDetailDialog/coinDetailDialog';\nconst BasePadding = styled.div.withConfig({\n  displayName: \"me__BasePadding\",\n  componentId: \"sc-1xspajz-0\"\n})([\"padding:0 20px;\"]);\nconst Box = styled.div.withConfig({\n  displayName: \"me__Box\",\n  componentId: \"sc-1xspajz-1\"\n})([\"\"]);\nconst Header = styled.div.withConfig({\n  displayName: \"me__Header\",\n  componentId: \"sc-1xspajz-2\"\n})([\"display:grid;grid-template-rows:20vh 30px 30px;grid-template-columns:1fr 100px;padding-left:20px;background:\", \";color:#fff;> header{font-size:28px;grid-area:1/1/2/2;align-self:end;margin-bottom:20px;}> aside{grid-area:2/2/4/3;margin-right:20px;}\"], red[400]);\nconst Tab = styled(BasePadding).withConfig({\n  displayName: \"me__Tab\",\n  componentId: \"sc-1xspajz-3\"\n})([\"padding:0 20px;display:flex;justify-content:space-between;\"]);\nconst Card = styled(ButtonBase).withConfig({\n  displayName: \"me__Card\",\n  componentId: \"sc-1xspajz-4\"\n})([\"&&&{display:grid;grid-template-columns:min-content 1fr;align-items:center;padding:20px 0;> svg{grid-area:1/1/3/2;margin-right:5px;}> footer{font-size:12px;}}\"]);\nconst Parting = styled.div.withConfig({\n  displayName: \"me__Parting\",\n  componentId: \"sc-1xspajz-5\"\n})([\"width:1px;height:30px;margin-top:20px;background:\", \";\"], grey[200]);\nconst ListItem = styled(ButtonBase).withConfig({\n  displayName: \"me__ListItem\",\n  componentId: \"sc-1xspajz-6\"\n})([\"&&&{padding:20px;width:100%;display:flex;}> main{text-align:left;font-size:18px;margin-left:10px;flex-grow:1;display:flex;flex-direction:column;justify-content:center;> footer{font-size:14px;color:\", \"}}\"], grey[700]);\nconst ShopIcon = styled.div.withConfig({\n  displayName: \"me__ShopIcon\",\n  componentId: \"sc-1xspajz-7\"\n})([\"align-self:end;justify-self:end;margin:0 16px 16px;\"]);\nexport default function Me() {\n  var _stateMeModel$user$us, _stateMeModel$user$us2, _stateMeModel$user$us3, _stateMeModel$user$or, _stateMeModel$user$or2;\n\n  const router = useRouter();\n  const {\n    actions: actionsCoinDetailDialogModel\n  } = useStoreModel(CoinDetailDialogModel);\n  const {\n    actions: actionsCardModel,\n    state: stateCardModel\n  } = useStoreModel(cardModel);\n  const {\n    state: stateMeModel,\n    actions: actionsMeModel\n  } = useStoreModel(meModel);\n  useEffect(() => {\n    if (!stateMeModel.user.id) {\n      actionsMeModel.getLoginUser();\n    }\n  }, [actionsMeModel, stateMeModel.user.id]);\n  useEffect(() => {\n    actionsCardModel.getList();\n  }, [actionsCardModel]);\n  return __jsx(Box, null, DealNoAuth(__jsx(BScroller, {\n    boxHeight: 'calc(100vh - 45px)'\n  }, __jsx(Header, null, __jsx(\"header\", null, ll('您好,'), (_stateMeModel$user$us = stateMeModel.user.userInfo) === null || _stateMeModel$user$us === void 0 ? void 0 : _stateMeModel$user$us.name), __jsx(ShopIcon, null, __jsx(ShoppingCartIconButton, {\n    htmlColor: 'white'\n  })), __jsx(\"section\", null, (_stateMeModel$user$us2 = stateMeModel.user.userInfo) === null || _stateMeModel$user$us2 === void 0 ? void 0 : _stateMeModel$user$us2.phone), __jsx(\"section\", null, (_stateMeModel$user$us3 = stateMeModel.user.userInfo) === null || _stateMeModel$user$us3 === void 0 ? void 0 : _stateMeModel$user$us3.email), __jsx(\"aside\", null, __jsx(Button, {\n    color: 'inherit',\n    variant: 'outlined',\n    onClick: () => actionsMeModel.logout()\n  }, ll('登出')))), __jsx(Tab, null, __jsx(Card, {\n    onClick: () => {\n      actionsCoinDetailDialogModel.openClick(_objectSpread(_objectSpread({}, stateMeModel.user), {}, {\n        isNextMonth: false\n      }));\n    }\n  }, __jsx(MonetizationOn, null), __jsx(\"main\", null, (_stateMeModel$user$or = stateMeModel.user.orderCoinCurrentMonth) !== null && _stateMeModel$user$or !== void 0 ? _stateMeModel$user$or : 0), __jsx(\"footer\", null, ll('本月可用达人币'))), __jsx(Parting, null), __jsx(Card, {\n    onClick: () => {\n      actionsCoinDetailDialogModel.openClick(_objectSpread(_objectSpread({}, stateMeModel.user), {}, {\n        isNextMonth: true\n      }));\n    }\n  }, __jsx(MonetizationOn, null), __jsx(\"main\", null, (_stateMeModel$user$or2 = stateMeModel.user.orderCoinNextMonth) !== null && _stateMeModel$user$or2 !== void 0 ? _stateMeModel$user$or2 : 0), __jsx(\"footer\", null, ll('下月积攒达人币'))), __jsx(Parting, null), __jsx(Card, {\n    onClick: () => {\n      router.push('/m/card/DarenCard');\n    }\n  }, __jsx(PaymentIcon, null), __jsx(\"main\", null, stateCardModel.promoCodeList.filter(v => v.promoCodeType === PromoCodeTypeEnum.DarenCard).length), __jsx(\"footer\", null, ll('达人卡')))), __jsx(ListItem, {\n    onClick: () => {\n      router.push('/m/me/orderHistory');\n    }\n  }, __jsx(HistoryIcon, null), __jsx(\"main\", null, __jsx(\"section\", null, ll('我的订单历史'))), __jsx(\"aside\", null, __jsx(ArrowForwardIosIcon, null))), __jsx(ListItem, {\n    onClick: () => {\n      router.push('/m/me/myInfo');\n    }\n  }, __jsx(CardMembershipIcon, null), __jsx(\"main\", null, __jsx(\"section\", null, ll('我的达人证'))), __jsx(\"aside\", null, __jsx(ArrowForwardIosIcon, null))), __jsx(ListItem, {\n    onClick: () => {\n      router.push('/m/me/myCreditCard');\n    }\n  }, __jsx(CardGiftcardIcon, null), __jsx(\"main\", null, __jsx(\"section\", null, ll('我的信用卡'))), __jsx(\"aside\", null, __jsx(ArrowForwardIosIcon, null))), __jsx(ListItem, {\n    onClick: () => {\n      router.push('/m/me/pickupAddress');\n    }\n  }, __jsx(PinDropIcon, null), __jsx(\"main\", null, __jsx(\"section\", null, ll('我的取货点'))), __jsx(\"aside\", null, __jsx(ArrowForwardIosIcon, null))), __jsx(ListItem, {\n    onClick: () => {\n      router.push('/m/me/myAddress');\n    }\n  }, __jsx(PersonPinCircleIcon, null), __jsx(\"main\", null, __jsx(\"section\", null, ll('我的地址'))), __jsx(\"aside\", null, __jsx(ArrowForwardIosIcon, null))), __jsx(ListItem, {\n    onClick: () => {\n      router.push('/m/me/helpCenter');\n    }\n  }, __jsx(HelpOutlineIcon, null), __jsx(\"main\", null, __jsx(\"section\", null, ll('帮助中心'))), __jsx(\"aside\", null, __jsx(ArrowForwardIosIcon, null))), __jsx(\"section\", {\n    style: {\n      height: '200px',\n      width: '2px'\n    }\n  }))), __jsx(FootBar, null), __jsx(CoinDetailDialog, null));\n}","map":null,"metadata":{},"sourceType":"module"}