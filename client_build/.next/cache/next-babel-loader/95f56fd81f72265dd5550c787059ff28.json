{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\code\\\\zw\\\\zw_client_web\\\\utils\\\\view\\\\pc\\\\home\\\\components\\\\categorySelection.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { homeCategorySelectionModel } from '../../../m/home/components/CategorySelection/CategorySelection';\nimport { useStoreModel } from '../../../../ModelAction/useStore';\nimport { ButtonBase, Grow } from '@material-ui/core';\nimport { Space } from '../../../../components/Box/Box';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\nimport { mpStyle } from '../../../../style/common';\nimport { categoryItemModel, CategoryPageModel } from '../../../m/category/[id]';\nimport { useRouter } from 'next/router';\nimport { modelFactory } from '../../../../ModelAction/modelUtil';\nimport { fpMergePre } from '../../../../tools/utils';\nimport { homeTabsModel } from '../../../m/home/components/Tabs/Tabs';\nexport var CategorySelectionModel = modelFactory('CategorySelectionModel', {\n  isShow: false\n}, {\n  switchIsShow: function switchIsShow(value, option) {\n    return option.setData(fpMergePre({\n      isShow: value\n    }));\n  }\n});\nvar Box = styled.div.withConfig({\n  displayName: \"categorySelection__Box\",\n  componentId: \"zrawnm-0\"\n})([\"display:grid;grid-template-columns:repeat(3,1fr);z-index:4;\"]);\n_c = Box;\nvar Line = styled.div.withConfig({\n  displayName: \"categorySelection__Line\",\n  componentId: \"zrawnm-1\"\n})([\"display:grid;grid-auto-rows:40px;font-size:18px;\"]);\n_c2 = Line;\nvar LinkButton = styled(ButtonBase).withConfig({\n  displayName: \"categorySelection__LinkButton\",\n  componentId: \"zrawnm-2\"\n})([\"&&&{justify-content:start;> main{flex-grow:1;text-align:left;}\", \"}\"], function (prop) {\n  return prop.isact && \"\\n      background: #FEEBEA;\\n      color: \".concat(mpStyle.red, \";\\n    \");\n});\n_c3 = LinkButton;\nvar Mask = styled.div.withConfig({\n  displayName: \"categorySelection__Mask\",\n  componentId: \"zrawnm-3\"\n})([\"position:fixed;top:0;left:0;right:0;bottom:0;\"]);\n_c4 = Mask;\nexport var CategorySelection = function CategorySelection(_ref) {\n  _s();\n\n  var _stateHomeCategorySel, _stateCategoryPageMod, _stateCategoryPageMod2;\n\n  var className = _ref.className;\n  var router = useRouter();\n\n  var _useStoreModel = useStoreModel(homeCategorySelectionModel),\n      actionsHomeCategorySelectionModel = _useStoreModel.actions,\n      stateHomeCategorySelectionModel = _useStoreModel.state;\n\n  var _useStoreModel2 = useStoreModel(CategoryPageModel),\n      actionsCategoryPageModel = _useStoreModel2.actions,\n      stateCategoryPageModel = _useStoreModel2.state;\n\n  var _useStoreModel3 = useStoreModel(CategoryPageModel, 'CategoryPageModel3'),\n      actionsCategoryPageModel3 = _useStoreModel3.actions,\n      stateCategoryPageModel3 = _useStoreModel3.state;\n\n  var _useStoreModel4 = useStoreModel(categoryItemModel),\n      actionsCategoryItemModel = _useStoreModel4.actions;\n\n  var _useStoreModel5 = useStoreModel(CategorySelectionModel),\n      actionsCategorySelectionModel = _useStoreModel5.actions,\n      stateCategorySelectionModel = _useStoreModel5.state;\n\n  var _useStoreModel6 = useStoreModel(homeTabsModel),\n      stateHomeTabs = _useStoreModel6.state;\n\n  useEffect(function () {\n    if (stateCategorySelectionModel.isShow) {\n      actionsHomeCategorySelectionModel.getList();\n    }\n  }, [actionsHomeCategorySelectionModel, stateCategorySelectionModel.isShow]);\n  return __jsx(React.Fragment, null, stateCategorySelectionModel.isShow && __jsx(Mask, {\n    onClick: function onClick() {\n      return actionsCategorySelectionModel.switchIsShow(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }), __jsx(Grow, {\n    \"in\": stateCategorySelectionModel.isShow,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, __jsx(Box, {\n    className: className,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, __jsx(Line, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, stateHomeCategorySelectionModel === null || stateHomeCategorySelectionModel === void 0 ? void 0 : (_stateHomeCategorySel = stateHomeCategorySelectionModel.listData) === null || _stateHomeCategorySel === void 0 ? void 0 : _stateHomeCategorySel.map(function (value) {\n    return __jsx(LinkButton, {\n      key: \"stateHomeCategorySelectionModel?.listData\".concat(value.id),\n      onClick: function onClick() {\n        actionsHomeCategorySelectionModel.changeActId(value.id);\n        actionsCategoryPageModel.getProductList({\n          categoryItemInput: {\n            id: value.id\n          },\n          productItemInput: {\n            isGroup: 0\n          }\n        });\n        actionsCategoryItemModel.getCategory({\n          id: value.id\n        });\n      },\n      isact: value.id === stateHomeCategorySelectionModel.actId ? 1 : 0,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }, __jsx(Space, {\n      w: 16,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }), __jsx(\"main\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    }, value.name), __jsx(KeyboardArrowRightIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }), __jsx(Space, {\n      w: 8,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }));\n  })), __jsx(Line, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, stateCategoryPageModel === null || stateCategoryPageModel === void 0 ? void 0 : (_stateCategoryPageMod = stateCategoryPageModel.categoryList) === null || _stateCategoryPageMod === void 0 ? void 0 : _stateCategoryPageMod.map(function (value) {\n    return __jsx(LinkButton, {\n      key: \"stateCategoryPageModel?.categoryList\".concat(value.id),\n      onClick: function onClick() {\n        actionsCategoryItemModel.getCategory({\n          id: value.id\n        });\n        actionsCategoryPageModel.changeActCatId(value.id);\n        actionsCategoryPageModel3.getProductList({\n          categoryItemInput: {\n            id: value.id\n          },\n          productItemInput: {\n            isGroup: 0\n          }\n        });\n      },\n      isact: stateCategoryPageModel.actCatId === value.id ? 1 : 0,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 15\n      }\n    }, __jsx(Space, {\n      w: 16,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }), __jsx(\"main\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }\n    }, value.name), __jsx(Space, {\n      w: 8,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }));\n  })), actionsCategoryItemModel.calcCatLevel() >= 2 && __jsx(Line, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, stateCategoryPageModel3 === null || stateCategoryPageModel3 === void 0 ? void 0 : (_stateCategoryPageMod2 = stateCategoryPageModel3.categoryList) === null || _stateCategoryPageMod2 === void 0 ? void 0 : _stateCategoryPageMod2.map(function (value) {\n    return __jsx(LinkButton, {\n      key: \"stateCategoryPageModel3?.categoryList\".concat(value.id),\n      onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return router.push(\"/pc/category/[id]?homeType=\".concat(stateHomeTabs.homeType), \"/pc/category/\".concat(value.id, \"?homeType=\").concat(stateHomeTabs.homeType));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      })),\n      isact: stateCategoryPageModel3.actCatId === value.id ? 1 : 0,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }, __jsx(Space, {\n      w: 16,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }), __jsx(\"main\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, value.name), __jsx(Space, {\n      w: 8,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }));\n  }))))) || __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 10\n    }\n  });\n};\n\n_s(CategorySelection, \"uOLqk1iAE+tUsr2JKzIgNhF7Umc=\", false, function () {\n  return [useRouter, useStoreModel, useStoreModel, useStoreModel, useStoreModel, useStoreModel, useStoreModel];\n});\n\n_c5 = CategorySelection;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Box\");\n$RefreshReg$(_c2, \"Line\");\n$RefreshReg$(_c3, \"LinkButton\");\n$RefreshReg$(_c4, \"Mask\");\n$RefreshReg$(_c5, \"CategorySelection\");","map":{"version":3,"sources":["D:/code/zw/zw_client_web/utils/view/pc/home/components/categorySelection.tsx"],"names":["React","useEffect","styled","homeCategorySelectionModel","useStoreModel","ButtonBase","Grow","Space","KeyboardArrowRightIcon","mpStyle","categoryItemModel","CategoryPageModel","useRouter","modelFactory","fpMergePre","homeTabsModel","CategorySelectionModel","isShow","switchIsShow","value","option","setData","Box","div","Line","LinkButton","prop","isact","red","Mask","CategorySelection","className","router","actionsHomeCategorySelectionModel","actions","stateHomeCategorySelectionModel","state","actionsCategoryPageModel","stateCategoryPageModel","actionsCategoryPageModel3","stateCategoryPageModel3","actionsCategoryItemModel","actionsCategorySelectionModel","stateCategorySelectionModel","stateHomeTabs","getList","listData","map","id","changeActId","getProductList","categoryItemInput","productItemInput","isGroup","getCategory","actId","name","categoryList","changeActCatId","actCatId","calcCatLevel","push","homeType"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react'\r\nimport styled from 'styled-components'\r\nimport {homeCategorySelectionModel} from '../../../m/home/components/CategorySelection/CategorySelection'\r\nimport {useStoreModel} from '../../../../ModelAction/useStore'\r\nimport {ButtonBase, ButtonBaseProps, Grow} from '@material-ui/core'\r\nimport {Space} from '../../../../components/Box/Box'\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight'\r\nimport {mpStyle} from '../../../../style/common'\r\nimport {categoryItemModel, CategoryPageModel} from '../../../m/category/[id]'\r\nimport {useRouter} from 'next/router'\r\nimport {modelFactory} from '../../../../ModelAction/modelUtil'\r\nimport {fpMergePre} from '../../../../tools/utils'\r\nimport {homeTabsModel} from '../../../m/home/components/Tabs/Tabs'\r\n\r\nexport const CategorySelectionModel = modelFactory('CategorySelectionModel', {\r\n  isShow: false,\r\n}, {\r\n  switchIsShow: (value: boolean, option) => option.setData(fpMergePre({isShow: value})),\r\n})\r\n\r\nconst Box = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  z-index: 4;\r\n`\r\nconst Line = styled.div`\r\n  display: grid;\r\n  grid-auto-rows: 40px;\r\n  font-size: 18px;\r\n`\r\nconst LinkButton = styled(ButtonBase)<ButtonBaseProps & { isact?: number }>`\r\n  &&& {\r\n    justify-content: start;\r\n    > main {\r\n      flex-grow: 1;\r\n      text-align: left;\r\n    }\r\n    ${prop => prop.isact && `\r\n      background: #FEEBEA;\r\n      color: ${mpStyle.red};\r\n    `}\r\n  }\r\n`\r\nconst Mask = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n`\r\n\r\nexport const CategorySelection = ({className}: { className?: string }) => {\r\n  const router = useRouter()\r\n  const {actions: actionsHomeCategorySelectionModel, state: stateHomeCategorySelectionModel} = useStoreModel(homeCategorySelectionModel)\r\n  const {actions: actionsCategoryPageModel, state: stateCategoryPageModel} = useStoreModel(CategoryPageModel)\r\n  const {actions: actionsCategoryPageModel3, state: stateCategoryPageModel3} = useStoreModel(CategoryPageModel, 'CategoryPageModel3')\r\n  const {actions: actionsCategoryItemModel} = useStoreModel(categoryItemModel)\r\n  const {actions: actionsCategorySelectionModel, state: stateCategorySelectionModel} = useStoreModel(CategorySelectionModel)\r\n  const {state: stateHomeTabs} = useStoreModel(homeTabsModel)\r\n\r\n  useEffect(() => {\r\n    if (stateCategorySelectionModel.isShow) {\r\n      actionsHomeCategorySelectionModel.getList()\r\n    }\r\n  }, [actionsHomeCategorySelectionModel, stateCategorySelectionModel.isShow])\r\n\r\n  return <>\r\n    {stateCategorySelectionModel.isShow &&\r\n    <Mask\r\n        onClick={() => actionsCategorySelectionModel.switchIsShow(false)}\r\n    />\r\n    }\r\n    <Grow\r\n        in={stateCategorySelectionModel.isShow}\r\n    >\r\n      <Box className={className}>\r\n        <Line>\r\n          {stateHomeCategorySelectionModel?.listData?.map(value => (\r\n              <LinkButton\r\n                  key={`stateHomeCategorySelectionModel?.listData${value.id}`}\r\n                  onClick={() => {\r\n                    actionsHomeCategorySelectionModel.changeActId(value.id)\r\n                    actionsCategoryPageModel.getProductList({\r\n                      categoryItemInput: {id: value.id},\r\n                      productItemInput: {\r\n                        isGroup: 0,\r\n                      },\r\n                    })\r\n                    actionsCategoryItemModel.getCategory({id: value.id})\r\n                  }}\r\n                  isact={value.id === stateHomeCategorySelectionModel.actId ? 1 : 0}\r\n              >\r\n                <Space w={16}/>\r\n                <main>\r\n                  {value.name}\r\n                </main>\r\n                <KeyboardArrowRightIcon/>\r\n                <Space w={8}/>\r\n              </LinkButton>\r\n          ))}\r\n        </Line>\r\n        <Line>\r\n          {stateCategoryPageModel?.categoryList?.map(value => (\r\n              <LinkButton\r\n                  key={`stateCategoryPageModel?.categoryList${value.id}`}\r\n                  onClick={() => {\r\n                    actionsCategoryItemModel.getCategory({id: value.id})\r\n                    actionsCategoryPageModel.changeActCatId(value.id)\r\n                    actionsCategoryPageModel3.getProductList({\r\n                      categoryItemInput: {id: value.id},\r\n                      productItemInput: {\r\n                        isGroup: 0,\r\n                      },\r\n                    })\r\n                  }}\r\n                  isact={stateCategoryPageModel.actCatId === value.id ? 1 : 0}\r\n              >\r\n                <Space w={16}/>\r\n                <main>\r\n                  {value.name}\r\n                </main>\r\n                <Space w={8}/>\r\n              </LinkButton>\r\n          ))}\r\n        </Line>\r\n        {actionsCategoryItemModel.calcCatLevel() >= 2 &&\r\n        <Line>\r\n          {stateCategoryPageModel3?.categoryList?.map(value => (\r\n              <LinkButton\r\n                  key={`stateCategoryPageModel3?.categoryList${value.id}`}\r\n                  onClick={async () => {\r\n                    // actionsCategoryItemModel.getCategory({id: value.id})\r\n                    // actionsCategoryPageModel3.changeActCatId(value.id)\r\n                    // actionsCategorySelectionModel.switchIsShow(false)\r\n                    await router.push(`/pc/category/[id]?homeType=${stateHomeTabs.homeType}`, `/pc/category/${value.id}?homeType=${stateHomeTabs.homeType}`)\r\n                  }}\r\n                  isact={stateCategoryPageModel3.actCatId === value.id ? 1 : 0}\r\n              >\r\n                <Space w={16}/>\r\n                <main>\r\n                  {value.name}\r\n                </main>\r\n                <Space w={8}/>\r\n              </LinkButton>\r\n          ))}\r\n        </Line>\r\n        }\r\n      </Box>\r\n    </Grow>\r\n  </> || <React.Fragment/>\r\n}\r\n"]},"metadata":{},"sourceType":"module"}