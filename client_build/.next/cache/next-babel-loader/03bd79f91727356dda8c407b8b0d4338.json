{"ast":null,"code":"var _jsxFileName = \"D:\\\\code\\\\zw\\\\zw_client_web\\\\utils\\\\view\\\\pay\\\\index.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport Head from 'next/head';\nimport { ls } from '../../tools/dealKey';\nimport './mysqpaymentform.module.css';\nexport const Pay = () => {\n  let onGetCardNonce;\n  useEffect(() => {\n    // @ts-ignore\n    const paymentForm = new SqPaymentForm({\n      // Initialize the payment form elements\n      applicationId: \"sandbox-sq0idb-42FQ7wGBwzibToRM9_zdFw\",\n      inputClass: 'sq-input',\n      autoBuild: false,\n      // Customize the CSS for SqPaymentForm iframe elements\n      inputStyles: [{\n        fontSize: '16px',\n        lineHeight: '24px',\n        padding: '16px',\n        placeholderColor: '#a0a0a0',\n        backgroundColor: 'transparent'\n      }],\n      // Initialize the credit card placeholders\n      cardNumber: {\n        elementId: 'sq-card-number',\n        placeholder: 'Card Number'\n      },\n      cvv: {\n        elementId: 'sq-cvv',\n        placeholder: 'CVV'\n      },\n      expirationDate: {\n        elementId: 'sq-expiration-date',\n        placeholder: 'MM/YY'\n      },\n      postalCode: {\n        elementId: 'sq-postal-code',\n        placeholder: 'Postal'\n      },\n      // SqPaymentForm callback functions\n      callbacks: {\n        /*\r\n        * callback function: cardNonceResponseReceived\r\n        * Triggered when: SqPaymentForm completes a card nonce request\r\n        */\n        cardNonceResponseReceived: function (errors, nonce, cardData) {\n          if (errors) {\n            // Log errors from nonce generation to the browser developer console.\n            console.error('Encountered errors:');\n            errors.forEach(function (error) {\n              console.error('  ' + error.message);\n            });\n            alert('Encountered errors, check browser developer console for more details');\n            return;\n          } // alert(`The generated nonce is:\\n${nonce}`)\n\n\n          fetch('process-payment', {\n            method: 'POST',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              nonce: nonce\n            })\n          }).catch(err => {\n            alert('Network error: ' + err);\n          }).then(response => {\n            if (!response.ok) {\n              return response.json().then(errorInfo => Promise.reject(errorInfo)); //UPDATE HERE\n            }\n\n            return response.json(); //UPDATE HERE\n          }).then(data => {\n            console.log(data); //UPDATE HERE\n\n            alert('Payment complete successfully!\\nCheck browser developer console for more details');\n          }).catch(err => {\n            console.error(err);\n            alert('Payment failed to complete!\\nCheck browser developer console for more details');\n          });\n        }\n      }\n    });\n    paymentForm.build();\n\n    onGetCardNonce = event => {\n      // Don't submit the form until SqPaymentForm returns with a nonce\n      event.preventDefault(); // Request a nonce from the SqPaymentForm object\n\n      paymentForm.requestCardNonce();\n    };\n  });\n  return __jsx(\"div\", {\n    className: \"jsx-569710452\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 10\n    }\n  }, __jsx(_JSXStyle, {\n    id: \"569710452\",\n    __self: this\n  }, \"l *.jsx-569710452{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}l body.jsx-569710452,l html.jsx-569710452{background-color:#F7F8F9;color:#373F4A;font-family:\\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif;font-weight:normal;height:100%;}l button.jsx-569710452{border:0;font-weight:500;}l fieldset.jsx-569710452{margin:0;padding:0;border:0;}l #form-container.jsx-569710452{position:relative;width:118.75vw;margin:0 auto;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}l .third.jsx-569710452{float:left;width:calc((100% - 10vw) / 3);padding:0;margin:0 5vw 5vw 0;}l .third.jsx-569710452:last-of-type{margin-right:0;}l .sq-input.jsx-569710452{height:17.5vw;box-sizing:border-box;border:1px solid #E0E2E3;background-color:white;border-radius:1.875vw;display:inline-block;-webkit-transition:border-color .2s ease-in-out;transition:border-color .2s ease-in-out;}l .sq-input--focus.jsx-569710452{border:1px solid #4A90E2;}l .sq-input--error.jsx-569710452{border:1px solid #E02F2F;}l #sq-card-number.jsx-569710452{margin-bottom:5vw;}l .button-credit-card.jsx-569710452{width:100%;height:17.5vw;margin-top:3.125vw;background:#4A90E2;border-radius:1.875vw;cursor:pointer;display:block;color:#FFFFFF;font-size:5vw;line-height:7.5vw;font-weight:700;-webkit-letter-spacing:0;-moz-letter-spacing:0;-ms-letter-spacing:0;letter-spacing:0;text-align:center;-webkit-transition:background .2s ease-in-out;transition:background .2s ease-in-out;}l .button-credit-card.jsx-569710452:hover{background-color:#4281CB;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxjb2RlXFx6d1xcendfY2xpZW50X3dlYlxcdXRpbHNcXHZpZXdcXHBheVxcaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWdHZ0IsQUFPd0MsQUFHVixBQU1oQixBQUdBLEFBSVMsQUFNUCxBQUtJLEFBRUQsQUFRVyxBQUVBLEFBRVAsQUFFUCxBQWVjLFNBaERULEFBR04sRUFVb0IsQUFxQmhCLEdBZFEsQ0FITixHQVZELEFBd0JJLENBM0JWLE1BVkssQUFNRyxBQTJCUyxBQUVBLEFBTVAsQUFhTyxHQTVDaEIsS0FJSSxFQWpCb0IsQ0E4QlQsR0ExQmtDLEVBbUJqRCxHQXNCUyxHQTNCWCxJQU1XLElBTFEsTUFZSixFQWVELE1BOUNhLENBd0JmLGNBUUUsQ0FlUCxVQTFDSSxLQTJDTCxNQWZPLFFBM0JULEFBMkNFLFlBM0NELENBNEIyQixDQWdCMUIsY0FDSSxNQWhDVSxZQWlDWixnQkFDQyx1Q0FuQndCLDhDQW9CdkIsa0JBQ29CLG9GQUFDIiwiZmlsZSI6IkQ6XFxjb2RlXFx6d1xcendfY2xpZW50X3dlYlxcdXRpbHNcXHZpZXdcXHBheVxcaW5kZXgudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7dXNlRWZmZWN0fSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IEhlYWQgZnJvbSAnbmV4dC9oZWFkJ1xyXG5pbXBvcnQge2xzfSBmcm9tICcuLi8uLi90b29scy9kZWFsS2V5J1xyXG5pbXBvcnQgJy4vbXlzcXBheW1lbnRmb3JtLm1vZHVsZS5jc3MnXHJcblxyXG5leHBvcnQgY29uc3QgUGF5ID0gKCkgPT4ge1xyXG4gIGxldCBvbkdldENhcmROb25jZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBjb25zdCBwYXltZW50Rm9ybSA9IG5ldyBTcVBheW1lbnRGb3JtKHtcclxuICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgcGF5bWVudCBmb3JtIGVsZW1lbnRzXHJcbiAgICAgIGFwcGxpY2F0aW9uSWQ6IFwic2FuZGJveC1zcTBpZGItNDJGUTd3R0J3emliVG9STTlfemRGd1wiLFxyXG4gICAgICBpbnB1dENsYXNzOiAnc3EtaW5wdXQnLFxyXG4gICAgICBhdXRvQnVpbGQ6IGZhbHNlLFxyXG4gICAgICAvLyBDdXN0b21pemUgdGhlIENTUyBmb3IgU3FQYXltZW50Rm9ybSBpZnJhbWUgZWxlbWVudHNcclxuICAgICAgaW5wdXRTdHlsZXM6IFt7XHJcbiAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcclxuICAgICAgICBsaW5lSGVpZ2h0OiAnMjRweCcsXHJcbiAgICAgICAgcGFkZGluZzogJzE2cHgnLFxyXG4gICAgICAgIHBsYWNlaG9sZGVyQ29sb3I6ICcjYTBhMGEwJyxcclxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXHJcbiAgICAgIH1dLFxyXG4gICAgICAvLyBJbml0aWFsaXplIHRoZSBjcmVkaXQgY2FyZCBwbGFjZWhvbGRlcnNcclxuICAgICAgY2FyZE51bWJlcjoge1xyXG4gICAgICAgIGVsZW1lbnRJZDogJ3NxLWNhcmQtbnVtYmVyJyxcclxuICAgICAgICBwbGFjZWhvbGRlcjogJ0NhcmQgTnVtYmVyJyxcclxuICAgICAgfSxcclxuICAgICAgY3Z2OiB7XHJcbiAgICAgICAgZWxlbWVudElkOiAnc3EtY3Z2JyxcclxuICAgICAgICBwbGFjZWhvbGRlcjogJ0NWVicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGV4cGlyYXRpb25EYXRlOiB7XHJcbiAgICAgICAgZWxlbWVudElkOiAnc3EtZXhwaXJhdGlvbi1kYXRlJyxcclxuICAgICAgICBwbGFjZWhvbGRlcjogJ01NL1lZJyxcclxuICAgICAgfSxcclxuICAgICAgcG9zdGFsQ29kZToge1xyXG4gICAgICAgIGVsZW1lbnRJZDogJ3NxLXBvc3RhbC1jb2RlJyxcclxuICAgICAgICBwbGFjZWhvbGRlcjogJ1Bvc3RhbCcsXHJcbiAgICAgIH0sXHJcbiAgICAgIC8vIFNxUGF5bWVudEZvcm0gY2FsbGJhY2sgZnVuY3Rpb25zXHJcbiAgICAgIGNhbGxiYWNrczoge1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgKiBjYWxsYmFjayBmdW5jdGlvbjogY2FyZE5vbmNlUmVzcG9uc2VSZWNlaXZlZFxyXG4gICAgICAgICogVHJpZ2dlcmVkIHdoZW46IFNxUGF5bWVudEZvcm0gY29tcGxldGVzIGEgY2FyZCBub25jZSByZXF1ZXN0XHJcbiAgICAgICAgKi9cclxuICAgICAgICBjYXJkTm9uY2VSZXNwb25zZVJlY2VpdmVkOiBmdW5jdGlvbiAoZXJyb3JzOiBhbnksIG5vbmNlOiBhbnksIGNhcmREYXRhOiBhbnkpIHtcclxuICAgICAgICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgICAgICAgLy8gTG9nIGVycm9ycyBmcm9tIG5vbmNlIGdlbmVyYXRpb24gdG8gdGhlIGJyb3dzZXIgZGV2ZWxvcGVyIGNvbnNvbGUuXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VuY291bnRlcmVkIGVycm9yczonKVxyXG4gICAgICAgICAgICBlcnJvcnMuZm9yRWFjaChmdW5jdGlvbiAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJyAgJyArIGVycm9yLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGFsZXJ0KCdFbmNvdW50ZXJlZCBlcnJvcnMsIGNoZWNrIGJyb3dzZXIgZGV2ZWxvcGVyIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscycpXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gYWxlcnQoYFRoZSBnZW5lcmF0ZWQgbm9uY2UgaXM6XFxuJHtub25jZX1gKVxyXG4gICAgICAgICAgZmV0Y2goJ3Byb2Nlc3MtcGF5bWVudCcsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICBub25jZTogbm9uY2UsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdOZXR3b3JrIGVycm9yOiAnICsgZXJyKVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKS50aGVuKChlcnJvckluZm86IGFueSkgPT4gUHJvbWlzZS5yZWplY3QoZXJyb3JJbmZvKSkgLy9VUERBVEUgSEVSRVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKSAvL1VQREFURSBIRVJFXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpIC8vVVBEQVRFIEhFUkVcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdQYXltZW50IGNvbXBsZXRlIHN1Y2Nlc3NmdWxseSFcXG5DaGVjayBicm93c2VyIGRldmVsb3BlciBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMnKVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycilcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdQYXltZW50IGZhaWxlZCB0byBjb21wbGV0ZSFcXG5DaGVjayBicm93c2VyIGRldmVsb3BlciBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMnKVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICBwYXltZW50Rm9ybS5idWlsZCgpXHJcbiAgICBvbkdldENhcmROb25jZSA9IChldmVudDogYW55KSA9PiB7XHJcbiAgICAgIC8vIERvbid0IHN1Ym1pdCB0aGUgZm9ybSB1bnRpbCBTcVBheW1lbnRGb3JtIHJldHVybnMgd2l0aCBhIG5vbmNlXHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgLy8gUmVxdWVzdCBhIG5vbmNlIGZyb20gdGhlIFNxUGF5bWVudEZvcm0gb2JqZWN0XHJcbiAgICAgIHBheW1lbnRGb3JtLnJlcXVlc3RDYXJkTm9uY2UoKVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIHJldHVybiA8ZGl2PlxyXG4gICAgPHN0eWxlIGpzeD57YFxyXG4gICAgICA6Z2xvYmFsIHtcclxuICAgICAgICAqIHtcclxuICAgICAgICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xyXG4gICAgICAgICAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvZHksIGh0bWwge1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0Y3RjhGOTtcclxuICAgICAgICAgIGNvbG9yOiAjMzczRjRBO1xyXG4gICAgICAgICAgZm9udC1mYW1pbHk6IFwiSGVsdmV0aWNhIE5ldWVcIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XHJcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBidXR0b24ge1xyXG4gICAgICAgICAgYm9yZGVyOiAwO1xyXG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZpZWxkc2V0IHtcclxuICAgICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgICAgICBib3JkZXI6IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjZm9ybS1jb250YWluZXIge1xyXG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgd2lkdGg6IDM4MHB4O1xyXG4gICAgICAgICAgbWFyZ2luOiAwIGF1dG87XHJcbiAgICAgICAgICB0b3A6IDUwJTtcclxuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC50aGlyZCB7XHJcbiAgICAgICAgICBmbG9hdDogbGVmdDtcclxuICAgICAgICAgIHdpZHRoOiBjYWxjKCgxMDAlIC0gMzJweCkgLyAzKTtcclxuICAgICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgICAgICBtYXJnaW46IDAgMTZweCAxNnB4IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAudGhpcmQ6bGFzdC1vZi10eXBlIHtcclxuICAgICAgICAgIG1hcmdpbi1yaWdodDogMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIERlZmluZSBob3cgU3FQYXltZW50Rm9ybSBpZnJhbWVzIHNob3VsZCBsb29rICovXHJcbiAgICAgICAgLnNxLWlucHV0IHtcclxuICAgICAgICAgIGhlaWdodDogNTZweDtcclxuICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjRTBFMkUzO1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XHJcbiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IGJvcmRlci1jb2xvciAuMnMgZWFzZS1pbi1vdXQ7XHJcbiAgICAgICAgICAgICAtbW96LXRyYW5zaXRpb246IGJvcmRlci1jb2xvciAuMnMgZWFzZS1pbi1vdXQ7XHJcbiAgICAgICAgICAgICAgLW1zLXRyYW5zaXRpb246IGJvcmRlci1jb2xvciAuMnMgZWFzZS1pbi1vdXQ7XHJcbiAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAuMnMgZWFzZS1pbi1vdXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBEZWZpbmUgaG93IFNxUGF5bWVudEZvcm0gaWZyYW1lcyBzaG91bGQgbG9vayB3aGVuIHRoZXkgaGF2ZSBmb2N1cyAqL1xyXG4gICAgICAgIC5zcS1pbnB1dC0tZm9jdXMge1xyXG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzRBOTBFMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIERlZmluZSBob3cgU3FQYXltZW50Rm9ybSBpZnJhbWVzIHNob3VsZCBsb29rIHdoZW4gdGhleSBjb250YWluIGludmFsaWQgdmFsdWVzICovXHJcbiAgICAgICAgLnNxLWlucHV0LS1lcnJvciB7XHJcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjRTAyRjJGO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3NxLWNhcmQtbnVtYmVyIHtcclxuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBDdXN0b21pemUgdGhlIFwiUGF5IHdpdGggQ3JlZGl0IENhcmRcIiBidXR0b24gKi9cclxuICAgICAgICAuYnV0dG9uLWNyZWRpdC1jYXJkIHtcclxuICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgaGVpZ2h0OiA1NnB4O1xyXG4gICAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcclxuICAgICAgICAgIGJhY2tncm91bmQ6ICM0QTkwRTI7XHJcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XHJcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgIGNvbG9yOiAjRkZGRkZGO1xyXG4gICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7XHJcbiAgICAgICAgICBmb250LXdlaWdodDogNzAwO1xyXG4gICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDA7XHJcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IGJhY2tncm91bmQgLjJzIGVhc2UtaW4tb3V0O1xyXG4gICAgICAgICAgICAgLW1vei10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIC4ycyBlYXNlLWluLW91dDtcclxuICAgICAgICAgICAgICAtbXMtdHJhbnNpdGlvbjogYmFja2dyb3VuZCAuMnMgZWFzZS1pbi1vdXQ7XHJcbiAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgLjJzIGVhc2UtaW4tb3V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmJ1dHRvbi1jcmVkaXQtY2FyZDpob3ZlciB7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDI4MUNCO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgYH08L3N0eWxlPlxyXG4gICAgPEhlYWQ+XHJcbiAgICAgIDx0aXRsZT5wYXk8L3RpdGxlPlxyXG4gICAgICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIlxyXG4gICAgICAgICAgICAgIHNyYz1cImh0dHBzOi8vanMuc3F1YXJldXBzYW5kYm94LmNvbS92Mi9wYXltZW50Zm9ybVwiPlxyXG4gICAgICA8L3NjcmlwdD5cclxuICAgIDwvSGVhZD5cclxuICAgIHtscygn5pSv5LuYJyl9XHJcbiAgICA8ZGl2IGlkPVwiZm9ybS1jb250YWluZXJcIj5cclxuICAgICAgPGRpdiBpZD1cInNxLWNhcmQtbnVtYmVyXCI+PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGhpcmRcIlxyXG4gICAgICAgICAgIGlkPVwic3EtZXhwaXJhdGlvbi1kYXRlXCI+PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGhpcmRcIlxyXG4gICAgICAgICAgIGlkPVwic3EtY3Z2XCI+PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGhpcmRcIlxyXG4gICAgICAgICAgIGlkPVwic3EtcG9zdGFsLWNvZGVcIj48L2Rpdj5cclxuICAgICAgPGJ1dHRvbiBpZD1cInNxLWNyZWRpdGNhcmRcIlxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ1dHRvbi1jcmVkaXQtY2FyZFwiXHJcbiAgICAgICAgICAgICAgb25DbGljaz17b25HZXRDYXJkTm9uY2V9PlBheVxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG59XHJcbiJdfQ== */\\n/*@ sourceURL=D:\\\\\\\\code\\\\\\\\zw\\\\\\\\zw_client_web\\\\\\\\utils\\\\\\\\view\\\\\\\\pay\\\\\\\\index.tsx */\"), __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 5\n    }\n  }, __jsx(\"title\", {\n    className: \"jsx-569710452\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }\n  }, \"pay\"), __jsx(\"script\", {\n    type: \"text/javascript\",\n    src: \"https://js.squareupsandbox.com/v2/paymentform\",\n    className: \"jsx-569710452\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  })), ls('支付'), __jsx(\"div\", {\n    id: \"form-container\",\n    className: \"jsx-569710452\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    id: \"sq-card-number\",\n    className: \"jsx-569710452\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    id: \"sq-expiration-date\",\n    className: \"jsx-569710452\" + \" \" + \"third\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    id: \"sq-cvv\",\n    className: \"jsx-569710452\" + \" \" + \"third\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    id: \"sq-postal-code\",\n    className: \"jsx-569710452\" + \" \" + \"third\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }\n  }), __jsx(\"button\", {\n    id: \"sq-creditcard\",\n    onClick: onGetCardNonce,\n    className: \"jsx-569710452\" + \" \" + \"button-credit-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }\n  }, \"Pay\")));\n};","map":{"version":3,"sources":["D:/code/zw/zw_client_web/utils/view/pay/index.tsx"],"names":["React","useEffect","Head","ls","Pay","onGetCardNonce","paymentForm","SqPaymentForm","applicationId","inputClass","autoBuild","inputStyles","fontSize","lineHeight","padding","placeholderColor","backgroundColor","cardNumber","elementId","placeholder","cvv","expirationDate","postalCode","callbacks","cardNonceResponseReceived","errors","nonce","cardData","console","error","forEach","message","alert","fetch","method","headers","body","JSON","stringify","catch","err","then","response","ok","json","errorInfo","Promise","reject","data","log","build","event","preventDefault","requestCardNonce"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react'\r\nimport Head from 'next/head'\r\nimport {ls} from '../../tools/dealKey'\r\nimport './mysqpaymentform.module.css'\r\n\r\nexport const Pay = () => {\r\n  let onGetCardNonce\r\n  useEffect(() => {\r\n    // @ts-ignore\r\n    const paymentForm = new SqPaymentForm({\r\n      // Initialize the payment form elements\r\n      applicationId: \"sandbox-sq0idb-42FQ7wGBwzibToRM9_zdFw\",\r\n      inputClass: 'sq-input',\r\n      autoBuild: false,\r\n      // Customize the CSS for SqPaymentForm iframe elements\r\n      inputStyles: [{\r\n        fontSize: '16px',\r\n        lineHeight: '24px',\r\n        padding: '16px',\r\n        placeholderColor: '#a0a0a0',\r\n        backgroundColor: 'transparent',\r\n      }],\r\n      // Initialize the credit card placeholders\r\n      cardNumber: {\r\n        elementId: 'sq-card-number',\r\n        placeholder: 'Card Number',\r\n      },\r\n      cvv: {\r\n        elementId: 'sq-cvv',\r\n        placeholder: 'CVV',\r\n      },\r\n      expirationDate: {\r\n        elementId: 'sq-expiration-date',\r\n        placeholder: 'MM/YY',\r\n      },\r\n      postalCode: {\r\n        elementId: 'sq-postal-code',\r\n        placeholder: 'Postal',\r\n      },\r\n      // SqPaymentForm callback functions\r\n      callbacks: {\r\n        /*\r\n        * callback function: cardNonceResponseReceived\r\n        * Triggered when: SqPaymentForm completes a card nonce request\r\n        */\r\n        cardNonceResponseReceived: function (errors: any, nonce: any, cardData: any) {\r\n          if (errors) {\r\n            // Log errors from nonce generation to the browser developer console.\r\n            console.error('Encountered errors:')\r\n            errors.forEach(function (error: any) {\r\n              console.error('  ' + error.message)\r\n            })\r\n            alert('Encountered errors, check browser developer console for more details')\r\n            return\r\n          }\r\n          // alert(`The generated nonce is:\\n${nonce}`)\r\n          fetch('process-payment', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Accept': 'application/json',\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n              nonce: nonce,\r\n            }),\r\n          })\r\n              .catch(err => {\r\n                alert('Network error: ' + err)\r\n              })\r\n              .then((response: any) => {\r\n                if (!response.ok) {\r\n                  return response.json().then((errorInfo: any) => Promise.reject(errorInfo)) //UPDATE HERE\r\n                }\r\n                return response.json() //UPDATE HERE\r\n              })\r\n              .then(data => {\r\n                console.log(data) //UPDATE HERE\r\n                alert('Payment complete successfully!\\nCheck browser developer console for more details')\r\n              })\r\n              .catch(err => {\r\n                console.error(err)\r\n                alert('Payment failed to complete!\\nCheck browser developer console for more details')\r\n              })\r\n        },\r\n      },\r\n    })\r\n    paymentForm.build()\r\n    onGetCardNonce = (event: any) => {\r\n      // Don't submit the form until SqPaymentForm returns with a nonce\r\n      event.preventDefault()\r\n      // Request a nonce from the SqPaymentForm object\r\n      paymentForm.requestCardNonce()\r\n    }\r\n  })\r\n\r\n  return <div>\r\n    <style jsx>{`\r\n      :global {\r\n        * {\r\n          -webkit-font-smoothing: antialiased;\r\n          -moz-osx-font-smoothing: grayscale;\r\n        }\r\n\r\n        body, html {\r\n          background-color: #F7F8F9;\r\n          color: #373F4A;\r\n          font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\r\n          font-weight: normal;\r\n          height: 100%;\r\n        }\r\n\r\n        button {\r\n          border: 0;\r\n          font-weight: 500;\r\n        }\r\n\r\n        fieldset {\r\n          margin: 0;\r\n          padding: 0;\r\n          border: 0;\r\n        }\r\n\r\n        #form-container {\r\n          position: relative;\r\n          width: 380px;\r\n          margin: 0 auto;\r\n          top: 50%;\r\n          transform: translateY(-50%);\r\n        }\r\n\r\n        .third {\r\n          float: left;\r\n          width: calc((100% - 32px) / 3);\r\n          padding: 0;\r\n          margin: 0 16px 16px 0;\r\n        }\r\n\r\n        .third:last-of-type {\r\n          margin-right: 0;\r\n        }\r\n\r\n        /* Define how SqPaymentForm iframes should look */\r\n        .sq-input {\r\n          height: 56px;\r\n          box-sizing: border-box;\r\n          border: 1px solid #E0E2E3;\r\n          background-color: white;\r\n          border-radius: 6px;\r\n          display: inline-block;\r\n          -webkit-transition: border-color .2s ease-in-out;\r\n             -moz-transition: border-color .2s ease-in-out;\r\n              -ms-transition: border-color .2s ease-in-out;\r\n                  transition: border-color .2s ease-in-out;\r\n        }\r\n\r\n        /* Define how SqPaymentForm iframes should look when they have focus */\r\n        .sq-input--focus {\r\n          border: 1px solid #4A90E2;\r\n        }\r\n\r\n        /* Define how SqPaymentForm iframes should look when they contain invalid values */\r\n        .sq-input--error {\r\n          border: 1px solid #E02F2F;\r\n        }\r\n\r\n        #sq-card-number {\r\n          margin-bottom: 16px;\r\n        }\r\n\r\n        /* Customize the \"Pay with Credit Card\" button */\r\n        .button-credit-card {\r\n          width: 100%;\r\n          height: 56px;\r\n          margin-top: 10px;\r\n          background: #4A90E2;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n          display: block;\r\n          color: #FFFFFF;\r\n          font-size: 16px;\r\n          line-height: 24px;\r\n          font-weight: 700;\r\n          letter-spacing: 0;\r\n          text-align: center;\r\n          -webkit-transition: background .2s ease-in-out;\r\n             -moz-transition: background .2s ease-in-out;\r\n              -ms-transition: background .2s ease-in-out;\r\n                  transition: background .2s ease-in-out;\r\n        }\r\n\r\n        .button-credit-card:hover {\r\n          background-color: #4281CB;\r\n        }\r\n      }\r\n    `}</style>\r\n    <Head>\r\n      <title>pay</title>\r\n      <script type=\"text/javascript\"\r\n              src=\"https://js.squareupsandbox.com/v2/paymentform\">\r\n      </script>\r\n    </Head>\r\n    {ls('支付')}\r\n    <div id=\"form-container\">\r\n      <div id=\"sq-card-number\"></div>\r\n      <div className=\"third\"\r\n           id=\"sq-expiration-date\"></div>\r\n      <div className=\"third\"\r\n           id=\"sq-cvv\"></div>\r\n      <div className=\"third\"\r\n           id=\"sq-postal-code\"></div>\r\n      <button id=\"sq-creditcard\"\r\n              className=\"button-credit-card\"\r\n              onClick={onGetCardNonce}>Pay\r\n      </button>\r\n    </div>\r\n  </div>\r\n}\r\n"]},"metadata":{},"sourceType":"module"}