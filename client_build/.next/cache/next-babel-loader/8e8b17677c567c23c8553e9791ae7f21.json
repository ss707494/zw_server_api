{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport { Tab, Tabs } from '@material-ui/core';\nimport React from 'react';\nimport CategorySelection from '../CategorySelection/CategorySelection';\nimport Router, { useRouter } from 'next/router';\nimport { modelFactory } from '../../../../../ModelAction/modelUtil';\nimport { useStoreModel } from '../../../../../ModelAction/useStore';\nimport { AppModuleTypeEnum, DictTypeEnum } from '../../../../../ss_common/enum';\nimport { ls } from '../../../../../tools/dealKey';\nimport { PromotionFlashSale } from '../PromotionFlashSale/PromotionFlashSale';\nimport { ThemeSelection } from '../ThemeSelection/ThemeSelection';\nimport { HomeType } from '../../appModule';\nimport { fpMergePre } from '../../../../../tools/utils';\nimport { getDataConfig } from '../../../../../graphqlTypes/doc';\nimport { SalesRank } from '../SalesRank/SalesRank';\nimport { UpdateShopCart } from '../../../../../components/ProductItem/UpdateShopCart';\nimport { isEmpty } from 'lodash';\nimport { LineRanking } from '../LineRanking/LineRanking';\nexport var homeTabsModel = modelFactory('HomeTabs', {\n  homeType: '',\n  appModuleConfig: {}\n}, {\n  setHomeType: function setHomeType(value, option) {\n    option.setData(fpMergePre({\n      homeType: value\n    }));\n  },\n  onChange: function onChange(_ref, option) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        name = _ref2[0],\n        type = _ref2[1];\n\n    // @ts-ignore\n    Router.push(\"/m/\".concat(type, \"/[appModule]\"), \"/m/\".concat(type, \"/\").concat(name), {\n      shallow: true\n    }); // option.setData(fpMergePre({\n    //   value,\n    // }))\n  },\n  getData: function () {\n    var _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value, option) {\n      var _appModuleConfig$getD, _appModuleConfig$getD2;\n\n      var appModuleConfig;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return option.query(getDataConfig, {\n                data: {\n                  type: DictTypeEnum.AppModule\n                }\n              }, {});\n\n            case 2:\n              appModuleConfig = _context.sent;\n              option.setData(fpMergePre({\n                appModuleConfig: (_appModuleConfig$getD = appModuleConfig === null || appModuleConfig === void 0 ? void 0 : (_appModuleConfig$getD2 = appModuleConfig.getDataConfig) === null || _appModuleConfig$getD2 === void 0 ? void 0 : _appModuleConfig$getD2.value) !== null && _appModuleConfig$getD !== void 0 ? _appModuleConfig$getD : {}\n              }));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function getData(_x, _x2) {\n      return _getData.apply(this, arguments);\n    }\n\n    return getData;\n  }()\n});\nexport var HomeTabs = function HomeTabs(_ref3) {\n  var _router$query$appModu;\n\n  var homeType = _ref3.homeType;\n  var router = useRouter();\n\n  var _useStoreModel = useStoreModel(homeTabsModel),\n      homeTabsState = _useStoreModel.state,\n      homeTabsActions = _useStoreModel.actions;\n\n  return __jsx(\"div\", {\n    style: {\n      marginTop: '10px'\n    },\n    className: \"jsx-1221730688\"\n  }, !isEmpty(homeTabsState === null || homeTabsState === void 0 ? void 0 : homeTabsState.appModuleConfig) && __jsx(Tabs, {\n    variant: 'fullWidth',\n    value: (_router$query$appModu = router.query.appModule) !== null && _router$query$appModu !== void 0 ? _router$query$appModu : AppModuleTypeEnum.categorySelection,\n    onChange: function onChange(event, value) {\n      return homeTabsActions.onChange([value, homeType]);\n    }\n  }, __jsx(Tab, {\n    value: AppModuleTypeEnum.categorySelection,\n    label: ls(homeType === HomeType.group ? '分类拼团' : '分类选择')\n  }), (homeType === HomeType.home && [[AppModuleTypeEnum.limitTime, '限时选购'], [AppModuleTypeEnum.salesRank, '热销排行'], [AppModuleTypeEnum.themeSelection, '主题甄选'], [AppModuleTypeEnum.mayLike, '猜你喜欢']] || homeType === HomeType.group && [[AppModuleTypeEnum.salesRank, '热门排行'], [AppModuleTypeEnum.lineRanking, '冲线排行']] || []).filter(function (v) {\n    var _homeTabsState$appMod;\n\n    return homeTabsState === null || homeTabsState === void 0 ? void 0 : (_homeTabsState$appMod = homeTabsState.appModuleConfig) === null || _homeTabsState$appMod === void 0 ? void 0 : _homeTabsState$appMod[v[0]];\n  }).map(function (v) {\n    return __jsx(Tab, {\n      key: \"AppModuleTypeEnum_\".concat(v[0]),\n      value: v[0],\n      label: ls(v[1])\n    });\n  })), __jsx(\"main\", {\n    style: {\n      marginTop: '10px'\n    },\n    className: \"jsx-1221730688\"\n  }, router.query.appModule === AppModuleTypeEnum.categorySelection && __jsx(CategorySelection, null), router.query.appModule === AppModuleTypeEnum.limitTime && __jsx(PromotionFlashSale, null), router.query.appModule === AppModuleTypeEnum.themeSelection && __jsx(ThemeSelection, null), router.query.appModule === AppModuleTypeEnum.salesRank && __jsx(SalesRank, null), router.query.appModule === AppModuleTypeEnum.lineRanking && __jsx(LineRanking, null)), __jsx(UpdateShopCart, null), __jsx(_JSXStyle, {\n    id: \"1221730688\"\n  }, [\"div.jsx-1221730688 .MuiButtonBase-root{padding:0;}\"]));\n};","map":null,"metadata":{},"sourceType":"module"}