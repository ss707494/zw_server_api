{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { HeaderTitle } from '../../../components/HeaderTitle/HeaderTitle';\nimport { BScroller } from '../../../components/BScroll/BScroller';\nimport styled from 'styled-components';\nimport { modelFactory } from '../../../ModelAction/modelUtil';\nimport { doc } from '../../../graphqlTypes/doc';\nimport { formatDate, fpMergePre } from '../../../tools/utils';\nimport { useStoreModel } from '../../../ModelAction/useStore';\nimport { useRouter } from 'next/router';\nimport { ls } from '../../../tools/dealKey';\nimport { orderStateToString } from '../../../ss_common/enum';\nimport { mpStyle } from '../../../style/common';\nimport { grey } from '@material-ui/core/colors';\nexport const orderDetailModel = modelFactory('orderDetail', {\n  orderInfo: {}\n}, {\n  getDetail: async (value, option) => {\n    const res = await option.query(doc.orderDetail, {\n      id: value\n    });\n    option.setData(fpMergePre({\n      orderInfo: res === null || res === void 0 ? void 0 : res.orderDetail\n    }));\n  }\n});\nconst Box = styled.div.withConfig({\n  displayName: \"orderDetail__Box\",\n  componentId: \"lz0d8y-0\"\n})([\"padding:0 20px;\"]);\nconst Top = styled.div.withConfig({\n  displayName: \"orderDetail__Top\",\n  componentId: \"lz0d8y-1\"\n})([\"margin-top:10px;font-size:18px;display:flex;> aside{margin-left:20px;color:\", \";}\"], mpStyle.red);\nconst InfoLabel = styled.div.withConfig({\n  displayName: \"orderDetail__InfoLabel\",\n  componentId: \"lz0d8y-2\"\n})([\"display:flex;margin-top:16px;> aside{color:\", \";width:80px;}\"], grey[600]);\nexport const OrderDetail = () => {\n  var _orderInfo$userAddres, _orderInfo$userPayCar, _orderInfo$userPayCar2, _orderInfo$userPayCar3;\n\n  const router = useRouter();\n  const {\n    state: stateOD,\n    actions: actionsOD\n  } = useStoreModel(orderDetailModel);\n  const orderInfo = stateOD.orderInfo;\n  console.log(orderInfo);\n  useEffect(() => {\n    var _stateOD$orderInfo;\n\n    if (router.query.id && !((_stateOD$orderInfo = stateOD.orderInfo) === null || _stateOD$orderInfo === void 0 ? void 0 : _stateOD$orderInfo.id)) {\n      var _router$query;\n\n      actionsOD.getDetail(`${(_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.id}`);\n    }\n  }, [router.query.id, stateOD.orderInfo]);\n  return __jsx(\"div\", null, __jsx(HeaderTitle, {\n    title: '订单详情'\n  }), !(orderInfo === null || orderInfo === void 0 ? void 0 : orderInfo.id) ? __jsx(\"div\", null) : __jsx(BScroller, {\n    boxHeight: 'calc(100vh - 60px)'\n  }, __jsx(Box, null, __jsx(Top, null, __jsx(\"section\", null, ls(formatDate(orderInfo.createTime))), __jsx(\"aside\", null, orderStateToString(orderInfo === null || orderInfo === void 0 ? void 0 : orderInfo.state))), __jsx(InfoLabel, null, __jsx(\"aside\", null, ls('送货地址'), \" :\"), __jsx(\"section\", null, (_orderInfo$userAddres = orderInfo.userAddress) === null || _orderInfo$userAddres === void 0 ? void 0 : _orderInfo$userAddres.combineAddress)), __jsx(InfoLabel, null, __jsx(\"aside\", null, ls('订单编号'), \" :\"), __jsx(\"section\", null, orderInfo.number)), __jsx(InfoLabel, null, __jsx(\"aside\", null, ls('支付方式'), \" :\"), __jsx(\"section\", null, __jsx(\"header\", null, orderInfo === null || orderInfo === void 0 ? void 0 : (_orderInfo$userPayCar = orderInfo.userPayCard) === null || _orderInfo$userPayCar === void 0 ? void 0 : _orderInfo$userPayCar.code), __jsx(\"main\", null, formatDate(orderInfo === null || orderInfo === void 0 ? void 0 : (_orderInfo$userPayCar2 = orderInfo.userPayCard) === null || _orderInfo$userPayCar2 === void 0 ? void 0 : _orderInfo$userPayCar2.expirationTime, 'MM/yy')), __jsx(\"footer\", null, orderInfo === null || orderInfo === void 0 ? void 0 : (_orderInfo$userPayCar3 = orderInfo.userPayCard) === null || _orderInfo$userPayCar3 === void 0 ? void 0 : _orderInfo$userPayCar3.userName))), __jsx(\"div\", {\n    style: {\n      marginTop: '12px',\n      position: 'relative',\n      left: '-20px',\n      width: '100vw',\n      height: '12px',\n      background: grey[200]\n    }\n  }))));\n};","map":null,"metadata":{},"sourceType":"module"}