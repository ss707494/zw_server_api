{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport StorefrontIcon from '@material-ui/icons/Storefront';\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\nimport RedeemIcon from '@material-ui/icons/Redeem';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport PeopleIcon from '@material-ui/icons/People';\nimport { useRouter } from 'next/router';\nimport red from '@material-ui/core/colors/red';\nimport { AppFootBar } from '../../ss_common/enum';\nimport { useStoreModel } from '../../ModelAction/useStore';\nimport { shopCartModel } from '../../view/cart';\nimport { mpStyle } from '../../style/common';\nimport { throttle } from 'lodash';\nimport { modelFactory } from '../../ModelAction/modelUtil';\nimport { fpMergePre } from '../../tools/utils';\nvar footBarModel = modelFactory('footBarModel', {\n  hide: false\n}, {\n  changeHide: function changeHide(value, option) {\n    option.setData(fpMergePre({\n      hide: value\n    }));\n  }\n});\nvar lastScrollTop = 0;\nexport var FootBar = function FootBar() {\n  var router = useRouter();\n\n  var _useStoreModel = useStoreModel(shopCartModel),\n      stateShopCart = _useStoreModel.state,\n      actionsShopCart = _useStoreModel.actions;\n\n  var _useStoreModel2 = useStoreModel(footBarModel),\n      stateFootBarModel = _useStoreModel2.state,\n      actionsFootBarModel = _useStoreModel2.actions;\n\n  useEffect(function () {\n    window.addEventListener(\"scroll\", throttle(function () {\n      // or window.addEventListener(\"scroll\"....\n      var st = window.pageYOffset || document.documentElement.scrollTop; // Credits: \"https://github.com/qeremy/so/blob/master/so.dom.js#L426\"\n\n      if (st > lastScrollTop) {\n        console.log('down');\n        actionsFootBarModel.changeHide(true); // downscroll code\n      } else {\n        console.log('up');\n        actionsFootBarModel.changeHide(false); // upscroll code\n      }\n\n      lastScrollTop = st <= 0 ? 0 : st; // For Mobile or negative scrolling\n    }, 500), false);\n  }, []);\n  useEffect(function () {\n    if (!stateShopCart.user.id) {\n      actionsShopCart.getList();\n    }\n  }, []);\n\n  var isAct = function isAct(path) {\n    return router.pathname.includes(path);\n  };\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3610797600\", [stateFootBarModel.hide ? '-60px' : '0', mpStyle.red, red[600]]]]) + \" \" + 'FootBar'\n  }, [['逛店', __jsx(StorefrontIcon, null), \"/\".concat(AppFootBar.home)], ['拼团', __jsx(PeopleIcon, null), \"/\".concat(AppFootBar.group)], ['达人卡', __jsx(RedeemIcon, null), \"/\".concat(AppFootBar.card)], ['购物车', __jsx(ShoppingCartIcon, null), \"/\".concat(AppFootBar.cart), stateShopCart.dealProductNumber(stateShopCart)], ['我', __jsx(AccountBoxIcon, null), \"/\".concat(AppFootBar.me)]].map(function (v) {\n    return __jsx(\"section\", {\n      key: \"FootBar_\".concat(v[0]),\n      onClick: function onClick() {\n        return isAct(v[2]) ? router.reload() : router.push(v[2]);\n      },\n      className: _JSXStyle.dynamic([[\"3610797600\", [stateFootBarModel.hide ? '-60px' : '0', mpStyle.red, red[600]]]]) + \" \" + ((isAct(v[2]) ? 'act' : '') || \"\")\n    }, v[1], __jsx(\"span\", {\n      className: _JSXStyle.dynamic([[\"3610797600\", [stateFootBarModel.hide ? '-60px' : '0', mpStyle.red, red[600]]]])\n    }, v[0]), ~~v[3] > 0 && __jsx(\"aside\", {\n      className: _JSXStyle.dynamic([[\"3610797600\", [stateFootBarModel.hide ? '-60px' : '0', mpStyle.red, red[600]]]])\n    }, v[3]));\n  }), __jsx(_JSXStyle, {\n    id: \"3610797600\",\n    dynamic: [stateFootBarModel.hide ? '-60px' : '0', mpStyle.red, red[600]]\n  }, [\".FootBar.__jsx-style-dynamic-selector{-webkit-transition:all 500ms ease 0s;transition:all 500ms ease 0s;position:fixed;bottom:\".concat(stateFootBarModel.hide ? '-60px' : '0', \";height:14.0625vw;width:100vw;box-shadow:0 0.9375vw 1.25vw 0 rgba(0,0,0,0.14),0 0.9375vw 0.9375vw -0.625vw rgba(0,0,0,0.12),0 1px 2.5vw 0 rgba(0,0,0,0.2);background:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\"), \".FootBar.__jsx-style-dynamic-selector>section.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;}\", \".FootBar.__jsx-style-dynamic-selector>section.__jsx-style-dynamic-selector>aside.__jsx-style-dynamic-selector{position:absolute;top:0;right:20%;border-radius:50%;width:5vw;height:5vw;background:\".concat(mpStyle.red, \";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#fff;}\"), \".act.__jsx-style-dynamic-selector{color:\".concat(red[600], \";}\")]));\n};","map":null,"metadata":{},"sourceType":"module"}