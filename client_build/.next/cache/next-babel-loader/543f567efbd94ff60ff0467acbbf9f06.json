{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useEffect } from 'react';\nimport { PcHeader } from '../pcComponents/header/header';\nimport { PcContentBox } from '../home/pcHome';\nimport { TopAction } from '../pcComponents/topAction/topAction';\nimport { HeaderTab, HeaderTabModel } from '../home/components/headerTab';\nimport { Space } from '../../../components/Box/Box';\nimport { useStoreModel } from '../../../ModelAction/useStore';\nimport { useRouter } from 'next/router';\nimport { productListModel } from '../../m/productList/[id]';\nimport { HomeType } from '../../m/home/appModule';\nimport { categoryItemModel, CategoryPageModel } from '../../m/category/[id]';\nimport { homeCategorySelectionModel } from '../../m/home/components/CategorySelection/CategorySelection';\nimport styled from 'styled-components';\nimport { ProductItemBox } from '../pcComponents/productItemBox/productItemBox';\nimport { ll } from '../../../tools/dealKey';\nimport { MainBox } from '../pcComponents/mainBox/mainBox';\nimport { HomeTabsModel } from '../../m/home/components/Tabs/Tabs';\nvar ProductBox = styled.div.withConfig({\n  displayName: \"category__ProductBox\",\n  componentId: \"vljoar-0\"\n})([\"display:grid;grid-template-columns:repeat(6,1fr);grid-gap:16px;justify-items:center;\"]);\nvar Filter = styled.div.withConfig({\n  displayName: \"category__Filter\",\n  componentId: \"vljoar-1\"\n})([\"\"]);\nexport var PcCategory = function PcCategory() {\n  var _ref, _router$query;\n\n  var router = useRouter();\n  var id = (_ref = (_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.id) !== null && _ref !== void 0 ? _ref : '';\n\n  var _useStoreModel = useStoreModel(HeaderTabModel),\n      actionsHeaderTabModel = _useStoreModel.actions,\n      stateHeaderTabModel = _useStoreModel.state;\n\n  var _useStoreModel2 = useStoreModel(productListModel),\n      actionsProductListModel = _useStoreModel2.actions,\n      stateProductListModel = _useStoreModel2.state;\n\n  var _useStoreModel3 = useStoreModel(categoryItemModel),\n      actionsCategoryItemModel = _useStoreModel3.actions,\n      stateCategoryItemModel = _useStoreModel3.state;\n\n  var _useStoreModel4 = useStoreModel(CategoryPageModel),\n      actionsCategoryPageModel = _useStoreModel4.actions,\n      stateCategoryPageModel = _useStoreModel4.state;\n\n  var _useStoreModel5 = useStoreModel(CategoryPageModel, 'CategoryPageModel3'),\n      actionsCategoryPageModel3 = _useStoreModel5.actions,\n      stateCategoryPageModel3 = _useStoreModel5.state;\n\n  var _useStoreModel6 = useStoreModel(homeCategorySelectionModel),\n      actionsHomeCategorySelectionModel = _useStoreModel6.actions,\n      stateHomeCategorySelectionModel = _useStoreModel6.state;\n\n  var _useStoreModel7 = useStoreModel(HomeTabsModel),\n      stateHomeTabs = _useStoreModel7.state,\n      actionsHomeTabs = _useStoreModel7.actions;\n\n  useEffect(function () {\n    var _ref2;\n\n    actionsHomeTabs.setHomeType((_ref2 = router.query.homeType) !== null && _ref2 !== void 0 ? _ref2 : HomeType.home);\n  }, [actionsHomeTabs, router.query.homeType]);\n  useEffect(function () {\n    actionsHeaderTabModel.switchIsCategory(true);\n  }, [actionsHeaderTabModel]);\n  var getCat = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _category$parentCateg, _category$parentCateg2, _category$parentCateg7, category, _category$parentCateg3, _category$parentCateg4, _category$parentCateg5, _category$parentCateg6, _category$parentCateg8, _category$parentCateg9;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!id) {\n              _context.next = 15;\n              break;\n            }\n\n            _context.next = 3;\n            return actionsCategoryItemModel.getCategory({\n              id: id\n            });\n\n          case 3:\n            category = _context.sent;\n\n            if (!(category === null || category === void 0 ? void 0 : (_category$parentCateg = category.parentCategory) === null || _category$parentCateg === void 0 ? void 0 : (_category$parentCateg2 = _category$parentCateg.parentCategory) === null || _category$parentCateg2 === void 0 ? void 0 : _category$parentCateg2.id)) {\n              _context.next = 8;\n              break;\n            }\n\n            actionsHomeCategorySelectionModel.changeActId(category === null || category === void 0 ? void 0 : (_category$parentCateg3 = category.parentCategory) === null || _category$parentCateg3 === void 0 ? void 0 : (_category$parentCateg4 = _category$parentCateg3.parentCategory) === null || _category$parentCateg4 === void 0 ? void 0 : _category$parentCateg4.id);\n            _context.next = 8;\n            return actionsCategoryPageModel.getProductList({\n              categoryItemInput: {\n                id: category === null || category === void 0 ? void 0 : (_category$parentCateg5 = category.parentCategory) === null || _category$parentCateg5 === void 0 ? void 0 : (_category$parentCateg6 = _category$parentCateg5.parentCategory) === null || _category$parentCateg6 === void 0 ? void 0 : _category$parentCateg6.id\n              },\n              productItemInput: {\n                isGroup: 0\n              }\n            });\n\n          case 8:\n            if (!(category === null || category === void 0 ? void 0 : (_category$parentCateg7 = category.parentCategory) === null || _category$parentCateg7 === void 0 ? void 0 : _category$parentCateg7.id)) {\n              _context.next = 12;\n              break;\n            }\n\n            actionsCategoryPageModel.changeActCatId(category === null || category === void 0 ? void 0 : (_category$parentCateg8 = category.parentCategory) === null || _category$parentCateg8 === void 0 ? void 0 : _category$parentCateg8.id);\n            _context.next = 12;\n            return actionsCategoryPageModel3.getProductList({\n              categoryItemInput: {\n                id: category === null || category === void 0 ? void 0 : (_category$parentCateg9 = category.parentCategory) === null || _category$parentCateg9 === void 0 ? void 0 : _category$parentCateg9.id\n              },\n              productItemInput: {\n                isGroup: 0\n              }\n            });\n\n          case 12:\n            if (category === null || category === void 0 ? void 0 : category.id) {\n              actionsCategoryPageModel3.changeActCatId(category === null || category === void 0 ? void 0 : category.id);\n            }\n\n            _context.next = 15;\n            return actionsProductListModel.getData({\n              isGroup: router.query.homeType === HomeType.group ? 1 : 0,\n              category: {\n                id: id\n              }\n            });\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [actionsCategoryItemModel, actionsCategoryPageModel, actionsCategoryPageModel3, actionsHomeCategorySelectionModel, actionsProductListModel, id, router.query.homeType]);\n  useEffect(function () {\n    getCat();\n  }, [getCat, id]);\n  return __jsx(MainBox, null, __jsx(PcHeader, null), __jsx(PcContentBox, null, __jsx(TopAction, null), __jsx(HeaderTab, null), __jsx(Space, {\n    h: 16\n  }), __jsx(Filter, null, __jsx(\"div\", null), __jsx(\"div\", null, stateProductListModel.total, ll('条结果'))), __jsx(Space, {\n    h: 16\n  }), __jsx(ProductBox, null, stateProductListModel.productList.map(function (product) {\n    return __jsx(ProductItemBox, {\n      key: \"stateProductListModel.productList_\".concat(product.id),\n      product: product,\n      type: stateHomeTabs.homeType\n    });\n  }))));\n};","map":null,"metadata":{},"sourceType":"module"}