{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { doc } from '../../graphqlTypes/doc';\nimport { dealMoney, fpMerge } from '../../tools/utils';\nimport { useStoreModel } from '../../ModelAction/useStore';\nimport { ls } from '../../tools/dealKey';\nimport { HeaderTitle } from '../../components/HeaderTitle/HeaderTitle';\nimport { Box, Button, LinearProgress, MenuItem, TextField } from '@material-ui/core';\nimport { grey } from '@material-ui/core/colors';\nimport styled from 'styled-components';\nimport { getPickUpTypeName, PickUpTypeEnum } from '../../ss_common/enum';\nimport { CartProduct } from './CartProduct';\nimport { BScroller } from '../../components/BScroll/BScroller';\nimport { pageTypeEnum, shopCartModel } from './index';\nvar BoxContain = styled.section.withConfig({\n  displayName: \"shopCart__BoxContain\",\n  componentId: \"sc-2w144c-0\"\n})([\"padding:0 20px;\"]);\nvar Title = styled.div.withConfig({\n  displayName: \"shopCart__Title\",\n  componentId: \"sc-2w144c-1\"\n})([\"font-size:18px;font-weight:bold;margin:16px 0 12px;\"]);\nvar Money = styled.div.withConfig({\n  displayName: \"shopCart__Money\",\n  componentId: \"sc-2w144c-2\"\n})([\"display:flex;justify-content:space-between;\"]);\nvar FixFooter = styled(Box).withConfig({\n  displayName: \"shopCart__FixFooter\",\n  componentId: \"sc-2w144c-3\"\n})([\"padding:20px;position:fixed;bottom:0;width:100vw;box-sizing:border-box;background:#fff;\"]);\nexport var ShopCartPage = function ShopCartPage() {\n  var _useStoreModel = useStoreModel(shopCartModel),\n      stateSCM = _useStoreModel.state,\n      actionsSCM = _useStoreModel.actions,\n      getLoad = _useStoreModel.getLoad;\n\n  useEffect(function () {\n    if (stateSCM.shopCartList.length === 0) {\n      actionsSCM.getList();\n    }\n  }, []);\n  var productNumber = stateSCM.dealProductNumber(stateSCM);\n  var productSubtotal = dealMoney(stateSCM.dealProductTotal(stateSCM));\n  var allTotal = productSubtotal + 0;\n  return __jsx(\"div\", null, __jsx(HeaderTitle, {\n    title: '购物车'\n  }), !!getLoad(doc.userShopCartList) && __jsx(LinearProgress, null) || __jsx(\"div\", {\n    style: {\n      height: '4px'\n    }\n  }), __jsx(BScroller, {\n    boxHeight: 'calc(100vh - 65px)'\n  }, __jsx(BoxContain, null, __jsx(\"div\", {\n    style: {\n      paddingTop: '16px',\n      fontSize: '18px',\n      textAlign: 'center'\n    }\n  }, productNumber, ls('件商品')), __jsx(\"div\", {\n    style: {\n      fontSize: '14px',\n      textAlign: 'center',\n      color: grey[600],\n      marginTop: '8px',\n      marginBottom: '10px'\n    }\n  }, ls('小计'), \":\", productSubtotal), stateSCM.shopCartList.map(function (value) {\n    return __jsx(CartProduct, {\n      key: \"CartProduct_\".concat(value.id),\n      shopCart: value\n    });\n  }), __jsx(TextField, {\n    style: {\n      marginTop: '10px'\n    },\n    fullWidth: true,\n    label: ls('运送方式'),\n    select: true,\n    value: stateSCM.form.pickUpType,\n    onChange: function onChange(event) {\n      actionsSCM.setForm(['pickUpType', event.target.value]);\n      actionsSCM.setForm(['addressId', stateSCM.initAddressId(fpMerge(stateSCM, {\n        form: {\n          pickUpType: event.target.value\n        }\n      }))]);\n    }\n  }, __jsx(MenuItem, {\n    value: PickUpTypeEnum.Self\n  }, ls(getPickUpTypeName(PickUpTypeEnum.Self))), __jsx(MenuItem, {\n    value: PickUpTypeEnum.Delivery\n  }, ls(getPickUpTypeName(PickUpTypeEnum.Delivery)))), __jsx(Title, null, ls('达人卡和优惠券')), __jsx(Button, {\n    variant: 'outlined'\n  }, ls('输入验证码')), __jsx(Title, null, ls('预估价格')), __jsx(Money, null, __jsx(\"aside\", null, ls('小计')), __jsx(\"main\", null, productSubtotal)), __jsx(\"div\", {\n    style: {\n      width: '100%',\n      height: '10px'\n    }\n  }), __jsx(Money, null, __jsx(\"aside\", null, ls('总计')), __jsx(\"main\", null, allTotal)), __jsx(Title, null, ls('下次购买的商品')), stateSCM.shopCartListNext.map(function (value) {\n    return __jsx(CartProduct, {\n      key: \"CartProduct_\".concat(value.id),\n      shopCart: value\n    });\n  }), __jsx(\"div\", {\n    style: {\n      width: '100%',\n      height: '100px'\n    }\n  }))), __jsx(FixFooter, {\n    boxShadow: 1\n  }, __jsx(Button, {\n    variant: 'contained',\n    color: 'secondary',\n    fullWidth: true,\n    onClick: function onClick() {\n      return actionsSCM.updatePageType(pageTypeEnum.order);\n    }\n  }, \"\\u53BB\\u7ED3\\u7B97\")));\n};","map":null,"metadata":{},"sourceType":"module"}