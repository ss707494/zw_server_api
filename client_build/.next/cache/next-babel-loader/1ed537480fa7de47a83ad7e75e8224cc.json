{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\code\\\\zw\\\\zw_client_web\\\\utils\\\\view\\\\pc\\\\pcComponents\\\\productItemBox\\\\productItemBox.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport styled from 'styled-components';\nimport React from 'react';\nimport { dealImgUrl } from '../../../../tools/img';\nimport { dealMoney } from '../../../../tools/utils';\nimport { mpStyle } from '../../../../style/common';\nimport { Space } from '../../../../components/Box/Box';\nimport { Button, Card } from '@material-ui/core';\nimport { ShoppingCart } from '@material-ui/icons';\nimport { useStoreModel } from '../../../../ModelAction/useStore';\nimport { updateShopCartModel } from '../../../../components/ProductItem/UpdateShopCart';\nimport { showMessage } from '../../../../components/Message/Message';\nimport { productModel } from '../../../../components/ProductItem/ProductItem';\nimport { shopCartModel } from '../../../m/cart';\nimport { HomeType } from '../../../m/home/appModule';\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\nimport { useRouter } from 'next/router';\nvar Box = styled(Card).withConfig({\n  displayName: \"productItemBox__Box\",\n  componentId: \"sc-1i837b0-0\"\n})([\"display:flex;flex-direction:column;width:\", \";padding:14px 20px 16px;&&&{box-shadow:none;}\"], function (props) {\n  var _props$width;\n\n  return \"\".concat((_props$width = props.width) !== null && _props$width !== void 0 ? _props$width : 322, \"px\");\n});\n_c = Box;\nvar ImgBox = styled.div.withConfig({\n  displayName: \"productItemBox__ImgBox\",\n  componentId: \"sc-1i837b0-1\"\n})([\"align-self:center;> img{width:\", \";height:\", \";}\"], function (props) {\n  var _props$width2;\n\n  return \"\".concat(((_props$width2 = props.width) !== null && _props$width2 !== void 0 ? _props$width2 : 260) - 40, \"px\");\n}, function (props) {\n  var _props$width3;\n\n  return \"\".concat((((_props$width3 = props.width) !== null && _props$width3 !== void 0 ? _props$width3 : 260) - 40) * 4 / 3, \"px\");\n});\n_c2 = ImgBox;\nvar Price = styled.div.withConfig({\n  displayName: \"productItemBox__Price\",\n  componentId: \"sc-1i837b0-2\"\n})([\"display:flex;align-items:center;> aside{\", \";font-size:\", \";color:\", \";}> main{font-size:\", \";font-weight:400;text-decoration:line-through;color:\", \";}\"], mpStyle.fontType.xl, function (props) {\n  var _props$width4;\n\n  return \"\".concat(((_props$width4 = props.width) !== null && _props$width4 !== void 0 ? _props$width4 : 260) / 10 - 2, \"px\");\n}, mpStyle.red, function (props) {\n  var _props$width5;\n\n  return \"\".concat(((_props$width5 = props.width) !== null && _props$width5 !== void 0 ? _props$width5 : 260) / 10 - 8, \"px\");\n}, mpStyle.grey);\n_c3 = Price;\nvar Footer = styled.div.withConfig({\n  displayName: \"productItemBox__Footer\",\n  componentId: \"sc-1i837b0-3\"\n})([\"display:flex;&&&{.MuiButton-root{width:\", \";min-width:\", \";height:\", \";padding:0;}.MuiSvgIcon-root{font-size:\", \";}}\"], function (props) {\n  var _props$width6;\n\n  return \"\".concat(((_props$width6 = props.width) !== null && _props$width6 !== void 0 ? _props$width6 : 260) * .17, \"px\");\n}, function (props) {\n  var _props$width7;\n\n  return \"\".concat(((_props$width7 = props.width) !== null && _props$width7 !== void 0 ? _props$width7 : 260) * .17, \"px\");\n}, function (props) {\n  var _props$width8;\n\n  return \"\".concat(((_props$width8 = props.width) !== null && _props$width8 !== void 0 ? _props$width8 : 260) * .17, \"px\");\n}, function (props) {\n  var _props$width9;\n\n  return \"\".concat(((_props$width9 = props.width) !== null && _props$width9 !== void 0 ? _props$width9 : 260) * .1, \"px\");\n});\n_c4 = Footer;\nvar Name = styled.div.withConfig({\n  displayName: \"productItemBox__Name\",\n  componentId: \"sc-1i837b0-4\"\n})([\"flex-grow:1;\", \";font-size:\", \";\"], mpStyle.fontType.n, function (props) {\n  var _props$width10;\n\n  return \"\".concat(((_props$width10 = props.width) !== null && _props$width10 !== void 0 ? _props$width10 : 260) / 10 - 10, \"px\");\n});\n_c5 = Name;\nexport var ProductItemBox = function ProductItemBox(_ref) {\n  _s();\n\n  var _product$img, _product$img$;\n\n  var _ref$hideShopCartButt = _ref.hideShopCartButton,\n      hideShopCartButton = _ref$hideShopCartButt === void 0 ? false : _ref$hideShopCartButt,\n      _ref$hidePrice = _ref.hidePrice,\n      hidePrice = _ref$hidePrice === void 0 ? false : _ref$hidePrice,\n      product = _ref.product,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 300 : _ref$width,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? HomeType.home : _ref$type;\n  var router = useRouter();\n\n  var _useStoreModel = useStoreModel(updateShopCartModel),\n      actionsUpdateShopCartModel = _useStoreModel.actions;\n\n  var _useStoreModel2 = useStoreModel(productModel),\n      actionsProductModel = _useStoreModel2.actions;\n\n  var _useStoreModel3 = useStoreModel(shopCartModel),\n      actionsShopCartModel = _useStoreModel3.actions;\n\n  var _width = width - 40;\n\n  return __jsx(Box, {\n    width: _width,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 10\n    }\n  }, __jsx(ImgBox, {\n    width: _width,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, __jsx(\"img\", {\n    src: dealImgUrl(product === null || product === void 0 ? void 0 : (_product$img = product.img) === null || _product$img === void 0 ? void 0 : (_product$img$ = _product$img[0]) === null || _product$img$ === void 0 ? void 0 : _product$img$.url),\n    alt: '',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  })), __jsx(Space, {\n    h: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }), !hidePrice && __jsx(React.Fragment, null, __jsx(Price, {\n    width: _width,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, __jsx(\"aside\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, dealMoney(product === null || product === void 0 ? void 0 : product.priceOut)), __jsx(Space, {\n    w: 16,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }), __jsx(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, dealMoney(product === null || product === void 0 ? void 0 : product.priceMarket))), __jsx(Space, {\n    h: 5,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  })), __jsx(Footer, {\n    width: _width,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, __jsx(Name, {\n    width: _width,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, product.name), !hideShopCartButton && __jsx(Button, {\n    variant: 'contained',\n    color: 'secondary',\n    size: 'small',\n    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, _yield$actionsProduct, _yield$actionsProduct2;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(type === HomeType.home)) {\n                _context.next = 21;\n                break;\n              }\n\n              _context.next = 3;\n              return actionsUpdateShopCartModel.openClick();\n\n            case 3:\n              res = _context.sent;\n\n              if (!((res === null || res === void 0 ? void 0 : res.num) > 0)) {\n                _context.next = 19;\n                break;\n              }\n\n              _context.next = 7;\n              return actionsProductModel.updateNumShopCart({\n                product: product,\n                number: ~~(res === null || res === void 0 ? void 0 : res.num)\n              });\n\n            case 7:\n              _context.t1 = _yield$actionsProduct = _context.sent;\n              _context.t0 = _context.t1 === null;\n\n              if (_context.t0) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.t0 = _yield$actionsProduct === void 0;\n\n            case 11:\n              if (!_context.t0) {\n                _context.next = 15;\n                break;\n              }\n\n              _context.t2 = void 0;\n              _context.next = 16;\n              break;\n\n            case 15:\n              _context.t2 = (_yield$actionsProduct2 = _yield$actionsProduct.updateNumShopCart) === null || _yield$actionsProduct2 === void 0 ? void 0 : _yield$actionsProduct2.id;\n\n            case 16:\n              if (!_context.t2) {\n                _context.next = 19;\n                break;\n              }\n\n              showMessage('操作成功');\n              actionsShopCartModel.getList();\n\n            case 19:\n              _context.next = 24;\n              break;\n\n            case 21:\n              if (!(type === HomeType.group)) {\n                _context.next = 24;\n                break;\n              }\n\n              _context.next = 24;\n              return router.push({\n                pathname: '/pc/groupProduct/[id]',\n                query: {\n                  id: product.id\n                }\n              });\n\n            case 24:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 31\n    }\n  }, type === HomeType.home && __jsx(ShoppingCart, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 36\n    }\n  }), type === HomeType.group && __jsx(AddCircleOutlineIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 37\n    }\n  }))));\n};\n\n_s(ProductItemBox, \"GWXVDZOVWaZ/kW3v+ugT/XjBkI8=\", false, function () {\n  return [useRouter, useStoreModel, useStoreModel, useStoreModel];\n});\n\n_c6 = ProductItemBox;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"Box\");\n$RefreshReg$(_c2, \"ImgBox\");\n$RefreshReg$(_c3, \"Price\");\n$RefreshReg$(_c4, \"Footer\");\n$RefreshReg$(_c5, \"Name\");\n$RefreshReg$(_c6, \"ProductItemBox\");","map":{"version":3,"sources":["D:/code/zw/zw_client_web/utils/view/pc/pcComponents/productItemBox/productItemBox.tsx"],"names":["styled","React","dealImgUrl","dealMoney","mpStyle","Space","Button","Card","ShoppingCart","useStoreModel","updateShopCartModel","showMessage","productModel","shopCartModel","HomeType","AddCircleOutlineIcon","useRouter","Box","props","width","ImgBox","div","Price","fontType","xl","red","grey","Footer","Name","n","ProductItemBox","hideShopCartButton","hidePrice","product","type","home","router","actionsUpdateShopCartModel","actions","actionsProductModel","actionsShopCartModel","_width","img","url","priceOut","priceMarket","name","openClick","res","num","updateNumShopCart","number","id","getList","group","push","pathname","query"],"mappings":"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","sourcesContent":["import styled from 'styled-components'\r\nimport React from 'react'\r\nimport {Product} from '../../../../graphqlTypes/types'\r\nimport {dealImgUrl} from '../../../../tools/img'\r\nimport {dealMoney} from '../../../../tools/utils'\r\nimport {mpStyle} from '../../../../style/common'\r\nimport {Space} from '../../../../components/Box/Box'\r\nimport {Button, Card} from '@material-ui/core'\r\nimport {ShoppingCart} from '@material-ui/icons'\r\nimport {useStoreModel} from '../../../../ModelAction/useStore'\r\nimport {updateShopCartModel} from '../../../../components/ProductItem/UpdateShopCart'\r\nimport {showMessage} from '../../../../components/Message/Message'\r\nimport {productModel} from '../../../../components/ProductItem/ProductItem'\r\nimport {shopCartModel} from '../../../m/cart'\r\nimport {HomeType} from '../../../m/home/appModule'\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline'\r\nimport {useRouter} from 'next/router'\r\n\r\nconst Box = styled(Card)<{ width?: number }>`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: ${props => `${props.width ?? 322}px`};\r\n  padding: 14px 20px 16px;\r\n\r\n  &&& {\r\n    box-shadow: none;\r\n  }\r\n`\r\nconst ImgBox = styled.div<{ width?: number }>`\r\n  align-self: center;\r\n\r\n  > img {\r\n    width: ${props => `${(props.width ?? 260) - 40}px`};\r\n    height: ${props => `${((props.width ?? 260) - 40) * 4 / 3}px`};\r\n  }\r\n`\r\nconst Price = styled.div<{ width?: number }>`\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  > aside {\r\n    ${mpStyle.fontType.xl};\r\n    font-size: ${props => `${(props.width ?? 260) / 10 - 2}px`};\r\n    color: ${mpStyle.red};\r\n  }\r\n\r\n  > main {\r\n    font-size: ${props => `${(props.width ?? 260) / 10 - 8}px`};\r\n    font-weight: 400;\r\n    text-decoration: line-through;\r\n    color: ${mpStyle.grey};\r\n  }\r\n`\r\nconst Footer = styled.div<{ width?: number }>`\r\n  display: flex;\r\n\r\n  &&& {\r\n    .MuiButton-root {\r\n      width: ${props => `${(props.width ?? 260) * .17}px`};\r\n      min-width: ${props => `${(props.width ?? 260) * .17}px`};\r\n      height: ${props => `${(props.width ?? 260) * .17}px`};\r\n      padding: 0;\r\n    }\r\n\r\n    .MuiSvgIcon-root {\r\n      font-size: ${props => `${(props.width ?? 260) * .1}px`};\r\n    }\r\n  }\r\n`\r\nconst Name = styled.div<{ width?: number }>`\r\n  flex-grow: 1;\r\n  ${mpStyle.fontType.n};\r\n  font-size: ${props => `${(props.width ?? 260) / 10 - 10}px`};\r\n`\r\n\r\nexport const ProductItemBox = (\r\n    {\r\n      hideShopCartButton = false,\r\n      hidePrice = false,\r\n      product,\r\n      width = 300,\r\n      type = HomeType.home,\r\n    }: {\r\n      product: Product,\r\n      type?: string,\r\n      width?: number,\r\n      hidePrice?: boolean,\r\n      hideShopCartButton?: boolean,\r\n    }) => {\r\n  const router = useRouter()\r\n  const {actions: actionsUpdateShopCartModel} = useStoreModel(updateShopCartModel)\r\n  const {actions: actionsProductModel} = useStoreModel(productModel)\r\n  const {actions: actionsShopCartModel} = useStoreModel(shopCartModel)\r\n  const _width = width - 40\r\n\r\n  return <Box\r\n      width={_width}\r\n  >\r\n    <ImgBox\r\n        width={_width}\r\n    >\r\n      <img\r\n          src={dealImgUrl(product?.img?.[0]?.url)}\r\n          alt={''}\r\n      />\r\n    </ImgBox>\r\n    <Space h={8}/>\r\n    {!hidePrice && <>\r\n      <Price\r\n          width={_width}\r\n      >\r\n        <aside>{dealMoney(product?.priceOut)}</aside>\r\n        <Space w={16}/>\r\n        <main>{dealMoney(product?.priceMarket)}</main>\r\n      </Price>\r\n      <Space h={5}/>\r\n    </>}\r\n    <Footer\r\n        width={_width}\r\n    >\r\n      <Name\r\n          width={_width}\r\n      >\r\n        {product.name}\r\n      </Name>\r\n      {!hideShopCartButton && <Button\r\n          variant={'contained'}\r\n          color={'secondary'}\r\n          size={'small'}\r\n          onClick={async () => {\r\n            if (type === HomeType.home) {\r\n              const res = await actionsUpdateShopCartModel.openClick()\r\n              if (res?.num > 0) {\r\n                if ((await actionsProductModel.updateNumShopCart({\r\n                  product,\r\n                  number: ~~res?.num,\r\n                }))?.updateNumShopCart?.id) {\r\n                  showMessage('操作成功')\r\n                  actionsShopCartModel.getList()\r\n                }\r\n              }\r\n            } else if (type === HomeType.group) {\r\n              await router.push({\r\n                pathname: '/pc/groupProduct/[id]',\r\n                query: {\r\n                  id: product.id,\r\n                },\r\n              })\r\n            }\r\n          }}\r\n      >\r\n        {type === HomeType.home && <ShoppingCart/>}\r\n        {type === HomeType.group && <AddCircleOutlineIcon/>}\r\n      </Button>}\r\n    </Footer>\r\n  </Box>\r\n}\r\n"]},"metadata":{},"sourceType":"module"}