{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport styled from 'styled-components';\nimport React from 'react';\nimport { dealImgUrl } from '../../../../tools/img';\nimport { dealMoney } from '../../../../tools/utils';\nimport { mpStyle } from '../../../../style/common';\nimport { Space } from '../../../../components/Box/Box';\nimport { Button, Card } from '@material-ui/core';\nimport { ShoppingCart } from '@material-ui/icons';\nimport { useStoreModel } from '../../../../ModelAction/useStore';\nimport { updateShopCartModel } from '../../../../components/ProductItem/UpdateShopCart';\nimport { showMessage } from '../../../../components/Message/Message';\nimport { productModel } from '../../../../components/ProductItem/ProductItem';\nimport { shopCartModel } from '../../../m/cart';\nvar Box = styled(Card).withConfig({\n  displayName: \"productItemBox__Box\",\n  componentId: \"sc-1i837b0-0\"\n})([\"display:flex;flex-direction:column;width:\", \";padding:\", \";\"], function (props) {\n  var _props$width;\n\n  return \"\".concat((_props$width = props.width) !== null && _props$width !== void 0 ? _props$width : 322, \"px\");\n}, mpStyle.spacePx.xs);\nvar ImgBox = styled.div.withConfig({\n  displayName: \"productItemBox__ImgBox\",\n  componentId: \"sc-1i837b0-1\"\n})([\"align-self:center;> img{width:\", \";height:\", \";}\"], function (props) {\n  var _props$width2;\n\n  return \"\".concat(((_props$width2 = props.width) !== null && _props$width2 !== void 0 ? _props$width2 : 322) - 82, \"px\");\n}, function (props) {\n  var _props$width3;\n\n  return \"\".concat((((_props$width3 = props.width) !== null && _props$width3 !== void 0 ? _props$width3 : 322) - 82) * 4 / 3, \"px\");\n});\nvar Price = styled.div.withConfig({\n  displayName: \"productItemBox__Price\",\n  componentId: \"sc-1i837b0-2\"\n})([\"display:flex;align-items:center;> aside{\", \";color:\", \";}> main{\", \";text-decoration:line-through;color:\", \";}\"], mpStyle.fontType.n, mpStyle.red, mpStyle.fontType.s, mpStyle.grey);\nvar Footer = styled.div.withConfig({\n  displayName: \"productItemBox__Footer\",\n  componentId: \"sc-1i837b0-3\"\n})([\"display:flex;\"]);\nvar Name = styled.div.withConfig({\n  displayName: \"productItemBox__Name\",\n  componentId: \"sc-1i837b0-4\"\n})([\"flex-grow:1;\"]);\nexport var ProductItemBox = function ProductItemBox(_ref) {\n  var _product$img, _product$img$;\n\n  var product = _ref.product,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 322 : _ref$width;\n\n  var _useStoreModel = useStoreModel(updateShopCartModel),\n      actionsUpdateShopCartModel = _useStoreModel.actions;\n\n  var _useStoreModel2 = useStoreModel(productModel),\n      actionsProductModel = _useStoreModel2.actions;\n\n  var _useStoreModel3 = useStoreModel(shopCartModel),\n      actionsShopCartModel = _useStoreModel3.actions,\n      stateSCM = _useStoreModel3.state;\n\n  return __jsx(Box, {\n    width: width\n  }, __jsx(ImgBox, {\n    width: width\n  }, __jsx(\"img\", {\n    src: dealImgUrl(product === null || product === void 0 ? void 0 : (_product$img = product.img) === null || _product$img === void 0 ? void 0 : (_product$img$ = _product$img[0]) === null || _product$img$ === void 0 ? void 0 : _product$img$.url),\n    alt: ''\n  })), __jsx(Space, {\n    h: 8\n  }), __jsx(Price, null, __jsx(\"aside\", null, dealMoney(product === null || product === void 0 ? void 0 : product.priceOut)), __jsx(Space, {\n    w: 16\n  }), __jsx(\"main\", null, dealMoney(product === null || product === void 0 ? void 0 : product.priceMarket))), __jsx(Space, {\n    h: 8\n  }), __jsx(Footer, null, __jsx(Name, null, product.name), __jsx(Button, {\n    variant: 'contained',\n    color: 'secondary',\n    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, _yield$actionsProduct, _yield$actionsProduct2;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return actionsUpdateShopCartModel.openClick();\n\n            case 2:\n              res = _context.sent;\n\n              if (!((res === null || res === void 0 ? void 0 : res.num) > 0)) {\n                _context.next = 18;\n                break;\n              }\n\n              _context.next = 6;\n              return actionsProductModel.updateNumShopCart({\n                product: product,\n                number: ~~(res === null || res === void 0 ? void 0 : res.num)\n              });\n\n            case 6:\n              _context.t1 = _yield$actionsProduct = _context.sent;\n              _context.t0 = _context.t1 === null;\n\n              if (_context.t0) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.t0 = _yield$actionsProduct === void 0;\n\n            case 10:\n              if (!_context.t0) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.t2 = void 0;\n              _context.next = 15;\n              break;\n\n            case 14:\n              _context.t2 = (_yield$actionsProduct2 = _yield$actionsProduct.updateNumShopCart) === null || _yield$actionsProduct2 === void 0 ? void 0 : _yield$actionsProduct2.id;\n\n            case 15:\n              if (!_context.t2) {\n                _context.next = 18;\n                break;\n              }\n\n              showMessage('操作成功');\n              actionsShopCartModel.getList();\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))\n  }, __jsx(ShoppingCart, null))));\n};","map":null,"metadata":{},"sourceType":"module"}