{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useCallback, useEffect } from 'react';\nimport { PcHeader } from '../pcComponents/header/header';\nimport { PcContentBox } from '../home/pcHome';\nimport { TopAction } from '../pcComponents/topAction/topAction';\nimport { HeaderTab, HeaderTabModel } from '../home/components/headerTab';\nimport { Space } from '../../../components/Box/Box';\nimport { useStoreModel } from '../../../ModelAction/useStore';\nimport { useRouter } from 'next/router';\nimport { productListModel } from '../../m/productList/[id]';\nimport { HomeType } from '../../m/home/appModule';\nimport { categoryItemModel, CategoryPageModel } from '../../m/category/[id]';\nimport { homeCategorySelectionModel } from '../../m/home/components/CategorySelection/CategorySelection';\nimport styled from 'styled-components';\nimport { ProductItemBox } from '../pcComponents/productItemBox/productItemBox';\nimport { ll } from '../../../tools/dealKey';\nimport { MainBox } from '../pcComponents/mainBox/mainBox';\nconst ProductBox = styled.div.withConfig({\n  displayName: \"category__ProductBox\",\n  componentId: \"vljoar-0\"\n})([\"display:grid;grid-template-columns:repeat(6,1fr);grid-gap:16px;justify-items:center;\"]);\nconst Filter = styled.div.withConfig({\n  displayName: \"category__Filter\",\n  componentId: \"vljoar-1\"\n})([\"\"]);\nexport const PcCategory = () => {\n  var _ref, _router$query;\n\n  const router = useRouter();\n  const id = (_ref = (_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.id) !== null && _ref !== void 0 ? _ref : '';\n  const {\n    actions: actionsHeaderTabModel,\n    state: stateHeaderTabModel\n  } = useStoreModel(HeaderTabModel);\n  const {\n    actions: actionsProductListModel,\n    state: stateProductListModel\n  } = useStoreModel(productListModel);\n  const {\n    actions: actionsCategoryItemModel,\n    state: stateCategoryItemModel\n  } = useStoreModel(categoryItemModel);\n  const {\n    actions: actionsCategoryPageModel,\n    state: stateCategoryPageModel\n  } = useStoreModel(CategoryPageModel);\n  const {\n    actions: actionsCategoryPageModel3,\n    state: stateCategoryPageModel3\n  } = useStoreModel(CategoryPageModel, 'CategoryPageModel3');\n  const {\n    actions: actionsHomeCategorySelectionModel,\n    state: stateHomeCategorySelectionModel\n  } = useStoreModel(homeCategorySelectionModel);\n  useEffect(() => {\n    actionsHeaderTabModel.switchIsCategory(true);\n  }, []);\n  const getCat = useCallback(async () => {\n    if (!!id) {\n      var _category$parentCateg, _category$parentCateg2, _category$parentCateg7;\n\n      const category = await actionsCategoryItemModel.getCategory({\n        id\n      });\n\n      if (category === null || category === void 0 ? void 0 : (_category$parentCateg = category.parentCategory) === null || _category$parentCateg === void 0 ? void 0 : (_category$parentCateg2 = _category$parentCateg.parentCategory) === null || _category$parentCateg2 === void 0 ? void 0 : _category$parentCateg2.id) {\n        var _category$parentCateg3, _category$parentCateg4, _category$parentCateg5, _category$parentCateg6;\n\n        actionsHomeCategorySelectionModel.changeActId(category === null || category === void 0 ? void 0 : (_category$parentCateg3 = category.parentCategory) === null || _category$parentCateg3 === void 0 ? void 0 : (_category$parentCateg4 = _category$parentCateg3.parentCategory) === null || _category$parentCateg4 === void 0 ? void 0 : _category$parentCateg4.id);\n        await actionsCategoryPageModel.getProductList({\n          categoryItemInput: {\n            id: category === null || category === void 0 ? void 0 : (_category$parentCateg5 = category.parentCategory) === null || _category$parentCateg5 === void 0 ? void 0 : (_category$parentCateg6 = _category$parentCateg5.parentCategory) === null || _category$parentCateg6 === void 0 ? void 0 : _category$parentCateg6.id\n          },\n          productItemInput: {\n            isGroup: 0\n          }\n        });\n      }\n\n      if (category === null || category === void 0 ? void 0 : (_category$parentCateg7 = category.parentCategory) === null || _category$parentCateg7 === void 0 ? void 0 : _category$parentCateg7.id) {\n        var _category$parentCateg8, _category$parentCateg9;\n\n        actionsCategoryPageModel.changeActCatId(category === null || category === void 0 ? void 0 : (_category$parentCateg8 = category.parentCategory) === null || _category$parentCateg8 === void 0 ? void 0 : _category$parentCateg8.id);\n        await actionsCategoryPageModel3.getProductList({\n          categoryItemInput: {\n            id: category === null || category === void 0 ? void 0 : (_category$parentCateg9 = category.parentCategory) === null || _category$parentCateg9 === void 0 ? void 0 : _category$parentCateg9.id\n          },\n          productItemInput: {\n            isGroup: 0\n          }\n        });\n      }\n\n      if (category === null || category === void 0 ? void 0 : category.id) {\n        actionsCategoryPageModel3.changeActCatId(category === null || category === void 0 ? void 0 : category.id);\n      }\n\n      await actionsProductListModel.getData({\n        isGroup: router.query.homeType === HomeType.group ? 1 : 0,\n        category: {\n          id\n        }\n      });\n    }\n  }, [id]);\n  useEffect(() => {\n    getCat();\n  }, [id]);\n  return __jsx(MainBox, null, __jsx(PcHeader, null), __jsx(PcContentBox, null, __jsx(TopAction, null), __jsx(HeaderTab, null), __jsx(Space, {\n    h: 16\n  }), __jsx(Filter, null, __jsx(\"div\", null), __jsx(\"div\", null, stateProductListModel.total, ll('条结果'))), __jsx(Space, {\n    h: 16\n  }), __jsx(ProductBox, null, stateProductListModel.productList.map(product => __jsx(ProductItemBox, {\n    key: `stateProductListModel.productList_${product.id}`,\n    product: product\n  })))));\n};","map":null,"metadata":{},"sourceType":"module"}