{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport { SigninInput } from '../../../register';\nimport { ll } from '../../../../../tools/dealKey';\nimport { dealLastNumber } from '../../../../../tools/utils';\nimport { FormControl, FormControlLabel, FormLabel, MenuItem, Radio, RadioGroup, TextField } from '@material-ui/core';\nimport { Space } from '../../../../../components/Box/Box';\nimport { DatePicker } from '@material-ui/pickers';\nimport React from 'react';\nimport { CreditAddressInputTypeEnum, ProvinceData } from '../../../../../ss_common/enum';\nimport { ButtonLoad } from '../../../../../components/ButtonLoad/ButtonLoad';\nimport { showMessage } from '../../../../../components/Message/Message';\nimport { FieldContain } from '../../myInfo/updatePassword';\nimport { useStoreModel } from '../../../../../ModelAction/useStore';\nimport { MyCreditCardEditModel } from './[id]';\nimport { styled } from '@material-ui/styles';\nimport { myAddressModel } from '../../myAddress/list';\nvar RadioGroupBox = styled(RadioGroup)({\n  display: 'flex',\n  flexDirection: 'row'\n});\nexport var CardFieldContain = function CardFieldContain(_ref) {\n  var footerBox = _ref.footerBox,\n      _ref$finallyAction = _ref.finallyAction,\n      finallyAction = _ref$finallyAction === void 0 ? function () {} : _ref$finallyAction,\n      _ref$variant = _ref.variant,\n      variant = _ref$variant === void 0 ? 'standard' : _ref$variant;\n\n  var _useStoreModel = useStoreModel(MyCreditCardEditModel),\n      stateMyCreditCardEditModel = _useStoreModel.state,\n      actionsMyCreditCardEditModel = _useStoreModel.actions;\n\n  var _useStoreModel2 = useStoreModel(myAddressModel),\n      stateMyAddressModel = _useStoreModel2.state;\n\n  return __jsx(FieldContain, null, [['信用卡号', 'number', function () {\n    var _dealLastNumber;\n\n    return __jsx(SigninInput, {\n      key: \"numberKey\",\n      variant: variant,\n      label: ll('信用卡号'),\n      value: stateMyCreditCardEditModel.isEditNumber ? stateMyCreditCardEditModel.form['number'] : (_dealLastNumber = dealLastNumber(stateMyCreditCardEditModel.form['number'])) !== null && _dealLastNumber !== void 0 ? _dealLastNumber : '',\n      onChange: function onChange(event) {\n        return actionsMyCreditCardEditModel.setForm(['number', event.target.value]);\n      },\n      onFocus: function onFocus() {\n        return actionsMyCreditCardEditModel.numberFocus();\n      }\n    });\n  }], ['过期日', 'expirationTime', function () {\n    return __jsx(DatePicker, {\n      key: \"expirationTime\",\n      fullWidth: true,\n      label: ll('过期日'),\n      inputVariant: variant,\n      format: 'MM/yy',\n      value: stateMyCreditCardEditModel.form.expirationTime || null,\n      onChange: function onChange(date) {\n        actionsMyCreditCardEditModel.setForm(['expirationTime', date]);\n      }\n    });\n  }], ['验证码', 'code', function () {\n    var _stateMyCreditCardEdi;\n\n    return __jsx(SigninInput, {\n      key: \"codeKey\",\n      variant: variant,\n      type: \"password\",\n      label: ll('验证码'),\n      value: (_stateMyCreditCardEdi = stateMyCreditCardEditModel.form['code']) !== null && _stateMyCreditCardEdi !== void 0 ? _stateMyCreditCardEdi : '',\n      onChange: function onChange(event) {\n        return actionsMyCreditCardEditModel.setForm(['code', event.target.value]);\n      }\n    });\n  }], ['持卡人姓名', 'userName'], ['详细地址', 'addressDetail', function () {\n    var _stateMyCreditCardEdi2;\n\n    return __jsx(React.Fragment, {\n      key: \"addressDetail__box\"\n    }, __jsx(FormControl, {\n      key: \"addressDetail\",\n      fullWidth: true,\n      size: 'small',\n      variant: variant\n    }, __jsx(Space, {\n      h: 10\n    }), __jsx(FormLabel, {\n      style: {\n        fontSize: 'small'\n      }\n    }, ll('账单地址')), __jsx(RadioGroupBox, {\n      value: stateMyCreditCardEditModel.form.creditAddressInputType,\n      onChange: function onChange(event, value) {\n        return actionsMyCreditCardEditModel.setForm(['creditAddressInputType', value]);\n      }\n    }, __jsx(FormControlLabel, {\n      label: ll('收货地址中选择'),\n      value: CreditAddressInputTypeEnum.Select,\n      control: __jsx(Radio, null)\n    }), __jsx(FormControlLabel, {\n      value: CreditAddressInputTypeEnum.Input,\n      label: ll('新地址手动输入'),\n      control: __jsx(Radio, null)\n    }))), stateMyCreditCardEditModel.form.creditAddressInputType === CreditAddressInputTypeEnum.Select && __jsx(TextField, {\n      key: 'creditAddressInputType_select',\n      variant: variant,\n      style: {\n        marginTop: '10px'\n      },\n      select: true,\n      fullWidth: true,\n      value: '##',\n      onChange: function onChange(e) {\n        return actionsMyCreditCardEditModel.changeSelectId(stateMyAddressModel.list.find(function (v) {\n          return v.id === e.target.value;\n        }));\n      }\n    }, __jsx(MenuItem, {\n      value: '##',\n      disabled: true\n    }, ll('选择地址')), stateMyAddressModel.list.map(function (item) {\n      return __jsx(MenuItem, {\n        key: \"addressSelect_\".concat(item.id),\n        value: \"\".concat(item.id)\n      }, item.name, \", \", item.address);\n    })), [['详细地址', 'address'], ['地区', 'district'], ['城市', 'city'], ['州', 'province', __jsx(TextField, {\n      key: 'myAddressEdit_province',\n      variant: variant,\n      style: {\n        marginTop: '10px'\n      },\n      select: true,\n      fullWidth: true,\n      label: '州',\n      value: (_stateMyCreditCardEdi2 = stateMyCreditCardEditModel.form.province) !== null && _stateMyCreditCardEdi2 !== void 0 ? _stateMyCreditCardEdi2 : '',\n      onChange: function onChange(e) {\n        return actionsMyCreditCardEditModel.setForm(['province', e.target.value]);\n      },\n      disabled: stateMyCreditCardEditModel.form.creditAddressInputType === CreditAddressInputTypeEnum.Select\n    }, ProvinceData.map(function (item) {\n      return __jsx(MenuItem, {\n        key: \"provinceData_\".concat(item[0]),\n        value: item[1]\n      }, item[1]);\n    }))], ['邮政编码', 'zip']].map(function (v) {\n      var _stateMyCreditCardEdi3;\n\n      return v[2] && v[2] || __jsx(SigninInput, {\n        key: \"myAddressEdit_\".concat(v[1]),\n        variant: variant,\n        label: ll(v[0]),\n        value: (_stateMyCreditCardEdi3 = stateMyCreditCardEditModel.form[v[1]]) !== null && _stateMyCreditCardEdi3 !== void 0 ? _stateMyCreditCardEdi3 : '',\n        onChange: function onChange(event) {\n          return actionsMyCreditCardEditModel.setForm([v[1], event.target.value]);\n        },\n        disabled: stateMyCreditCardEditModel.form.creditAddressInputType === CreditAddressInputTypeEnum.Select\n      });\n    }));\n  }], // ['邮政编码', 'zipCode'],\n  // ['城市', 'city'],\n  ['联系方式', 'contact']].map(function (v) {\n    var _stateMyCreditCardEdi4;\n\n    return v[2] && v[2]() || __jsx(SigninInput, {\n      key: \"MyCreditCardEdit_\".concat(v[1]),\n      variant: variant,\n      label: ll(v[0]),\n      value: (_stateMyCreditCardEdi4 = stateMyCreditCardEditModel.form[v[1]]) !== null && _stateMyCreditCardEdi4 !== void 0 ? _stateMyCreditCardEdi4 : '',\n      onChange: function onChange(event) {\n        return actionsMyCreditCardEditModel.setForm([v[1], event.target.value]);\n      },\n      disabled: stateMyCreditCardEditModel.form.creditAddressInputType === CreditAddressInputTypeEnum.Select\n    });\n  }), footerBox && footerBox || __jsx(React.Fragment, null, __jsx(\"section\", {\n    style: {\n      width: '100%',\n      height: '20px'\n    }\n  }), __jsx(ButtonLoad, {\n    fullWidth: true,\n    variant: 'contained',\n    color: 'secondary',\n    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$actionsMyCredi, _yield$actionsMyCredi2;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return actionsMyCreditCardEditModel.submit();\n\n            case 2:\n              _context.t1 = _yield$actionsMyCredi = _context.sent;\n              _context.t0 = _context.t1 === null;\n\n              if (_context.t0) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.t0 = _yield$actionsMyCredi === void 0;\n\n            case 6:\n              if (!_context.t0) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.t2 = void 0;\n              _context.next = 11;\n              break;\n\n            case 10:\n              _context.t2 = (_yield$actionsMyCredi2 = _yield$actionsMyCredi.saveUserPayCard) === null || _yield$actionsMyCredi2 === void 0 ? void 0 : _yield$actionsMyCredi2.id;\n\n            case 11:\n              if (!_context.t2) {\n                _context.next = 15;\n                break;\n              }\n\n              showMessage('操作成功');\n              actionsMyCreditCardEditModel.clearForm();\n              finallyAction();\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))\n  }, \"\\u4FDD\\u5B58\")));\n};","map":null,"metadata":{},"sourceType":"module"}