{"ast":null,"code":"import { modelFactory } from '../ModelAction/modelUtil';\nimport { fpMerge, fpMergePre, fpSet } from '../tools/utils';\nexport const dialogModelFactory = (name, initData) => modelFactory(`${name}_dialogModelFactory`, {\n  dialogData: initData,\n  open: false,\n  isEdit: -1,\n  openResolve: () => {}\n}, {\n  openClick: (value, {\n    setData\n  }) => {\n    return new Promise(resolve => {\n      setData(preData => fpMerge(preData, {\n        open: true,\n        dialogData: value,\n        isEdit: -1,\n        openResolve: resolve\n      }));\n    });\n  },\n  openEditClick: (value, {\n    setData\n  }) => setData(pre => fpMerge(pre, {\n    open: true,\n    dialogData: value.data,\n    isEdit: value.index\n  })),\n  onClose: (value, {\n    data,\n    setData\n  }) => {\n    data.openResolve(false);\n    setData(fpMergePre({\n      open: false\n    }));\n    setTimeout(() => {\n      setData(pre => fpMerge(fpSet(pre, 'dialogData', {}), {\n        dialogData: initData\n      }));\n    }, 500);\n  },\n  setdialog: (value, {\n    setData\n  }) => setData(data => fpMerge(data, {\n    dialogData: value\n  }))\n});","map":null,"metadata":{},"sourceType":"module"}