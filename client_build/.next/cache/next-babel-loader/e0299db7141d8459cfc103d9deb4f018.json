{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\code\\\\zw\\\\zw_client_web\\\\utils\\\\view\\\\me\\\\orderHistory\\\\orderHistory.tsx\";\n\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport { HeaderTitle } from '../../../components/HeaderTitle/HeaderTitle';\nimport { Button, ButtonBase, Tab, Tabs } from '@material-ui/core';\nimport { ls } from '../../../tools/dealKey';\nimport { modelFactory } from '../../../ModelAction/modelUtil';\nimport { useStoreModel } from '../../../ModelAction/useStore';\nimport { formatDate, fpMergePre } from '../../../tools/utils';\nimport { doc } from '../../../graphqlTypes/doc';\nimport { BScroller } from '../../../components/BScroll/BScroller';\nimport styled from 'styled-components';\nimport { grey } from '@material-ui/core/colors';\nimport { dealImgUrl } from '../../../tools/img';\nimport { mpStyle } from '../../../style/common';\nimport { OrderState } from '../../../ss_common/enum';\nimport { useRouter } from 'next/router';\nvar orderHistoryModel = modelFactory('orderHistoryModel', {\n  state: 0,\n  orderList: []\n}, {\n  changeState: function changeState(value, option) {\n    option.setData(fpMergePre({\n      state: value\n    }));\n  },\n  getList: function getList(value, option) {\n    var res;\n    return _regeneratorRuntime.async(function getList$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(option.query(doc.orderList, {\n              data: {\n                state: option.data.state\n              }\n            }));\n\n          case 2:\n            res = _context.sent;\n            option.setData(fpMergePre({\n              orderList: res === null || res === void 0 ? void 0 : res.orderList\n            }));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n});\nvar Parting = styled.div.withConfig({\n  displayName: \"orderHistory__Parting\",\n  componentId: \"sc-1sgveef-0\"\n})([\"height:18px;width:100%;background:\", \";\"], grey[100]);\nvar Item = styled('div').withConfig({\n  displayName: \"orderHistory__Item\",\n  componentId: \"sc-1sgveef-1\"\n})([\"&&&{padding:20px;display:flex;flex-direction:column;align-items:stretch;> header{display:flex;justify-content:space-between;}> section{margin-top:10px;text-align:right;> span{color:\", \";}}> footer{text-align:right;margin-top:10px;}}\"], mpStyle.red);\nvar ImgList = styled(ButtonBase).withConfig({\n  displayName: \"orderHistory__ImgList\",\n  componentId: \"sc-1sgveef-2\"\n})([\"&&&{display:grid;width:100%;grid-template-columns:repeat(4,1fr) 30px;grid-gap:10px;align-items:center;min-height:20vw;> aside{grid-area:1/5/2/6;justify-self:end;}}\"]);\nexport var OrderHistory = function OrderHistory() {\n  var _ohState$orderList$li;\n\n  var router = useRouter();\n\n  var _useStoreModel = useStoreModel(orderHistoryModel),\n      ohState = _useStoreModel.state,\n      ohActions = _useStoreModel.actions;\n\n  useEffect(function () {\n    ohActions.getList();\n  }, []);\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 10\n    }\n  }, __jsx(HeaderTitle, {\n    title: '订单历史',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }), __jsx(Tabs, {\n    variant: 'fullWidth',\n    value: ohState.state,\n    onChange: function onChange(e, value) {\n      ohActions.changeState(value);\n      ohActions.getList();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, __jsx(Tab, {\n    value: 0,\n    label: ls('全部'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }), __jsx(Tab, {\n    value: OrderState.Picking,\n    label: ls('待收货/取货'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }), __jsx(Tab, {\n    value: OrderState.Paid,\n    label: ls('代付款'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  })), __jsx(BScroller, {\n    boxHeight: 'calc(100vh - 108px)',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, (_ohState$orderList$li = ohState.orderList.list) === null || _ohState$orderList$li === void 0 ? void 0 : _ohState$orderList$li.map(function (value) {\n    var _value$rOrderProduct, _value$rOrderProduct$, _value$rOrderProduct2, _value$actuallyPaid;\n\n    return __jsx(React.Fragment, {\n      key: \"ohState.orderList_\".concat(value === null || value === void 0 ? void 0 : value.id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, __jsx(Parting, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    }), __jsx(Item, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }\n    }, __jsx(\"header\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }, __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, formatDate(value === null || value === void 0 ? void 0 : value.createTime)), __jsx(\"aside\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    }, value === null || value === void 0 ? void 0 : value.state)), __jsx(ImgList, {\n      onClick: function onClick() {\n        return router.push('/me/orderDetail/[id]', \"/me/orderDetail/\".concat(value === null || value === void 0 ? void 0 : value.id));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, value === null || value === void 0 ? void 0 : (_value$rOrderProduct = value.rOrderProduct) === null || _value$rOrderProduct === void 0 ? void 0 : (_value$rOrderProduct$ = _value$rOrderProduct.filter(function (value) {\n      var _value$product, _value$product$img, _value$product$img$;\n\n      return value === null || value === void 0 ? void 0 : (_value$product = value.product) === null || _value$product === void 0 ? void 0 : (_value$product$img = _value$product.img) === null || _value$product$img === void 0 ? void 0 : (_value$product$img$ = _value$product$img[0]) === null || _value$product$img$ === void 0 ? void 0 : _value$product$img$.url;\n    })) === null || _value$rOrderProduct$ === void 0 ? void 0 : _value$rOrderProduct$.map(function (value1) {\n      var _value1$product, _value1$product$img, _value1$product$img$, _value1$product2, _value1$product2$img, _value1$product2$img$;\n\n      return __jsx(\"img\", {\n        key: \"url_\".concat(value1 === null || value1 === void 0 ? void 0 : (_value1$product = value1.product) === null || _value1$product === void 0 ? void 0 : (_value1$product$img = _value1$product.img) === null || _value1$product$img === void 0 ? void 0 : (_value1$product$img$ = _value1$product$img[0]) === null || _value1$product$img$ === void 0 ? void 0 : _value1$product$img$.url),\n        src: dealImgUrl(value1 === null || value1 === void 0 ? void 0 : (_value1$product2 = value1.product) === null || _value1$product2 === void 0 ? void 0 : (_value1$product2$img = _value1$product2.img) === null || _value1$product2$img === void 0 ? void 0 : (_value1$product2$img$ = _value1$product2$img[0]) === null || _value1$product2$img$ === void 0 ? void 0 : _value1$product2$img$.url),\n        alt: \"\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 102\n        }\n      });\n    }), __jsx(\"aside\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, __jsx(ArrowForwardIosIcon, {\n      htmlColor: grey[400],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 19\n      }\n    }))), __jsx(\"section\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, \"\\u5171\", value === null || value === void 0 ? void 0 : (_value$rOrderProduct2 = value.rOrderProduct) === null || _value$rOrderProduct2 === void 0 ? void 0 : _value$rOrderProduct2.reduce(function (pre, cur) {\n      var _cur$count;\n\n      return pre + ((_cur$count = cur === null || cur === void 0 ? void 0 : cur.count) !== null && _cur$count !== void 0 ? _cur$count : 0);\n    }, 0), \"\\u4EF6\\u5546\\u54C1 \\u5B9E\\u4ED8\", __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 96\n      }\n    }, \"$\", (_value$actuallyPaid = value === null || value === void 0 ? void 0 : value.actuallyPaid) !== null && _value$actuallyPaid !== void 0 ? _value$actuallyPaid : 0)), __jsx(\"footer\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, __jsx(Button, {\n      color: 'secondary',\n      variant: 'contained',\n      onClick: function onClick(e) {\n        console.log('123');\n        e.stopPropagation();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, ls('确认收货')))));\n  }), __jsx(Parting, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  })));\n};","map":{"version":3,"sources":["D:/code/zw/zw_client_web/utils/view/me/orderHistory/orderHistory.tsx"],"names":["React","useEffect","ArrowForwardIosIcon","HeaderTitle","Button","ButtonBase","Tab","Tabs","ls","modelFactory","useStoreModel","formatDate","fpMergePre","doc","BScroller","styled","grey","dealImgUrl","mpStyle","OrderState","useRouter","orderHistoryModel","state","orderList","changeState","value","option","setData","getList","query","data","res","Parting","div","Item","red","ImgList","OrderHistory","router","ohState","ohActions","actions","e","Picking","Paid","list","map","id","createTime","push","rOrderProduct","filter","product","img","url","value1","reduce","pre","cur","count","actuallyPaid","console","log","stopPropagation"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react'\r\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos'\r\nimport {HeaderTitle} from '../../../components/HeaderTitle/HeaderTitle'\r\nimport {Button, ButtonBase, Tab, Tabs} from '@material-ui/core'\r\nimport {ls} from '../../../tools/dealKey'\r\nimport {modelFactory} from '../../../ModelAction/modelUtil'\r\nimport {useStoreModel} from '../../../ModelAction/useStore'\r\nimport {formatDate, fpMergePre} from '../../../tools/utils'\r\nimport {doc} from '../../../graphqlTypes/doc'\r\nimport {OrderInput, OrderPage} from '../../../graphqlTypes/types'\r\nimport {BScroller} from '../../../components/BScroll/BScroller'\r\nimport styled from 'styled-components'\r\nimport {grey} from '@material-ui/core/colors'\r\nimport {dealImgUrl} from '../../../tools/img'\r\nimport {mpStyle} from '../../../style/common'\r\nimport {OrderState} from '../../../ss_common/enum'\r\nimport {useRouter} from 'next/router'\r\n\r\nconst orderHistoryModel = modelFactory('orderHistoryModel', {\r\n  state: 0,\r\n  orderList: [] as OrderPage,\r\n}, {\r\n  changeState: (value, option) => {\r\n    option.setData(fpMergePre({state: value}))\r\n  },\r\n  getList: async (value, option) => {\r\n    const res = await option.query(doc.orderList, {\r\n      data: {\r\n        state: option.data.state,\r\n      } as OrderInput,\r\n    })\r\n    option.setData(fpMergePre({\r\n      orderList: res?.orderList,\r\n    }))\r\n  },\r\n})\r\n\r\nconst Parting = styled.div`\r\n    height: 18px;\r\n    width: 100%;\r\n    background: ${grey[100]};\r\n`\r\nconst Item = styled('div')`\r\n  &&& {\r\n    padding: 20px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    > header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n    }\r\n    > section {\r\n      margin-top: 10px;\r\n      text-align: right;\r\n      > span {\r\n        color: ${mpStyle.red};\r\n      }\r\n    }\r\n    > footer {\r\n      text-align: right;\r\n      margin-top: 10px;\r\n    }\r\n  }\r\n`\r\nconst ImgList = styled(ButtonBase)`\r\n  &&& {\r\n    display: grid;\r\n    width: 100%;\r\n    grid-template-columns: repeat(4, 1fr) 30px;\r\n    grid-gap: 10px;\r\n    align-items: center;\r\n    min-height: 20vw;\r\n    > aside {\r\n      grid-area: 1/5/2/6;\r\n      justify-self: end;\r\n    }\r\n  }\r\n`\r\n\r\nexport const OrderHistory = () => {\r\n  const router = useRouter()\r\n  const {state: ohState, actions: ohActions} = useStoreModel(orderHistoryModel)\r\n  useEffect(() => {\r\n    ohActions.getList()\r\n  }, [])\r\n\r\n  return <div>\r\n    <HeaderTitle\r\n        title={'订单历史'}\r\n    />\r\n    <Tabs\r\n        variant={'fullWidth'}\r\n        value={ohState.state}\r\n        onChange={(e, value) => {\r\n          ohActions.changeState(value)\r\n          ohActions.getList()\r\n        }}\r\n    >\r\n      <Tab\r\n          value={0}\r\n          label={ls('全部')}\r\n      />\r\n      <Tab\r\n          value={OrderState.Picking}\r\n          label={ls('待收货/取货')}\r\n      />\r\n      <Tab\r\n          value={OrderState.Paid}\r\n          label={ls('代付款')}\r\n      />\r\n    </Tabs>\r\n    <BScroller\r\n        boxHeight={'calc(100vh - 108px)'}\r\n    >\r\n      {ohState.orderList.list?.map(value =>\r\n          <React.Fragment\r\n              key={`ohState.orderList_${value?.id}`}\r\n          >\r\n            <Parting/>\r\n            <Item>\r\n              <header>\r\n                <span>{formatDate(value?.createTime)}</span>\r\n                <aside>{value?.state}</aside>\r\n              </header>\r\n              <ImgList\r\n                  onClick={() => router.push('/me/orderDetail/[id]', `/me/orderDetail/${value?.id}`)}\r\n              >\r\n                {value?.rOrderProduct?.filter(value => value?.product?.img?.[0]?.url)?.map(value1 => <img\r\n                    key={`url_${value1?.product?.img?.[0]?.url}`}\r\n                    src={dealImgUrl(value1?.product?.img?.[0]?.url)}\r\n                    alt=\"\"/>)}\r\n                <aside>\r\n                  <ArrowForwardIosIcon htmlColor={grey[400]}/>\r\n                </aside>\r\n              </ImgList>\r\n              <section>\r\n                共{value?.rOrderProduct?.reduce((pre, cur) => pre + (cur?.count ?? 0), 0)}件商品 实付<span>${value?.actuallyPaid ?? 0}</span>\r\n              </section>\r\n              <footer>\r\n                <Button\r\n                    color={'secondary'}\r\n                    variant={'contained'}\r\n                    onClick={e => {\r\n                      console.log('123')\r\n                      e.stopPropagation()\r\n                    }}\r\n                >{ls('确认收货')}</Button>\r\n              </footer>\r\n            </Item>\r\n          </React.Fragment>,\r\n      )}\r\n      <Parting/>\r\n    </BScroller>\r\n  </div>\r\n}\r\n"]},"metadata":{},"sourceType":"module"}