{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\code\\\\zw\\\\zw_client_web\\\\utils\\\\view\\\\m\\\\home\\\\components\\\\Tabs\\\\Tabs.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport { Tab, Tabs } from '@material-ui/core';\nimport React from 'react';\nimport CategorySelection from '../CategorySelection/CategorySelection';\nimport Router, { useRouter } from 'next/router';\nimport { modelFactory } from '../../../../../ModelAction/modelUtil';\nimport { useStoreModel } from '../../../../../ModelAction/useStore';\nimport { AppModuleTypeEnum, DictTypeEnum } from '../../../../../ss_common/enum';\nimport { ll } from '../../../../../tools/dealKey';\nimport { PromotionFlashSale } from '../PromotionFlashSale/PromotionFlashSale';\nimport { ThemeSelection } from '../ThemeSelection/ThemeSelection';\nimport { HomeType } from '../../appModule';\nimport { fpMergePre } from '../../../../../tools/utils';\nimport { getDataConfig } from '../../../../../graphqlTypes/doc';\nimport { SalesRank } from '../SalesRank/SalesRank';\nimport { UpdateShopCart } from '../../../../../components/ProductItem/UpdateShopCart';\nimport { isEmpty } from 'lodash';\nimport { LineRanking } from '../LineRanking/LineRanking';\nimport styled from 'styled-components';\nexport var homeTabsModel = modelFactory('HomeTabs', {\n  homeType: '',\n  appModuleConfig: {}\n}, {\n  setHomeType: function setHomeType(value, option) {\n    option.setData(fpMergePre({\n      homeType: value\n    }));\n  },\n  onChange: function onChange(_ref, option) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        name = _ref2[0],\n        type = _ref2[1];\n\n    // @ts-ignore\n    Router.push(\"/m/\".concat(type, \"/[appModule]\"), \"/m/\".concat(type, \"/\").concat(name), {\n      shallow: true\n    }); // option.setData(fpMergePre({\n    //   value,\n    // }))\n  },\n  getData: function () {\n    var _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value, option) {\n      var _appModuleConfig$getD, _appModuleConfig$getD2;\n\n      var appModuleConfig;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return option.query(getDataConfig, {\n                data: {\n                  type: DictTypeEnum.AppModule\n                }\n              }, {});\n\n            case 2:\n              appModuleConfig = _context.sent;\n              option.setData(fpMergePre({\n                appModuleConfig: (_appModuleConfig$getD = appModuleConfig === null || appModuleConfig === void 0 ? void 0 : (_appModuleConfig$getD2 = appModuleConfig.getDataConfig) === null || _appModuleConfig$getD2 === void 0 ? void 0 : _appModuleConfig$getD2.value) !== null && _appModuleConfig$getD !== void 0 ? _appModuleConfig$getD : {}\n              }));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function getData(_x, _x2) {\n      return _getData.apply(this, arguments);\n    }\n\n    return getData;\n  }()\n});\nvar Box = styled.div.withConfig({\n  displayName: \"Tabs__Box\",\n  componentId: \"sc-129boo8-0\"\n})([\"margin-top:10px;&&&{.MuiButtonBase-root{padding:0;}}\"]);\n_c = Box;\nexport var HomeTabs = function HomeTabs(_ref3) {\n  _s();\n\n  var _router$query$appModu;\n\n  var homeType = _ref3.homeType;\n  var router = useRouter();\n\n  var _useStoreModel = useStoreModel(homeTabsModel),\n      homeTabsState = _useStoreModel.state,\n      homeTabsActions = _useStoreModel.actions;\n\n  return __jsx(Box, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, !isEmpty(homeTabsState === null || homeTabsState === void 0 ? void 0 : homeTabsState.appModuleConfig) && __jsx(Tabs, {\n    variant: 'fullWidth',\n    value: (_router$query$appModu = router.query.appModule) !== null && _router$query$appModu !== void 0 ? _router$query$appModu : AppModuleTypeEnum.categorySelection,\n    onChange: function onChange(event, value) {\n      return homeTabsActions.onChange([value, homeType]);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 54\n    }\n  }, __jsx(Tab, {\n    value: AppModuleTypeEnum.categorySelection,\n    label: ll(homeType === HomeType.group ? '分类拼团' : '分类选择'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }), (homeType === HomeType.home && [[AppModuleTypeEnum.limitTime, '限时选购'], [AppModuleTypeEnum.salesRank, '热销排行'], [AppModuleTypeEnum.themeSelection, '主题甄选'], [AppModuleTypeEnum.mayLike, '猜你喜欢']] || homeType === HomeType.group && [[AppModuleTypeEnum.salesRank, '热门排行'], [AppModuleTypeEnum.lineRanking, '冲线排行']] || []).filter(function (v) {\n    var _homeTabsState$appMod;\n\n    return homeTabsState === null || homeTabsState === void 0 ? void 0 : (_homeTabsState$appMod = homeTabsState.appModuleConfig) === null || _homeTabsState$appMod === void 0 ? void 0 : _homeTabsState$appMod[v[0]];\n  }).map(function (v) {\n    return __jsx(Tab, {\n      key: \"AppModuleTypeEnum_\".concat(v[0]),\n      value: v[0],\n      label: ll(v[1]),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 84\n      }\n    });\n  })), __jsx(\"main\", {\n    style: {\n      marginTop: '10px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, router.query.appModule === AppModuleTypeEnum.categorySelection && __jsx(CategorySelection, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 14\n    }\n  }), router.query.appModule === AppModuleTypeEnum.limitTime && __jsx(PromotionFlashSale, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 14\n    }\n  }), router.query.appModule === AppModuleTypeEnum.themeSelection && __jsx(ThemeSelection, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 14\n    }\n  }), router.query.appModule === AppModuleTypeEnum.salesRank && __jsx(SalesRank, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 14\n    }\n  }), router.query.appModule === AppModuleTypeEnum.lineRanking && __jsx(LineRanking, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 14\n    }\n  })), __jsx(UpdateShopCart, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }));\n};\n\n_s(HomeTabs, \"SqQeb6G5vvsvDC+sxFTlA+YG4jg=\", false, function () {\n  return [useRouter, useStoreModel];\n});\n\n_c2 = HomeTabs;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Box\");\n$RefreshReg$(_c2, \"HomeTabs\");","map":{"version":3,"sources":["D:/code/zw/zw_client_web/utils/view/m/home/components/Tabs/Tabs.tsx"],"names":["Tab","Tabs","React","CategorySelection","Router","useRouter","modelFactory","useStoreModel","AppModuleTypeEnum","DictTypeEnum","ll","PromotionFlashSale","ThemeSelection","HomeType","fpMergePre","getDataConfig","SalesRank","UpdateShopCart","isEmpty","LineRanking","styled","homeTabsModel","homeType","appModuleConfig","setHomeType","value","option","setData","onChange","name","type","push","shallow","getData","query","data","AppModule","Box","div","HomeTabs","router","homeTabsState","state","homeTabsActions","actions","appModule","categorySelection","event","group","home","limitTime","salesRank","themeSelection","mayLike","lineRanking","filter","v","map","marginTop"],"mappings":"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","sourcesContent":["import {Tab, Tabs} from '@material-ui/core'\r\nimport React from 'react'\r\nimport CategorySelection from '../CategorySelection/CategorySelection'\r\nimport Router, {useRouter} from 'next/router'\r\nimport {modelFactory} from '../../../../../ModelAction/modelUtil'\r\nimport {useStoreModel} from '../../../../../ModelAction/useStore'\r\nimport {AppModuleTypeEnum, DictTypeEnum} from '../../../../../ss_common/enum'\r\nimport {ll} from '../../../../../tools/dealKey'\r\nimport {PromotionFlashSale} from '../PromotionFlashSale/PromotionFlashSale'\r\nimport {ThemeSelection} from '../ThemeSelection/ThemeSelection'\r\nimport {HomeType} from '../../appModule'\r\nimport {fpMergePre} from '../../../../../tools/utils'\r\nimport {getDataConfig} from '../../../../../graphqlTypes/doc'\r\nimport {DataConfigItemInput} from '../../../../../graphqlTypes/types'\r\nimport {SalesRank} from '../SalesRank/SalesRank'\r\nimport {UpdateShopCart} from '../../../../../components/ProductItem/UpdateShopCart'\r\nimport {isEmpty} from 'lodash'\r\nimport {LineRanking} from '../LineRanking/LineRanking'\r\nimport styled from 'styled-components'\r\n\r\nexport const homeTabsModel = modelFactory('HomeTabs', {\r\n  homeType: '',\r\n  appModuleConfig: {} as any,\r\n}, {\r\n  setHomeType: (value: string, option) => {\r\n    option.setData(fpMergePre({\r\n      homeType: value,\r\n    }))\r\n  },\r\n  onChange: ([name, type], option) => {\r\n    // @ts-ignore\r\n    Router.push(`/m/${type}/[appModule]`, `/m/${type}/${name}`, {shallow: true})\r\n    // option.setData(fpMergePre({\r\n    //   value,\r\n    // }))\r\n  },\r\n  getData: async (value, option) => {\r\n    const appModuleConfig = await option.query(getDataConfig, {\r\n      data: {\r\n        type: DictTypeEnum.AppModule,\r\n      } as DataConfigItemInput,\r\n    }, {})\r\n    option.setData(fpMergePre({\r\n      appModuleConfig: appModuleConfig?.getDataConfig?.value ?? {},\r\n    }))\r\n  },\r\n})\r\n\r\nconst Box = styled.div`\r\n  margin-top: 10px;\r\n  &&& {\r\n    .MuiButtonBase-root {\r\n      padding: 0;\r\n    }\r\n  }\r\n`\r\n\r\nexport const HomeTabs = ({homeType}: { homeType: string }) => {\r\n  const router = useRouter()\r\n  const {state: homeTabsState, actions: homeTabsActions} = useStoreModel(homeTabsModel)\r\n\r\n  return (\r\n      <Box>\r\n        {!isEmpty(homeTabsState?.appModuleConfig) && <Tabs\r\n            variant={'fullWidth'}\r\n            value={router.query.appModule ?? AppModuleTypeEnum.categorySelection}\r\n            onChange={(event, value) => homeTabsActions.onChange([value, homeType])}\r\n        >\r\n          <Tab\r\n              value={AppModuleTypeEnum.categorySelection}\r\n              label={ll(homeType === HomeType.group ? '分类拼团' : '分类选择')}\r\n          />\r\n          {((homeType === HomeType.home && [\r\n            [AppModuleTypeEnum.limitTime, '限时选购'],\r\n            [AppModuleTypeEnum.salesRank, '热销排行'],\r\n            [AppModuleTypeEnum.themeSelection, '主题甄选'],\r\n            [AppModuleTypeEnum.mayLike, '猜你喜欢'],\r\n          ]) || (homeType === HomeType.group && [\r\n            [AppModuleTypeEnum.salesRank, '热门排行'],\r\n            [AppModuleTypeEnum.lineRanking, '冲线排行'],\r\n          ]) || []).filter(v => (homeTabsState?.appModuleConfig?.[v[0]])).map(v => <Tab\r\n              key={`AppModuleTypeEnum_${v[0]}`}\r\n              value={v[0]}\r\n              label={ll(v[1])}\r\n          />)}\r\n        </Tabs>}\r\n        <main\r\n            style={{marginTop: '10px'}}\r\n        >\r\n          {router.query.appModule === AppModuleTypeEnum.categorySelection\r\n          && <CategorySelection/>}\r\n          {router.query.appModule === AppModuleTypeEnum.limitTime\r\n          && <PromotionFlashSale/>}\r\n          {router.query.appModule === AppModuleTypeEnum.themeSelection\r\n          && <ThemeSelection/>}\r\n          {router.query.appModule === AppModuleTypeEnum.salesRank\r\n          && <SalesRank/>}\r\n          {router.query.appModule === AppModuleTypeEnum.lineRanking\r\n          && <LineRanking/>}\r\n        </main>\r\n        <UpdateShopCart/>\r\n      </Box>\r\n  )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}