{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{\"9pAu\":function(e,t,n){\"use strict\";n.r(t);var o=n(\"rePB\"),r=n(\"KQm4\"),i=n(\"o0o1\"),u=n.n(i),l=n(\"HaE+\"),a=n(\"q1tI\"),c=n.n(a),d=n(\"zfZ/\"),s=n.n(d),p=n(\"roQC\"),f=n.n(p),v=n(\"nOHt\"),m=n(\"+/yG\"),b=n(\"i7FU\"),g=n(\"U81q\"),O=n(\"cBzo\"),j=n(\"K0AU\"),y=n(\"B42p\"),h=n(\"vOnD\"),x=n(\"+vfP\"),w=n(\"ZtJr\"),D=n(\"LXXt\"),k=n(\"Z3vd\"),I=n(\"GLZ+\"),P=n(\"Oj7+\"),C=n(\"oxxF\"),N=n(\"r9w1\"),S=n(\"jjAL\"),_=n(\"PsDL\"),L=n(\"cW92\"),A=n(\"4Rmy\"),Q=n(\"E2gh\"),F=n.n(Q),z=n(\"7O+n\"),E=n(\"c+KP\"),q=n(\"q3aC\"),R=n(\"n+/U\"),U=n(\"+kHn\"),B=n(\"OO/1\"),G=c.a.createElement;function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=Object(m.c)(\"orderPageModel\",{show:!1},{open:function(e,t){t.setData(Object(O.f)({show:!0}))},close:function(e,t){t.setData(Object(O.f)({show:!1}))}}),W=h.a.div.withConfig({displayName:\"groupOrderPage__OrderPageBox\",componentId:\"bhof7w-0\"})([\"position:fixed;top:0;bottom:0;left:0;right:0;background:white;> footer{position:fixed;bottom:0;box-sizing:border-box;box-shadow:\",\";width:100vw;text-align:right;}\"],w.a.shadow[1]),X=function(){var e,t,n,o,r=Object(v.useRouter)(),i=Object(g.b)(Z),c=i.state,d=i.actions,s=Object(g.b)(V),p=s.actions,f=s.state,m=f.product,b=Object(g.b)(E.c),j=b.state,y=b.actions;Object(a.useEffect)((function(){j.user.id||y.getOrderInfo()}),[]);var h=Object(g.b)(q.b).actions,w=Object(g.b)(R.b).actions,D=j.dealAddressData(j),Q=(null===(e=j.payCardList)||void 0===e?void 0:e.find((function(e){return e.id===j.form.paymentMethodCardId})))||{},M=(null!==(t=m.priceOut)&&void 0!==t?t:0)*f.selectNum,X=j.dealTransportationCosts(j,M),H=f.dealDiscountAmount(f)+X+Object(O.a)(j.form.saleTax),J=.01*H;return c.show&&G(W,null,G(I.b,{style:{padding:\"20px\"}},G(\"img\",{src:Object(P.a)(null===m||void 0===m?void 0:null===(n=m.img)||void 0===n?void 0:null===(o=n[0])||void 0===o?void 0:o.url),alt:\"\"}),G(\"main\",null,null===m||void 0===m?void 0:m.name,null===m||void 0===m?void 0:m.weight,null===m||void 0===m?void 0:m.unit),G(\"section\",null,null===m||void 0===m?void 0:m.remark),G(\"footer\",null,G(C.d,{product:m}),G(\"span\",null,f.selectNum,Object(x.a)(\"\\u4efd\")))),G(N.a,{style:{margin:\"16px\",width:\"calc(100vw - 32px)\"},fullWidth:!0,label:Object(x.a)(\"\\u8fd0\\u9001\\u65b9\\u5f0f\"),select:!0,value:j.form.pickUpType,onChange:function(e){y.setForm([\"pickUpType\",e.target.value]),y.setForm([\"addressId\",j.initAddressId(Object(O.e)(j,{form:{pickUpType:e.target.value}}))])}},G(S.a,{value:A.h.Self},Object(x.a)(Object(A.k)(A.h.Self))),G(S.a,{value:A.h.Delivery},Object(x.a)(Object(A.k)(A.h.Delivery)))),G(z.a,null,G(\"main\",null,G(\"header\",null,\"\".concat(D.combineAddress)),G(\"footer\",null,\"\".concat(D.name,\" \").concat(D.contactInformation))),G(\"aside\",null,G(_.a,{onClick:Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.openClick();case 2:(t=e.sent)&&y.setForm([\"addressId\",t]);case 4:case\"end\":return e.stop()}}),e)})))},G(F.a,null)))),G(z.d,null,G(L.b,{w:20}),Object(x.a)(\"\\u4ed8\\u6b3e\\u65b9\\u5f0f\")),G(z.b,null,G(\"header\",null,Q.name),G(\"footer\",null,Q.number),G(\"aside\",null,G(_.a,{onClick:Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.openClick();case 2:(t=e.sent)&&y.setForm([\"paymentMethodCardId\",t]);case 4:case\"end\":return e.stop()}}),e)})))},G(F.a,null)))),G(q.a,null),G(R.a,null),G(z.e,null,G(\"header\",null,Object(x.a)(\"\\u8d2d\\u7269\\u8f66\\u603b\\u8ba1\")),G(\"footer\",null,Object(O.b)(M))),X>0&&G(z.e,null,G(\"header\",null,Object(x.a)(\"\\u8fd0\\u8d39\")),G(\"footer\",null,Object(O.b)(X))),G(z.e,null,G(\"header\",null,Object(x.a)(\"\\u4efd\\u6570\\u6298\\u6263\")),G(\"footer\",null,f.numDiscount)),G(z.e,null,G(\"header\",null,Object(x.a)(\"\\u6210\\u56e2\\u6298\\u4e0a\\u6298\")),G(\"footer\",null,f.groupDiscount)),G(z.e,{style:{fontSize:\"18px\"}},G(\"header\",null,Object(x.a)(\"\\u8ba2\\u5355\\u603b\\u989d\")),G(\"footer\",null,Object(O.b)(H))),G(L.b,{h:60}),G(\"footer\",null,G(k.a,{style:{marginRight:\"8px\"},variant:\"contained\",onClick:function(){d.close()}},Object(x.a)(\"\\u53d6\\u6d88\")),G(U.a,{variant:\"contained\",color:\"secondary\",onClick:Object(l.a)(u.a.mark((function e(){var t,n,o,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.submit({orderInfoItemInput:T(T({},j.form),{},{generateCoin:J,actuallyPaid:H,transportationCosts:X,subtotal:M,currentUserLevel:null===(t=j.user.userInfo)||void 0===t?void 0:t.userLevel,rOrderProduct:[{count:f.selectNum,productId:null===m||void 0===m?void 0:m.id,product:m}]})});case 2:if(!(null===(o=e.sent)||void 0===o?void 0:null===(n=o.saveGroupOrder)||void 0===n?void 0:n.id)){e.next=12;break}return Object(B.b)(\"\\u64cd\\u4f5c\\u6210\\u529f \\u5c06\\u524d\\u5f80\\u4ed8\\u6b3e\"),l=Object(O.c)({orderId:null===o||void 0===o?void 0:null===(i=o.saveGroupOrder)||void 0===i?void 0:i.id}),e.next=8,r.replace(\"/pay\".concat(l),\"/pay\".concat(l));case 8:y.clearData(),y.getList(),p.clearData(),d.close();case 12:case\"end\":return e.stop()}}),e)})))},Object(x.a)(\"\\u63d0\\u4ea4\\u8ba2\\u5355\"))))||null},H=c.a.createElement;function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=Object(m.c)(\"groupProductModel\",{product:{},groupQueueList:[],selectNum:0,selectQueueId:\"\",numDiscount:1,groupDiscount:1,groupDiscountConfig:{},dealDiscountAmount:function(e){var t;return(null!==(t=e.product.priceOut)&&void 0!==t?t:0)*e.selectNum*e.numDiscount*e.groupDiscount}},{getData:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var o,r,i,l,a,c,d,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.query(b.b.productListByIds,{ids:[t]});case 2:return c=e.sent,e.next=5,n.query(b.b.groupQueueList,{groupQueueItemInput:{product:{id:t}}});case 5:return d=e.sent,e.next=8,n.query(b.c,{data:{type:A.d.GroupPrecision}},{});case 8:s=e.sent,n.setData(Object(O.f)({product:null!==(o=null===c||void 0===c?void 0:null===(r=c.productListByIds)||void 0===r?void 0:r.list[0])&&void 0!==o?o:{},groupQueueList:null!==(i=null===d||void 0===d?void 0:null===(l=d.groupQueueList)||void 0===l?void 0:l.sort((function(e,t){var n,o;return(null!==(n=e.sumFillAmount)&&void 0!==n?n:0)-(null!==(o=t.sumFillAmount)&&void 0!==o?o:0)})))&&void 0!==i?i:[],groupDiscountConfig:null===s||void 0===s?void 0:null===(a=s.getDataConfig)||void 0===a?void 0:a.value}));case 10:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateSelectNum:function(e,t){var n,o,i,u,l,a,c,d,s,p=t.data.groupDiscountConfig,f=e===t.data.selectNum?0:e,v=e===t.data.selectNum?\"\":null!==(n=null===(o=Object(r.a)(t.data.groupQueueList).reverse())||void 0===o?void 0:null===(i=o.find((function(n){var o,r,i,u;return(null!==(o=n.sumFillAmount)&&void 0!==o?o:0)+e<=(null!==(r=null===(i=t.data)||void 0===i?void 0:null===(u=i.product)||void 0===u?void 0:u.groupPrecision)&&void 0!==r?r:0)})))||void 0===i?void 0:i.id)&&void 0!==n?n:\"\";t.setData(Object(O.f)({selectNum:f,selectQueueId:v,groupDiscount:(null!==(u=null===(l=t.data.groupQueueList.find((function(e){return e.id===v})))||void 0===l?void 0:l.sumFillAmount)&&void 0!==u?u:0)+f===t.data.product.groupPrecision?p.groupDiscount:1,numDiscount:null!==(a=null===p||void 0===p?void 0:null===(c=p[null!==(s=t.data.product.groupPrecision)&&void 0!==s?s:0])||void 0===c?void 0:null===(d=c.discount)||void 0===d?void 0:d[f])&&void 0!==a?a:1}))},clearData:function(e,t){t.setData(Object(O.f)({selectNum:0,selectQueueId:\"\",numDiscount:1,groupDiscount:1}))},submit:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.orderInfoItemInput,e.next=3,n.mutate(b.b.saveGroupOrder,{orderInfoItemInput:K({},o),groupOrderItemInput:{orderGroupAmount:n.data.selectNum},groupQueueItemInput:K({product:n.data.product},n.data.selectQueueId?{id:n.data.selectQueueId}:{})});case 3:return e.abrupt(\"return\",e.sent);case 4:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),Y=h.a.div.withConfig({displayName:\"id__PriceRed\",componentId:\"sc-1c5vpsf-0\"})([\"background:\",\";color:white;display:grid;grid-template-columns:1fr 120px;grid-template-rows:repeat(2,30px);align-items:center;> main{grid-area:1/1/3/2;padding-left:20px;> span{margin-left:16px;}}\"],w.a.red),$=h.a.div.withConfig({displayName:\"id__Name\",componentId:\"sc-1c5vpsf-1\"})([\"padding:16px 20px;display:flex;align-items:flex-end;> main{font-size:22px;margin-right:8px;flex-shrink:0;}> section{> span{padding:0 4px;background:\",\";border-radius:4px;position:relative;bottom:-4px;margin-left:8px;display:inline-flex;align-items:center;}}\"],D.a[700]),ee=function(){return H(s.a,{fontSize:\"small\",style:{color:\"#FDD334\"}})},te=h.a.header.withConfig({displayName:\"id__Title\",componentId:\"sc-1c5vpsf-2\"})([\"font-size:20px;\"]),ne=h.a.div.withConfig({displayName:\"id__GroupQueueBox\",componentId:\"sc-1c5vpsf-3\"})([\"padding:16px;\"]),oe=h.a.div.withConfig({displayName:\"id__SmartMatch\",componentId:\"sc-1c5vpsf-4\"})([\"padding:16px 16px 90px;> section{margin-top:8px;display:flex;align-items:center;}> main{}\"]),re=h.a.div.withConfig({displayName:\"id__Price\",componentId:\"sc-1c5vpsf-5\"})([\"margin-top:8px;display:flex;justify-content:space-between;align-items:center;> main{font-weight:bold;}> main,section{> *{text-align:center;}}\"]),ie=h.a.div.withConfig({displayName:\"id__Submit\",componentId:\"sc-1c5vpsf-6\"})([\"position:fixed;height:60px;bottom:0;width:100vw;background:white;border-top:1px solid \",\";display:flex;align-items:center;justify-content:space-between;box-shadow:\",\";> aside{padding-left:16px;color:\",\";}\"],w.a.red,w.a.shadow[1],w.a.red),ue=h.a.div.withConfig({displayName:\"id__GroupQueueListBox\",componentId:\"sc-1c5vpsf-7\"})([\"margin-top:16px;border-radius:8px;background:\",\";display:flex;justify-content:space-between;align-items:center;padding:0 8px;\"],(function(e){return e.select?\"linear-gradient(to right, \".concat(w.a.red,\", #FC7361)\"):D.a[200]}));t.default=function(){var e,t,n,o,i=null!==(e=null===(t=Object(v.useRouter)().query)||void 0===t?void 0:t.id)&&void 0!==e?e:\"\",u=Object(g.b)(V),l=u.actions,c=u.state;Object(a.useEffect)((function(){l.getData(i)}),[i]);var d=Object(g.b)(Z).actions,p=c.product;return H(\"div\",null,H(y.a,{title:\"\\u4ea7\\u54c1\\u8be6\\u60c5\"}),H(j.a,{height:\"240px\",dataList:null===p||void 0===p?void 0:null===(n=p.img)||void 0===n?void 0:n.map((function(e){return K(K({},e),{},{imgUrl:null===e||void 0===e?void 0:e.url})}))}),H(Y,null,H(\"main\",null,Object(x.a)(\"\\u57fa\\u51c6\\u4ef7\\u683c\"),H(\"span\",null,Object(O.b)(p.priceOut),\"/\",p.packingUnitString)),H(\"aside\",null,Object(x.a)(\"\\u5df2\\u6210\\u56e2\"),c.groupQueueList.filter((function(e){return e.sumFillAmount===(null===p||void 0===p?void 0:p.groupPrecision)})).length,Object(x.a)(\"\\u5355\")),H(\"aside\",null,Object(x.a)(\"\\u62fc\\u56e2\\u4e2d\"),c.groupQueueList.filter((function(e){var t,n;return(null!==(t=e.sumFillAmount)&&void 0!==t?t:0)<(null!==(n=null===p||void 0===p?void 0:p.groupPrecision)&&void 0!==n?n:0)})).length,Object(x.a)(\"\\u5355\"))),H($,null,H(\"main\",null,p.name),H(\"section\",null,p.groupRemark,\"/\",p.groupAmount,p.groupAmountUnitString,H(\"br\",null),Object(x.a)(\"\\u5206\\u56e2\\u7cbe\\u5ea6\"),H(\"span\",null,Object(r.a)(Array(p.groupPrecision)).map((function(e,t){return t})).map((function(e){return H(ee,{key:e})}))))),H(ne,null,H(te,null,Object(x.a)(\"\\u62fc\\u56e2\\u4e2d\")),c.groupQueueList.map((function(e){var t,n=e.id===c.selectQueueId;return H(ue,{select:n,key:\"GroupQueueListBox\".concat(e.id)},H(\"aside\",null,Object(r.a)(Array(p.groupPrecision)).map((function(e,t){return t})).map((function(t){var o;return t+1>(null!==(o=e.sumFillAmount)&&void 0!==o?o:0)+(n?c.selectNum:0)?H(f.a,{key:\"clickStar\".concat(t),fontSize:\"large\",onClick:function(){return l.updateSelectNum(t+1)},style:{color:n?\"#fff\":\"#000\"}}):H(s.a,{key:\"clickStar\".concat(t),style:{color:\"#FDD334\"},fontSize:\"large\",onClick:function(){return l.updateSelectNum(t+1)}})}))),H(\"footer\",null,Object(x.a)((null!==(t=e.sumFillAmount)&&void 0!==t?t:0)+(n?c.selectNum:0)===p.groupPrecision?\"\\u6210\\u56e2\\u5566\":\"\\u672a\\u6210\\u56e2\")))}))),H(oe,null,H(\"header\",null,H(te,null,Object(x.a)(\"\\u667a\\u80fd\\u5339\\u914d\"))),H(\"section\",null,Object(x.a)(\"\\u8bf7\\u70b9\\u51fb\"),H(f.a,null),Object(x.a)(\"\\u786e\\u5b9a\\u60a8\\u9700\\u8981\\u7684\\u4efd\\u6570\")),H(\"main\",null,Object(r.a)(Array(p.groupPrecision)).map((function(e,t){return t})).map((function(e){return e+1>c.selectNum?H(f.a,{key:\"clickStar\".concat(e),fontSize:\"large\",onClick:function(){return l.updateSelectNum(e+1)}}):H(s.a,{key:\"clickStar\".concat(e),style:{color:\"#FDD334\"},fontSize:\"large\",onClick:function(){return l.updateSelectNum(e+1)}})}))),H(re,null,H(\"main\",null,H(\"header\",null,Object(O.b)(c.dealDiscountAmount(c))),H(\"footer\",null,Object(x.a)(\"\\u6298\\u540e\\u4ef7\\u683c\"))),H(\"div\",null,\"=\"),H(\"section\",null,H(\"header\",null,Object(O.b)((null!==(o=p.priceOut)&&void 0!==o?o:0)*c.selectNum)),H(\"footer\",null,Object(x.a)(\"\\u57fa\\u51c6\\u4ef7\\u683c\"))),H(\"div\",null,\"x\"),H(\"section\",null,H(\"header\",null,c.numDiscount),H(\"footer\",null,Object(x.a)(\"\\u4efd\\u6570\\u6298\\u6263\"))),H(\"div\",null,\"x\"),H(\"section\",null,H(\"header\",null,c.groupDiscount),H(\"footer\",null,Object(x.a)(\"\\u6210\\u56e2\\u6298\\u4e0a\\u6298\"))))),H(ie,null,H(\"aside\",null,Object(x.a)(\"\\u9009\\u62e9\\u4e86\"),c.selectNum,Object(x.a)(\"\\u4efd\")),H(k.a,{disabled:0===c.selectNum,style:{height:\"100%\",padding:\"0 32px\",borderRadius:\"0\",fontSize:\"18px\"},color:\"secondary\",variant:\"contained\",onClick:function(){d.open()}},Object(x.a)(\"\\u53bb\\u7ed3\\u7b97\"))),H(X,null))}},rOW0:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/groupProduct/[id]\",function(){return n(\"9pAu\")}])},roQC:function(e,t,n){\"use strict\";var o=n(\"TqRt\");Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var r=o(n(\"q1tI\")),i=(0,o(n(\"8/g6\")).default)(r.default.createElement(\"path\",{d:\"M19.65 9.04l-4.84-.42-1.89-4.45c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08l4.15-2.5 4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.73 3.67-3.18c.67-.58.32-1.68-.56-1.75zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"}),\"StarBorderRounded\");t.default=i},\"zfZ/\":function(e,t,n){\"use strict\";var o=n(\"TqRt\");Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var r=o(n(\"q1tI\")),i=(0,o(n(\"8/g6\")).default)(r.default.createElement(\"path\",{d:\"M12 17.27l4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.72 3.67-3.18c.67-.58.31-1.68-.57-1.75l-4.83-.41-1.89-4.46c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08l4.15-2.5z\"}),\"StarRounded\");t.default=i}},[[\"rOW0\",1,0,5,2,3,4,6,7,8,9,10,11,12,14]]]);","extractedComments":[]}