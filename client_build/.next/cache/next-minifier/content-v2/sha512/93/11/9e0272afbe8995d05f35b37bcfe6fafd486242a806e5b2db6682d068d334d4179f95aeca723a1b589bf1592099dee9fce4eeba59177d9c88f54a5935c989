{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[49],{\"/0+H\":function(e,n,t){\"use strict\";n.__esModule=!0,n.isInAmpMode=i,n.useAmp=function(){return i(o.default.useContext(a.AmpStateContext))};var r,o=(r=t(\"q1tI\"))&&r.__esModule?r:{default:r},a=t(\"lwAK\");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.ampFirst,t=void 0!==n&&n,r=e.hybrid,o=void 0!==r&&r,a=e.hasQuery,i=void 0!==a&&a;return t||o&&i}},\"48fX\":function(e,n,t){var r=t(\"qhzo\");e.exports=function(e,n){if(\"function\"!==typeof n&&null!==n)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&r(e,n)}},\"5fIB\":function(e,n,t){var r=t(\"7eYB\");e.exports=function(e){if(Array.isArray(e))return r(e)}},\"8Kt/\":function(e,n,t){\"use strict\";t(\"oI91\");n.__esModule=!0,n.defaultHead=c,n.default=void 0;var r,o=function(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!==typeof e&&\"function\"!==typeof e)return{default:e};var n=u();if(n&&n.has(e))return n.get(e);var t={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}t.default=e,n&&n.set(e,t);return t}(t(\"q1tI\")),a=(r=t(\"Xuae\"))&&r.__esModule?r:{default:r},i=t(\"lwAK\"),l=t(\"FYa8\"),d=t(\"/0+H\");function u(){if(\"function\"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[o.default.createElement(\"meta\",{charSet:\"utf-8\"})];return e||n.push(o.default.createElement(\"meta\",{name:\"viewport\",content:\"width=device-width\"})),n}function s(e,n){return\"string\"===typeof n||\"number\"===typeof n?e:n.type===o.default.Fragment?e.concat(o.default.Children.toArray(n.props.children).reduce((function(e,n){return\"string\"===typeof n||\"number\"===typeof n?e:e.concat(n)}),[])):e.concat(n)}var p=[\"name\",\"httpEquiv\",\"charSet\",\"itemProp\"];function f(e,n){return e.reduce((function(e,n){var t=o.default.Children.toArray(n.props.children);return e.concat(t)}),[]).reduce(s,[]).reverse().concat(c(n.inAmpMode)).filter(function(){var e=new Set,n=new Set,t=new Set,r={};return function(o){var a=!0;if(o.key&&\"number\"!==typeof o.key&&o.key.indexOf(\"$\")>0){var i=o.key.slice(o.key.indexOf(\"$\")+1);e.has(i)?a=!1:e.add(i)}switch(o.type){case\"title\":case\"base\":n.has(o.type)?a=!1:n.add(o.type);break;case\"meta\":for(var l=0,d=p.length;l<d;l++){var u=p[l];if(o.props.hasOwnProperty(u))if(\"charSet\"===u)t.has(u)?a=!1:t.add(u);else{var c=o.props[u],s=r[u]||new Set;s.has(c)?a=!1:(s.add(c),r[u]=s)}}}return a}}()).reverse().map((function(e,n){var t=e.key||n;return o.default.cloneElement(e,{key:t})}))}function m(e){var n=e.children,t=(0,o.useContext)(i.AmpStateContext),r=(0,o.useContext)(l.HeadManagerContext);return o.default.createElement(a.default,{reduceComponentsToState:f,headManager:r,inAmpMode:(0,d.isInAmpMode)(t)},n)}m.rewind=function(){};var v=m;n.default=v},FYa8:function(e,n,t){\"use strict\";var r;n.__esModule=!0,n.HeadManagerContext=void 0;var o=((r=t(\"q1tI\"))&&r.__esModule?r:{default:r}).default.createContext({});n.HeadManagerContext=o},Pi4a:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/m/pay\",function(){return t(\"RTYB\")}])},RTYB:function(e,n,t){\"use strict\";t.r(n);var r=t(\"h4VS\"),o=t(\"q1tI\"),a=t.n(o),i=t(\"8Kt/\"),l=t.n(i),d=t(\"B42p\"),u=t(\"nOHt\"),c=t(\"OO/1\"),s=t(\"U81q\"),p=t(\"cWmw\"),f=t(\"cBzo\"),m=t(\"4Rmy\"),v=t(\"vOnD\"),b=a.a.createElement;function h(){var e=Object(r.a)(['\\n        :global(*) {\\n          -webkit-font-smoothing: antialiased;\\n          -moz-osx-font-smoothing: grayscale;\\n        }\\n\\n        :global(body, html) {\\n          background-color: #F7F8F9;\\n          color: #373F4A;\\n          font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\\n          font-weight: normal;\\n          height: 100%;\\n        }\\n\\n        :global(button) {\\n          border: 0;\\n          font-weight: 500;\\n        }\\n\\n        :global(fieldset) {\\n          margin: 0;\\n          padding: 0;\\n          border: 0;\\n        }\\n\\n        :global(#form-container) {\\n          padding: 20px;\\n          //position: relative;\\n          //width: 380px;\\n          //margin: 0 auto;\\n          //top: 50%;\\n          //transform: translateY(-50%);\\n        }\\n\\n        :global(.third) {\\n          float: left;\\n          width: calc((100% - 32px) / 3);\\n          padding: 0;\\n          margin: 0 16px 16px 0;\\n        }\\n\\n        :global(.third:last-of-type) {\\n          margin-right: 0;\\n        }\\n\\n        /* Define how SqPaymentForm iframes should look */\\n        :global(.sq-input) {\\n          height: 56PX;\\n          box-sizing: border-box;\\n          border: 1px solid #E0E2E3;\\n          background-color: white;\\n          border-radius: 6px;\\n          display: inline-block;\\n          -webkit-transition: border-color .2s ease-in-out;\\n             -moz-transition: border-color .2s ease-in-out;\\n                  transition: border-color .2s ease-in-out;\\n        }\\n\\n        /* Define how SqPaymentForm iframes should look when they have focus */\\n        :global(.sq-input--focus) {\\n          border: 1px solid #4A90E2;\\n        }\\n\\n        /* Define how SqPaymentForm iframes should look when they contain invalid values */\\n        :global(.sq-input--error) {\\n          border: 1px solid #E02F2F;\\n        }\\n\\n        :global(#sq-card-number) {\\n          margin-bottom: 16px;\\n        }\\n\\n        /* Customize the \"Pay with Credit Card\" button */\\n        :global(.button-credit-card) {\\n          width: 100%;\\n          height: 56px;\\n          margin-top: 10px;\\n          background: #4A90E2;\\n          border-radius: 6px;\\n          cursor: pointer;\\n          display: block;\\n          color: #FFFFFF;\\n          font-size: 16px;\\n          line-height: 24px;\\n          font-weight: 700;\\n          letter-spacing: 0;\\n          text-align: center;\\n          -webkit-transition: background .2s ease-in-out;\\n             -moz-transition: background .2s ease-in-out;\\n                  transition: background .2s ease-in-out;\\n        }\\n\\n        :global(.button-credit-card:hover) {\\n          background-color: #4281CB;\\n        }\\n    ']);return h=function(){return e},e}var g=Object(v.a)(h());n.default=function(){var e,n,t=Object(u.useRouter)(),r=null!==(e=null===(n=t.query)||void 0===n?void 0:n.orderId)&&void 0!==e?e:\"\",a=Object(s.b)(p.c),i=a.state,v=a.actions,h=i.orderInfo||{};return Object(o.useEffect)((function(){r&&v.getDetail(\"\".concat(r))}),[r]),Object(o.useEffect)((function(){if(window.SqPaymentForm&&h.actuallyPaid){var e,n=new SqPaymentForm({applicationId:\"sq0idp-IAEwX77Hdunl5dWByHQjIQ\",inputClass:\"sq-input\",autoBuild:!1,inputStyles:[{fontSize:\"16px\",lineHeight:\"24px\",padding:\"16px\",placeholderColor:\"#a0a0a0\",backgroundColor:\"transparent\"}],cardNumber:{elementId:\"sq-card-number\",placeholder:\"Card Number\"},cvv:{elementId:\"sq-cvv\",placeholder:\"CVV\"},expirationDate:{elementId:\"sq-expiration-date\",placeholder:\"MM/YY\"},postalCode:{elementId:\"sq-postal-code\",placeholder:\"Postal\"},callbacks:{cardNonceResponseReceived:function(e,n,o){var a;if(e)return console.error(\"Encountered errors:\"),e.forEach((function(e){console.error(\"  \"+e.message)})),void Object(c.b)(\"Encountered errors, check browser developer console for more details\");fetch(\"/pay/process-payment\",{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({nonce:n,amount:~~(100*(null!==(a=h.actuallyPaid)&&void 0!==a?a:0))})}).catch((function(e){Object(c.b)(\"Network error: \"+e)})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){return v.updateOrder({id:r,state:m.h.Paid})})).then((function(){Object(c.b)(\"\\u652f\\u4ed8\\u6210\\u529f\"),t.replace(\"/m/cart/result\")})).catch((function(e){console.error(e),Object(c.b)(\"Payment failed to complete!\\nCheck browser developer console for more details\")}))}}});n.build();null===(e=document.querySelector(\"#sq-creditcard\"))||void 0===e||e.addEventListener(\"click\",(function(e){e.preventDefault(),n.requestCardNonce()}))}}),[h.actuallyPaid]),b(\"div\",null,b(g,null),b(l.a,null,b(\"title\",null,\"pay\"),b(\"script\",{type:\"text/javascript\",src:\"https://js.squareup.com/v2/paymentform\"})),b(d.a,{title:\"\\u652f\\u4ed8\",backCall:function(){return t.replace(\"/m/home\"),!0}}),b(\"div\",{id:\"form-container\"},!h.actuallyPaid&&\"\\u672a\\u627e\\u5230\\u8ba2\\u5355\\u4fe1\\u606f\",b(\"div\",{id:\"sq-card-number\"}),b(\"div\",{className:\"third\",id:\"sq-expiration-date\"}),b(\"div\",{className:\"third\",id:\"sq-cvv\"}),b(\"div\",{className:\"third\",id:\"sq-postal-code\"}),b(\"button\",{id:\"sq-creditcard\",className:\"button-credit-card\"},\"Pay \",Object(f.c)(h.actuallyPaid))))}},T0f4:function(e,n){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},Xuae:function(e,n,t){\"use strict\";var r=t(\"mPvQ\"),o=t(\"/GRZ\"),a=t(\"i2R6\"),i=(t(\"qXWd\"),t(\"48fX\")),l=t(\"tCBg\"),d=t(\"T0f4\");function u(e){var n=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=d(e);if(n){var o=d(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return l(this,t)}}n.__esModule=!0,n.default=void 0;var c=t(\"q1tI\"),s=function(e){i(t,e);var n=u(t);function t(e){var a;return o(this,t),(a=n.call(this,e))._hasHeadManager=void 0,a.emitChange=function(){a._hasHeadManager&&a.props.headManager.updateHead(a.props.reduceComponentsToState(r(a.props.headManager.mountedInstances),a.props))},a._hasHeadManager=a.props.headManager&&a.props.headManager.mountedInstances,a}return a(t,[{key:\"componentDidMount\",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.add(this),this.emitChange()}},{key:\"componentDidUpdate\",value:function(){this.emitChange()}},{key:\"componentWillUnmount\",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.delete(this),this.emitChange()}},{key:\"render\",value:function(){return null}}]),t}(c.Component);n.default=s},cWmw:function(e,n,t){\"use strict\";t.d(n,\"c\",(function(){return j})),t.d(n,\"b\",(function(){return I})),t.d(n,\"a\",(function(){return M}));var r=t(\"o0o1\"),o=t.n(r),a=t(\"HaE+\"),i=t(\"q1tI\"),l=t.n(i),d=t(\"B42p\"),u=t(\"Z3gB\"),c=t(\"vOnD\"),s=t(\"+/yG\"),p=t(\"i7FU\"),f=t(\"cBzo\"),m=t(\"U81q\"),v=t(\"nOHt\"),b=t(\"+vfP\"),h=t(\"4Rmy\"),g=t(\"ZtJr\"),y=t(\"LXXt\"),x=t(\"Oj7+\"),w=t(\"cW92\"),O=l.a.createElement,j=Object(s.c)(\"orderDetail\",{orderInfo:{},selfAddress:[]},{getDetail:function(){var e=Object(a.a)(o.a.mark((function e(n,t){var r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query(p.b.orderDetail,{id:n});case 2:i=e.sent,t.setData(Object(f.g)({orderInfo:(null===i||void 0===i?void 0:i.orderDetail)||{},selfAddress:(null===i||void 0===i||null===(r=i.selfAddress)||void 0===r||null===(a=r.value)||void 0===a?void 0:a.list)||[]}));case 4:case\"end\":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),updateOrder:function(){var e=Object(a.a)(o.a.mark((function e(n,t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.mutate(p.b.updateOrder,{orderInfoItemInput:n});case 2:return e.abrupt(\"return\",e.sent);case 3:case\"end\":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}),_=c.b.div.withConfig({displayName:\"orderDetail__Box\",componentId:\"sc-11dm5lg-0\"})([\"padding:0 20px;\"]),k=c.b.div.withConfig({displayName:\"orderDetail__Top\",componentId:\"sc-11dm5lg-1\"})([\"margin-top:10px;font-size:18px;display:flex;> aside{margin-left:20px;color:\",\";}\"],g.b.red),C=c.b.div.withConfig({displayName:\"orderDetail__InfoLabel\",componentId:\"sc-11dm5lg-2\"})([\"display:flex;margin-top:16px;> section{> *{margin-bottom:4px;}}> aside{color:\",\";width:80px;}\"],y.a[600]),P=c.b.div.withConfig({displayName:\"orderDetail__GreyPart\",componentId:\"sc-11dm5lg-3\"})([\"margin-top:12px;position:relative;left:-20px;width:100vw;height:12px;background:\",\";\"],y.a[200]),I=c.b.div.withConfig({displayName:\"orderDetail__ProductBox\",componentId:\"sc-11dm5lg-4\"})([\"display:grid;padding-top:4vw;margin-bottom:10px;grid-template-columns:min-content 1fr 20vw;> img{grid-area:1/1/4/2;width:20vw;height:20vw;margin-right:14px;}> section{grid-area:1/2/2/4;font-size:20px;> span{font-size:16px;color:\",\";}}> main{padding:10px 0;grid-area:2/2/3/4;font-size:14px;color:\",\";}> footer{display:flex;> aside{text-decoration:line-through;}> span{margin-left:5px;color:\",\";font-size:17px;}}> aside{justify-self:end;> button{border-radius:10px;padding:2px 14px;}}\"],g.b.grey,y.a[500],g.b.red),q=c.b.div.withConfig({displayName:\"orderDetail__Sum\",componentId:\"sc-11dm5lg-5\"})([\"display:flex;justify-content:space-between;margin-bottom:12px;\"]),M=function(){var e,n,t,r,o,a,c,s,p,y=Object(v.useRouter)(),M=Object(m.b)(j),A=M.state,S=M.actions,E=A.orderInfo;return Object(i.useEffect)((function(){var e,n;y.query.id&&!(null===(e=A.orderInfo)||void 0===e?void 0:e.id)&&S.getDetail(\"\".concat(null===(n=y.query)||void 0===n?void 0:n.id))}),[y.query.id,A.orderInfo]),O(\"div\",null,O(d.a,{title:\"\\u8ba2\\u5355\\u8be6\\u60c5\"}),(null===E||void 0===E?void 0:E.id)?O(u.a,{boxHeight:\"calc(100vh - 60px)\"},O(_,null,O(w.b,{h:16}),O(k,null,O(\"section\",null,Object(f.e)(E.createTime,\"YYYY/MM/dd\")),O(\"aside\",null,Object(h.o)(null===E||void 0===E?void 0:E.state))),O(C,null,O(\"aside\",null,Object(b.a)(\"\\u8ba2\\u5355\\u7f16\\u53f7\"),\" :\"),O(\"section\",null,E.number)),O(C,null,O(\"aside\",null,Object(b.a)(\"\\u9001\\u8d27\\u5730\\u5740\"),\" :\"),O(\"section\",null,E.pickUpType===h.i.Self&&(p=A.selfAddress.find((function(e){return e.id===E.selfAddressId})),O(l.a.Fragment,null,O(\"main\",null,p.fullName),O(\"header\",null,p.streetAddress),O(\"footer\",null,p.city,\" \",p.province,\" \",p.zip)))||O(l.a.Fragment,null,O(\"main\",null,null===(e=E.userAddress)||void 0===e?void 0:e.name),O(\"header\",null,null===(n=E.userAddress)||void 0===n?void 0:n.address),O(\"footer\",null,null===(t=E.userAddress)||void 0===t?void 0:t.city,\" \",null===(r=E.userAddress)||void 0===r?void 0:r.province,\" \",null===(o=E.userAddress)||void 0===o?void 0:o.zip)))),O(C,null,O(\"aside\",null,Object(b.a)(\"\\u652f\\u4ed8\\u65b9\\u5f0f\"),\" :\"),O(\"section\",null,O(\"footer\",null,Object(b.a)(\"\\u5361\\u53f7\\u540e\\u56db\\u4f4d\"),\" \",Object(f.j)(\"\".concat(null===(a=E.userPayCard)||void 0===a?void 0:a.number))),O(\"footer\",null,Object(b.a)(\"\\u6301\\u5361\\u4eba\"),\" \",null===E||void 0===E||null===(c=E.userPayCard)||void 0===c?void 0:c.userName))),O(P,null),null===(s=E.rOrderProduct)||void 0===s?void 0:s.map((function(e){var n,t,r,o,a,i,l,d,u,c;return O(I,{key:\"ProductBox_\".concat(e.id)},O(\"img\",{src:Object(x.a)(null===(n=e.product)||void 0===n||null===(t=n.img)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.url),alt:\"\"}),O(\"section\",null,null===(o=e.product)||void 0===o?void 0:o.name,O(w.b,{w:g.b.space.xxs})),O(\"main\",null,null===(a=e.product)||void 0===a?void 0:a.remark),O(\"footer\",null,O(\"aside\",null,Object(f.c)(null===(i=e.product)||void 0===i?void 0:i.priceMarket)),O(\"span\",null,Object(f.c)(null===(l=e.product)||void 0===l?void 0:l.priceOut),\"/\",null!==(d=null===(u=e.product)||void 0===u?void 0:u.packingUnitString)&&void 0!==d?d:Object(b.a)(\"\\u4ef6\"))),O(\"aside\",null,O(\"span\",null,\"x \",null===(c=e.product)||void 0===c?void 0:c.number)))})),O(\"div\",{style:{height:\"26px\",width:\"100%\"}}),O(q,null,O(\"aside\",null,Object(b.a)(\"\\u5c0f\\u8ba1\")),O(\"main\",null,Object(f.c)(E.subtotal))),O(q,null,O(\"aside\",null,Object(b.a)(\"\\u4f18\\u60e0\\u5238\\u6298\\u6263\")),O(\"main\",null,Object(f.c)(0,\"-\"))),O(q,null,O(\"aside\",null,Object(b.a)(\"\\u8fd0\\u8d39\")),O(\"main\",null,Object(f.c)(E.transportationCosts))),O(q,null,O(\"aside\",null,Object(b.a)(\"\\u8fbe\\u4eba\\u5e01\\u62b5\\u6263\")),O(\"main\",null,Object(f.c)(E.deductCoin,\"-\"))),O(q,null,O(\"aside\",null,Object(b.a)(\"\\u5b9e\\u9645\\u652f\\u4ed8\")),O(\"main\",null,Object(f.c)(E.actuallyPaid))),O(q,null,O(\"aside\",null,Object(b.a)(\"\\u83b7\\u5f97\\u8fbe\\u4eba\\u5e01\")),O(\"main\",null,Object(f.c)(E.generateCoin))),O(\"div\",{style:{height:\"96px\",width:\"100%\"}}))):O(\"div\",null))}},kG2m:function(e,n){e.exports=function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}},lwAK:function(e,n,t){\"use strict\";var r;n.__esModule=!0,n.AmpStateContext=void 0;var o=((r=t(\"q1tI\"))&&r.__esModule?r:{default:r}).default.createContext({});n.AmpStateContext=o},mPvQ:function(e,n,t){var r=t(\"5fIB\"),o=t(\"rlHP\"),a=t(\"KckH\"),i=t(\"kG2m\");e.exports=function(e){return r(e)||o(e)||a(e)||i()}},oI91:function(e,n){e.exports=function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}},qXWd:function(e,n){e.exports=function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}},rlHP:function(e,n){e.exports=function(e){if(\"undefined\"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},tCBg:function(e,n,t){var r=t(\"C+bE\"),o=t(\"qXWd\");e.exports=function(e,n){return!n||\"object\"!==r(n)&&\"function\"!==typeof n?o(e):n}}},[[\"Pi4a\",1,0,5,2,3,4,6,7,8]]]);","extractedComments":[]}