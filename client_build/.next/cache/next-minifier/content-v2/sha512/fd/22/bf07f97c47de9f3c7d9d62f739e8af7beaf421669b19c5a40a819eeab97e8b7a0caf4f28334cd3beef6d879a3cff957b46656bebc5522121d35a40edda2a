{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{\"9pAu\":function(e,t,n){\"use strict\";n.r(t);var o=n(\"rePB\"),r=n(\"KQm4\"),i=n(\"o0o1\"),l=n.n(i),u=n(\"HaE+\"),a=n(\"q1tI\"),c=n.n(a),d=n(\"zfZ/\"),s=n.n(d),p=n(\"roQC\"),f=n.n(p),v=n(\"nOHt\"),b=n(\"+/yG\"),m=n(\"i7FU\"),g=n(\"U81q\"),O=n(\"cBzo\"),j=n(\"K0AU\"),h=n(\"B42p\"),y=n(\"vOnD\"),x=n(\"+vfP\"),w=n(\"ZtJr\"),I=n(\"LXXt\"),k=n(\"Z3vd\"),P=n(\"GLZ+\"),D=n(\"Oj7+\"),C=n(\"oxxF\"),N=n(\"r9w1\"),S=n(\"jjAL\"),_=n(\"PsDL\"),L=n(\"cW92\"),Q=n(\"4Rmy\"),F=n(\"E2gh\"),A=n.n(F),z=n(\"7O+n\"),E=n(\"c+KP\"),U=n(\"q3aC\"),M=n(\"n+/U\"),R=n(\"+kHn\"),q=n(\"OO/1\"),B=c.a.createElement;function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=Object(b.c)(\"orderPageModel\",{show:!1},{open:function(e,t){t.setData(Object(O.f)({show:!0}))},close:function(e,t){t.setData(Object(O.f)({show:!1}))}}),W=y.a.div.withConfig({displayName:\"groupOrderPage__OrderPageBox\",componentId:\"bhof7w-0\"})([\"position:fixed;top:0;bottom:0;left:0;right:0;background:white;> footer{position:fixed;bottom:0;box-sizing:border-box;box-shadow:\",\";width:100vw;text-align:right;}\"],w.a.shadow[1]),X=function(){var e,t,n,o,r,i=Object(v.useRouter)(),c=Object(g.b)(Z),d=c.state,s=c.actions,p=Object(g.b)(V),f=p.actions,b=p.state,m=b.product,j=Object(g.b)(E.c),h=j.state,y=j.actions;Object(a.useEffect)((function(){h.user.id||y.getOrderInfo()}),[]);var w=Object(g.b)(U.b).actions,I=Object(g.b)(M.b).actions,F=h.dealAddressData(h),T=(null===(e=h.payCardList)||void 0===e?void 0:e.find((function(e){return e.id===h.form.paymentMethodCardId})))||{},X=(null!==(t=m.priceOut)&&void 0!==t?t:0)*b.selectNum,H=h.form.pickUpType===Q.f.Delivery&&h.freightConfig.reduce((function(e,t){return e>parseFloat(null===t||void 0===t?void 0:t.freightPay)&&X<parseFloat(null===t||void 0===t?void 0:t.orderMax)?parseFloat(null===t||void 0===t?void 0:t.freightPay):e}),parseFloat(null===(n=h.freightConfig[h.freightConfig.length-1])||void 0===n?void 0:n.freightPay))||0,J=X+H+Object(O.a)(h.form.saleTax),K=.01*J;return d.show&&B(W,null,B(P.b,{style:{padding:\"20px\"}},B(\"img\",{src:Object(D.a)(null===m||void 0===m?void 0:null===(o=m.img)||void 0===o?void 0:null===(r=o[0])||void 0===r?void 0:r.url),alt:\"\"}),B(\"main\",null,null===m||void 0===m?void 0:m.name,null===m||void 0===m?void 0:m.weight,null===m||void 0===m?void 0:m.unit),B(\"section\",null,null===m||void 0===m?void 0:m.remark),B(\"footer\",null,B(C.d,{product:m}),B(\"span\",null,b.selectNum,Object(x.a)(\"\\u4efd\")))),B(N.a,{style:{margin:\"16px\",width:\"calc(100vw - 32px)\"},fullWidth:!0,label:Object(x.a)(\"\\u8fd0\\u9001\\u65b9\\u5f0f\"),select:!0,value:h.form.pickUpType,onChange:function(e){y.setForm([\"pickUpType\",e.target.value]),y.setForm([\"addressId\",h.initAddressId(Object(O.e)(h,{form:{pickUpType:e.target.value}}))])}},B(S.a,{value:Q.f.Self},Object(x.a)(Object(Q.h)(Q.f.Self))),B(S.a,{value:Q.f.Delivery},Object(x.a)(Object(Q.h)(Q.f.Delivery)))),B(z.a,null,B(\"main\",null,B(\"header\",null,\"\".concat(F.combineAddress)),B(\"footer\",null,\"\".concat(F.name,\" \").concat(F.contactInformation))),B(\"aside\",null,B(_.a,{onClick:Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.openClick();case 2:(t=e.sent)&&y.setForm([\"addressId\",t]);case 4:case\"end\":return e.stop()}}),e)})))},B(A.a,null)))),B(z.d,null,B(L.b,{w:20}),Object(x.a)(\"\\u4ed8\\u6b3e\\u65b9\\u5f0f\")),B(z.b,null,B(\"header\",null,T.name),B(\"footer\",null,T.number),B(\"aside\",null,B(_.a,{onClick:Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.openClick();case 2:(t=e.sent)&&y.setForm([\"paymentMethodCardId\",t]);case 4:case\"end\":return e.stop()}}),e)})))},B(A.a,null)))),B(U.a,null),B(M.a,null),B(z.e,null,B(\"header\",null,Object(x.a)(\"\\u8d2d\\u7269\\u8f66\\u603b\\u8ba1\")),B(\"footer\",null,Object(O.b)(X))),H>0&&B(z.e,null,B(\"header\",null,Object(x.a)(\"\\u8fd0\\u8d39\")),B(\"footer\",null,Object(O.b)(H))),B(z.e,null,B(\"header\",null,Object(x.a)(\"\\u4efd\\u6570\\u6298\\u6263\")),B(\"footer\",null,b.numDiscount)),B(z.e,null,B(\"header\",null,Object(x.a)(\"\\u6210\\u56e2\\u6298\\u4e0a\\u6298\")),B(\"footer\",null,b.groupDiscount)),B(z.e,{style:{fontSize:\"18px\"}},B(\"header\",null,Object(x.a)(\"\\u8ba2\\u5355\\u603b\\u989d\")),B(\"footer\",null,Object(O.b)(J))),B(L.b,{h:60}),B(\"footer\",null,B(k.a,{style:{marginRight:\"8px\"},variant:\"contained\",onClick:function(){s.close()}},Object(x.a)(\"\\u53d6\\u6d88\")),B(R.a,{variant:\"contained\",color:\"secondary\",onClick:Object(u.a)(l.a.mark((function e(){var t,n,o,r,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.submit({orderInfoItemInput:G(G({},h.form),{},{generateCoin:K,actuallyPaid:J,transportationCosts:H,subtotal:X,currentUserLevel:null===(t=h.user.userInfo)||void 0===t?void 0:t.userLevel,rOrderProduct:[{count:b.selectNum,productId:null===m||void 0===m?void 0:m.id,product:m}]})});case 2:if(!(null===(o=e.sent)||void 0===o?void 0:null===(n=o.saveGroupOrder)||void 0===n?void 0:n.id)){e.next=12;break}return Object(q.b)(\"\\u64cd\\u4f5c\\u6210\\u529f \\u5c06\\u524d\\u5f80\\u4ed8\\u6b3e\"),u=Object(O.c)({orderId:null===o||void 0===o?void 0:null===(r=o.saveGroupOrder)||void 0===r?void 0:r.id}),e.next=8,i.replace(\"/pay\".concat(u),\"/pay\".concat(u));case 8:y.clearData(),y.getList(),f.clearData(),s.close();case 12:case\"end\":return e.stop()}}),e)})))},Object(x.a)(\"\\u63d0\\u4ea4\\u8ba2\\u5355\"))))||null},H=c.a.createElement;function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=Object(b.c)(\"groupProductModel\",{product:{},groupQueueList:[],selectNum:0,selectQueueId:\"\",numDiscount:1,groupDiscount:1},{getData:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var o,r,i,u,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.query(m.b.productListByIds,{ids:[t]});case 2:return a=e.sent,e.next=5,n.query(m.b.groupQueueList,{groupQueueItemInput:{product:{id:t}}});case 5:c=e.sent,n.setData(Object(O.f)({product:null!==(o=null===a||void 0===a?void 0:null===(r=a.productListByIds)||void 0===r?void 0:r.list[0])&&void 0!==o?o:{},groupQueueList:null!==(i=null===c||void 0===c?void 0:null===(u=c.groupQueueList)||void 0===u?void 0:u.sort((function(e,t){var n,o;return(null!==(n=e.sumFillAmount)&&void 0!==n?n:0)-(null!==(o=t.sumFillAmount)&&void 0!==o?o:0)})))&&void 0!==i?i:[]}));case 7:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateSelectNum:function(e,t){var n,o,i;t.setData(Object(O.f)(e===t.data.selectNum?{selectNum:0,selectQueueId:\"\"}:{selectNum:e,selectQueueId:null!==(n=null===(o=Object(r.a)(t.data.groupQueueList).reverse())||void 0===o?void 0:null===(i=o.find((function(n){var o,r,i,l;return(null!==(o=n.sumFillAmount)&&void 0!==o?o:0)+e<=(null!==(r=null===(i=t.data)||void 0===i?void 0:null===(l=i.product)||void 0===l?void 0:l.groupPrecision)&&void 0!==r?r:0)})))||void 0===i?void 0:i.id)&&void 0!==n?n:\"\"}))},clearData:function(e,t){t.setData(Object(O.f)({selectNum:0,selectQueueId:\"\",numDiscount:1,groupDiscount:1}))},submit:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.orderInfoItemInput,e.next=3,n.mutate(m.b.saveGroupOrder,{orderInfoItemInput:K({},o),groupOrderItemInput:{orderGroupAmount:n.data.selectNum},groupQueueItemInput:K({product:n.data.product},n.data.selectQueueId?{id:n.data.selectQueueId}:{})});case 3:return e.abrupt(\"return\",e.sent);case 4:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),Y=y.a.div.withConfig({displayName:\"id__PriceRed\",componentId:\"sc-1c5vpsf-0\"})([\"background:\",\";color:white;display:grid;grid-template-columns:1fr 120px;grid-template-rows:repeat(2,30px);align-items:center;> main{grid-area:1/1/3/2;padding-left:20px;> span{margin-left:16px;}}\"],w.a.red),$=y.a.div.withConfig({displayName:\"id__Name\",componentId:\"sc-1c5vpsf-1\"})([\"padding:16px 20px;display:flex;align-items:flex-end;> main{font-size:22px;margin-right:8px;flex-shrink:0;}> section{> span{padding:0 4px;background:\",\";border-radius:4px;position:relative;bottom:-4px;margin-left:8px;display:inline-flex;align-items:center;}}\"],I.a[700]),ee=function(){return H(s.a,{fontSize:\"small\",style:{color:\"#FDD334\"}})},te=y.a.header.withConfig({displayName:\"id__Title\",componentId:\"sc-1c5vpsf-2\"})([\"font-size:20px;\"]),ne=y.a.div.withConfig({displayName:\"id__GroupQueueBox\",componentId:\"sc-1c5vpsf-3\"})([\"padding:16px;\"]),oe=y.a.div.withConfig({displayName:\"id__SmartMatch\",componentId:\"sc-1c5vpsf-4\"})([\"padding:16px 16px 90px;> section{margin-top:8px;display:flex;align-items:center;}> main{}\"]),re=y.a.div.withConfig({displayName:\"id__Price\",componentId:\"sc-1c5vpsf-5\"})([\"margin-top:8px;display:flex;justify-content:space-between;align-items:center;> main{font-weight:bold;}> main,section{> *{text-align:center;}}\"]),ie=y.a.div.withConfig({displayName:\"id__Submit\",componentId:\"sc-1c5vpsf-6\"})([\"position:fixed;height:60px;bottom:0;width:100vw;background:white;border-top:1px solid \",\";display:flex;align-items:center;justify-content:space-between;box-shadow:\",\";> aside{padding-left:16px;color:\",\";}\"],w.a.red,w.a.shadow[1],w.a.red),le=y.a.div.withConfig({displayName:\"id__GroupQueueListBox\",componentId:\"sc-1c5vpsf-7\"})([\"margin-top:16px;border-radius:8px;background:\",\";display:flex;justify-content:space-between;align-items:center;padding:0 8px;\"],(function(e){return e.select?\"linear-gradient(to right, \".concat(w.a.red,\", #FC7361)\"):I.a[200]}));t.default=function(){var e,t,n,o,i,l=null!==(e=null===(t=Object(v.useRouter)().query)||void 0===t?void 0:t.id)&&void 0!==e?e:\"\",u=Object(g.b)(V),c=u.actions,d=u.state;Object(a.useEffect)((function(){c.getData(l)}),[l]);var p=Object(g.b)(Z).actions,b=d.product;return console.log(d.groupQueueList),H(\"div\",null,H(h.a,{title:\"\\u4ea7\\u54c1\\u8be6\\u60c5\"}),H(j.a,{height:\"240px\",dataList:null===b||void 0===b?void 0:null===(n=b.img)||void 0===n?void 0:n.map((function(e){return K(K({},e),{},{imgUrl:null===e||void 0===e?void 0:e.url})}))}),H(Y,null,H(\"main\",null,Object(x.a)(\"\\u57fa\\u51c6\\u4ef7\\u683c\"),H(\"span\",null,Object(O.b)(b.priceOut),\"/\",b.packingUnitString)),H(\"aside\",null,Object(x.a)(\"\\u5df2\\u6210\\u56e2\"),d.groupQueueList.filter((function(e){return e.sumFillAmount===(null===b||void 0===b?void 0:b.groupPrecision)})).length,Object(x.a)(\"\\u5355\")),H(\"aside\",null,Object(x.a)(\"\\u62fc\\u56e2\\u4e2d\"),d.groupQueueList.filter((function(e){var t,n;return(null!==(t=e.sumFillAmount)&&void 0!==t?t:0)<(null!==(n=null===b||void 0===b?void 0:b.groupPrecision)&&void 0!==n?n:0)})).length,Object(x.a)(\"\\u5355\"))),H($,null,H(\"main\",null,b.name),H(\"section\",null,b.groupRemark,\"/\",b.groupAmount,b.groupAmountUnitString,H(\"br\",null),Object(x.a)(\"\\u5206\\u56e2\\u7cbe\\u5ea6\"),H(\"span\",null,Object(r.a)(Array(b.groupPrecision)).map((function(e,t){return t})).map((function(e){return H(ee,{key:e})}))))),H(ne,null,H(te,null,Object(x.a)(\"\\u62fc\\u56e2\\u4e2d\")),d.groupQueueList.map((function(e){var t,n=e.id===d.selectQueueId;return H(le,{select:n,key:\"GroupQueueListBox\".concat(e.id)},H(\"aside\",null,Object(r.a)(Array(b.groupPrecision)).map((function(e,t){return t})).map((function(t){var o;return t+1>(null!==(o=e.sumFillAmount)&&void 0!==o?o:0)+(n?d.selectNum:0)?H(f.a,{key:\"clickStar\".concat(t),fontSize:\"large\",onClick:function(){return c.updateSelectNum(t+1)},style:{color:n?\"#fff\":\"#000\"}}):H(s.a,{key:\"clickStar\".concat(t),style:{color:\"#FDD334\"},fontSize:\"large\",onClick:function(){return c.updateSelectNum(t+1)}})}))),H(\"footer\",null,Object(x.a)((null!==(t=e.sumFillAmount)&&void 0!==t?t:0)+(n?d.selectNum:0)===b.groupPrecision?\"\\u6210\\u56e2\\u5566\":\"\\u672a\\u6210\\u56e2\")))}))),H(oe,null,H(\"header\",null,H(te,null,Object(x.a)(\"\\u667a\\u80fd\\u5339\\u914d\"))),H(\"section\",null,Object(x.a)(\"\\u8bf7\\u70b9\\u51fb\"),H(f.a,null),Object(x.a)(\"\\u786e\\u5b9a\\u60a8\\u9700\\u8981\\u7684\\u4efd\\u6570\")),H(\"main\",null,Object(r.a)(Array(b.groupPrecision)).map((function(e,t){return t})).map((function(e){return e+1>d.selectNum?H(f.a,{key:\"clickStar\".concat(e),fontSize:\"large\",onClick:function(){return c.updateSelectNum(e+1)}}):H(s.a,{key:\"clickStar\".concat(e),style:{color:\"#FDD334\"},fontSize:\"large\",onClick:function(){return c.updateSelectNum(e+1)}})}))),H(re,null,H(\"main\",null,H(\"header\",null,Object(O.b)((null!==(o=b.priceOut)&&void 0!==o?o:0)*d.selectNum*d.numDiscount*d.groupDiscount)),H(\"footer\",null,Object(x.a)(\"\\u6298\\u540e\\u4ef7\\u683c\"))),H(\"div\",null,\"=\"),H(\"section\",null,H(\"header\",null,Object(O.b)((null!==(i=b.priceOut)&&void 0!==i?i:0)*d.selectNum)),H(\"footer\",null,Object(x.a)(\"\\u57fa\\u51c6\\u4ef7\\u683c\"))),H(\"div\",null,\"x\"),H(\"section\",null,H(\"header\",null,d.numDiscount),H(\"footer\",null,Object(x.a)(\"\\u4efd\\u6570\\u6298\\u6263\"))),H(\"div\",null,\"x\"),H(\"section\",null,H(\"header\",null,d.groupDiscount),H(\"footer\",null,Object(x.a)(\"\\u6210\\u56e2\\u6298\\u4e0a\\u6298\"))))),H(ie,null,H(\"aside\",null,Object(x.a)(\"\\u9009\\u62e9\\u4e86\"),d.selectNum,Object(x.a)(\"\\u4efd\")),H(k.a,{disabled:0===d.selectNum,style:{height:\"100%\",padding:\"0 32px\",borderRadius:\"0\",fontSize:\"18px\"},color:\"secondary\",variant:\"contained\",onClick:function(){p.open()}},Object(x.a)(\"\\u53bb\\u7ed3\\u7b97\"))),H(X,null))}},rOW0:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/groupProduct/[id]\",function(){return n(\"9pAu\")}])},roQC:function(e,t,n){\"use strict\";var o=n(\"TqRt\");Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var r=o(n(\"q1tI\")),i=(0,o(n(\"8/g6\")).default)(r.default.createElement(\"path\",{d:\"M19.65 9.04l-4.84-.42-1.89-4.45c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08l4.15-2.5 4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.73 3.67-3.18c.67-.58.32-1.68-.56-1.75zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"}),\"StarBorderRounded\");t.default=i},\"zfZ/\":function(e,t,n){\"use strict\";var o=n(\"TqRt\");Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var r=o(n(\"q1tI\")),i=(0,o(n(\"8/g6\")).default)(r.default.createElement(\"path\",{d:\"M12 17.27l4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.72 3.67-3.18c.67-.58.31-1.68-.57-1.75l-4.83-.41-1.89-4.46c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08l4.15-2.5z\"}),\"StarRounded\");t.default=i}},[[\"rOW0\",1,0,5,2,3,4,6,7,8,9,10,11,12,14]]]);","extractedComments":[]}